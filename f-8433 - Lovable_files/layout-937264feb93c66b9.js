!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="69842671-cd7d-4f3b-af2c-921ac8354932",e._sentryDebugIdIdentifier="sentry-dbid-69842671-cd7d-4f3b-af2c-921ac8354932")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8825,7050],{49383:function(e,t,s){Promise.resolve().then(s.bind(s,61348))},8098:function(e,t,s){"use strict";s.d(t,{O:function(){return c}});var n=s(57437),a=s(62869),r=s(95186),l=s(53647),i=s(2265);let o=[{id:"default",name:"Default"},{id:"buttondown",name:"Buttondown"}],c=e=>{var t;let{value:s,onChange:c,className:d}=e,[u,m]=(0,i.useState)(""),[h,p]=(0,i.useState)(!1),[x,f]=(0,i.useState)("");return(0,i.useEffect)(()=>{let e=!o.some(e=>e.id===s);p(e),e&&(m(s),f(s))},[s]),(0,n.jsxs)("div",{className:d,children:[(0,n.jsxs)(l.Ph,{value:h?"custom":s,onValueChange:e=>{"custom"===e?p(!0):(p(!1),c(e))},children:[(0,n.jsx)(l.i4,{className:"h-15 w-full",children:(0,n.jsx)(l.ki,{children:h?"Custom: ".concat(u):(null===(t=o.find(e=>e.id===s))||void 0===t?void 0:t.name)||"Select a Model"})}),(0,n.jsx)(l.Bw,{children:(0,n.jsxs)(l.DI,{children:[(0,n.jsx)(l.n5,{children:"Models"}),o.map(e=>(0,n.jsx)(l.Ql,{value:e.id,children:e.name},e.id)),(0,n.jsx)(l.Ql,{value:"custom",children:"Custom Model"})]})})]}),h&&(0,n.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,n.jsx)(r.I,{placeholder:"Enter custom model name",value:x,onChange:e=>f(e.target.value)}),(0,n.jsx)(a.z,{onClick:()=>{m(x),c(x)},children:"Confirm"})]})]})}},1673:function(e,t,s){"use strict";s.d(t,{v:function(){return l}});var n=s(57437),a=s(35974),r=s(27648);let l=e=>{let{plan:t,className:s,link:l}=e;return!0===l?(0,n.jsx)(r.default,{href:"/settings/plans",className:s,children:(0,n.jsx)(a.C,{variant:"outline",children:t})}):(0,n.jsx)(a.C,{variant:"outline",className:s,children:t})}},94875:function(e,t,s){"use strict";s.d(t,{E:function(){return j}});var n=s(57437),a=s(2265),r=s(62869),l=s(57346),i=s(89651);let o=function(e){let{defaultValue:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{defaultValue:!1},[s,n]=(0,i.Z)(e,{defaultValue:t});return[s,n]};var c=s(46214),d=s(27648),u=s(94508),m=s(99376),h=s(25566),p=e=>{let{type:t,message:s,persistDismiss:i=!1,storageKey:p,bgColor:x,href:f,onClick:j,className:g,darkCloseIcon:v=!1}=e,b=(0,m.usePathname)(),y=(0,a.useRef)(null),[N,w]=o(p||"default-banner-key",{defaultValue:!0}),[_,C]=(0,a.useState)(!1),[E,S]=(0,a.useState)(!1);(0,a.useEffect)(()=>{S(!0),C(!0)},[]);let k=(null==b?void 0:b.startsWith("/projects/"))&&["ph-launch-banner","rebrand-banner"].includes(p||""),P=!k&&(i?N:_);if(k)return null;if(i&&!p)return console.error("storageKey is required when persistDismiss is true"),null;if(!P||h.env.TEST_E2E)return null;let A=(0,n.jsxs)("div",{ref:y,className:(0,u.cn)("z-[1050] hidden w-full items-center justify-between px-2 py-2 text-white transition-opacity duration-300 md:px-4",x||("error"===t?"bg-red-800":"bg-background"),g,E&&"flex"),children:[(0,n.jsx)("div",{className:"flex flex-grow items-center justify-center space-x-4 pr-6 md:text-center",children:s}),(0,n.jsx)(r.z,{variant:"ghost",size:"icon",className:(0,u.cn)("hover:bg-transparent md:absolute md:right-2",v?"text-primary-foreground hover:text-primary-foreground":"text-primary"),onClick:e=>{e.stopPropagation(),i?w(!1):C(!1),c.ZP.capture("banner_dismissed",{banner_type:t,message:s,persisted:i})},children:(0,n.jsx)(l.Z,{name:"close_small"})})]});return f?(0,n.jsx)(d.default,{href:f,target:"_blank",rel:"noopener noreferrer",onClick:j,className:"transition-opacity hover:opacity-90",children:A}):A},x=s(78099),f=s(5978);let j=e=>{let{className:t}=e,[s,r]=(0,a.useState)({showStatusBanner:!1,statusBannerContent:""});return((0,a.useEffect)(()=>{(async()=>{let e=(0,f.JU)(x.db,"system","info"),t=await (0,f.QT)(e);t.exists()&&r(t.data())})()},[]),s.showStatusBanner&&s.statusBannerContent)?(0,n.jsx)(p,{message:s.statusBannerContent,type:"error",className:t}):null}},29461:function(e,t,s){"use strict";s.d(t,{RootDialog:function(){return o},z:function(){return i}});var n=s(57437),a=s(26110),r=s(2265);let l=(0,s(59625).Ue)(e=>({openDialog:null,setOpenDialog:t=>{e({openDialog:t})}}));function i(e){let t=l(e=>e.setOpenDialog);return s=>{s?t({component:e,...s}):t(null)}}let o=()=>{let e=l(e=>e.openDialog),t=l(e=>e.setOpenDialog);if((0,r.useEffect)(()=>{if(e){var t,s;null===(s=e.dialogProps)||void 0===s||null===(t=s.onOpen)||void 0===t||t.call(s)}},[e]),!e)return null;let{component:s,dialogProps:i,childProps:o}=e;return(0,n.jsx)(a.Vq,{...i,open:!!e,onOpenChange:e=>{var s;e||t(null),null==i||null===(s=i.onOpenChange)||void 0===s||s.call(i,e)},children:(0,n.jsx)(s,{...o})})}},19573:function(e,t,s){"use strict";s.d(t,{q:function(){return u}});var n=s(57437),a=s(62869),r=s(33910),l=s(51817),i=s(75135),o=s(44895),c=s(94508),d=s(2265);let u=e=>{let{className:t}=e,{openConnectToGithubPopup:s}=(0,o.mA)(),{hasAccessToken:u,hasValidAccessToken:m,installationsQuery:h}=(0,r.D)(),[p,x]=(0,d.useState)(!1),[f,j]=(0,d.useState)(!1),[g,v]=(0,d.useState)(null);return(0,d.useEffect)(()=>{let e=e=>{"githubAppInstalled"===e.data&&(v(null),x(!0)),"githubAppAuthenticated"===e.data&&(v(Date.now()),h.refetch({cancelRefetch:!1}))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[h]),(0,d.useEffect)(()=>{p&&g&&h.dataUpdatedAt>g&&x(!1)},[p,h.dataUpdatedAt,g]),(0,n.jsxs)("div",{children:[(0,n.jsxs)(a.z,{variant:"outline",size:"sm",className:(0,c.cn)("gap-1.5",t),onClick:()=>{j(!0),s(u,m)},children:[(0,n.jsx)("span",{className:"inline-flex items-center justify-center",style:{width:"1.2em",height:"1.2em"},children:p?(0,n.jsx)(l.Z,{className:"animate-spin",size:"1.2em"}):(0,n.jsx)(i.Z,{size:"1.2em",className:"text-muted-foreground"})}),u?"Review GitHub permissions":"Connect to GitHub"]}),f&&!u&&!p&&(0,n.jsxs)("p",{className:"mt-2 text-sm text-muted-foreground",children:["Canâ€™t connect?"," ",(0,n.jsx)("span",{className:"cursor-pointer underline",onClick:()=>(0,o.yA)((0,o.Oq)()),children:"Re-authorize"})]})]})}},9476:function(e,t,s){"use strict";s.d(t,{o:function(){return d}});var n=s(14438),a=s(36710),r=s(49340),l=s(21288),i=s(21770),o=s(43577),c=s(99376);let d=e=>{let[t]=(0,r.a)(),s=(0,a.O)(),d=(0,c.useRouter)(),{mutate:u,isPending:m}=(0,i.D)({mutationFn:async e=>{let{projectId:t}=e,{project_id:n}=await s.post("/projects/".concat(t,"/remix"),{});return n},onMutate:()=>{var t;null==e||null===(t=e.onSubmit)||void 0===t||t.call(e)},onSuccess:(e,t)=>{let{chatMessage:s}=t;(0,n.Am)("Project remixed",{description:"We're taking you to the new project page"}),s&&localStorage.setItem("ChatInput-ChatMessage-".concat(e),s),d.push("/projects/".concat(e))},onError:(e,t)=>{let{projectId:s}=t;l.P.error("Error remixing project",{projectId:s,error:e}),e.status===o.WE.Unauthorized?n.Am.error("You have to be logged in to remix projects"):n.Am.error("Error remixing project",{description:"Please try again"})}});return{mutate:u,isPending:m&&!!t}}},61348:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return nV}});var n,a,r,l,i,o,c,d,u=s(57437),m=s(33145),h=s(55721),p=s(95670),x=s(49340),f=s(57346),j=e=>{let{handleSignOut:t}=e,[s,n,a]=(0,x.a)();return(0,u.jsxs)(h.h_,{children:[(0,u.jsx)(h.$F,{asChild:!0,children:(0,u.jsxs)("div",{className:"group flex shrink-0 items-center gap-0.5 duration-150 hover:opacity-75",children:[(0,u.jsx)(m.default,{alt:"",src:"/img/lovable-logo.svg",width:"20",height:"20"}),(0,u.jsx)(f.Z,{size:"small",name:"keyboard_arrow_down",className:"text-muted-foreground group-data-[state=open]:text-primary"})]})}),(0,u.jsxs)(h.AW,{className:"z-[1001] min-w-[200px] rounded-md border",alignOffset:2,collisionPadding:12,sideOffset:18,children:[(0,u.jsx)(p.Z,{title:"Go to Dashboard",iconName:"dashboard",internalHref:"/"},"dashboard"),(0,u.jsx)(h.VD,{}),s&&(0,u.jsx)(p.Z,{title:"Account Settings",iconName:"manage_accounts",internalHref:"/settings"},"account"),(0,u.jsx)(h.VD,{}),(0,u.jsx)(p.Z,{title:"Learn",iconName:"auto_stories",externalHref:"https://docs.lovable.dev"},"learn"),(0,u.jsx)(p.Z,{title:"Feedback",iconName:"forum",externalHref:"https://feedback.lovable.dev"},"feedback"),(0,u.jsx)(p.Z,{title:"Support",iconName:"support",internalHref:"/support"},"support"),(0,u.jsx)(h.VD,{}),s?(0,u.jsx)(p.Z,{title:"Log out",iconName:"move_item",onClick:t},"logout"):(0,u.jsx)(p.Z,{title:"Login",iconName:"move_item",internalHref:"/login"},"login")]})]})},g=s(19125),v=s(78099),b=s(21288),y=s(99376),N=s(2265),w=s(28667),_=s(44481),C=s(62869),E=s(94508);let S=(0,N.memo)(e=>{let{isSidebarOpen:t,toggleSidebar:s}=e;return(0,u.jsx)(C.z,{size:"icon-sm",variant:t?"muted":"ghost",onClick:s,className:(0,E.cn)("border",!t&&"border-transparent hover:bg-transparent md:hover:bg-accent"),children:(0,u.jsx)(f.Z,{name:t?"dock_to_right-fill":"dock_to_right"})})});S.displayName="SidebarToggle";var k=s(62449),P=s(26110),A=s(14438),I=s(5810),O=s(72384),R=s(49360),z=s(54188);let D=()=>{let e=(0,k.Eh)(e=>e.project),t=(0,I.DZ)(),[s,n]=(0,N.useState)(!1),a=(0,k.Eh)(e=>e.isSendChatMessageMutationPending),r=(0,k.Eh)(e=>e.shouldBlockActions()),l=null==e?void 0:e.available_project_migrations,[i,o]=(0,N.useState)(!(null==l?void 0:l.length));(0,N.useEffect)(()=>{(null==l?void 0:l.length)||o(!1),(null==l?void 0:l.length)&&!a&&o(!0)},[null==l?void 0:l.length,a]);let{mutateAsync:c,isPending:d}=(0,z.d)({projectId:t,finalRedirectUrl:void 0,onSuccess:async()=>{n(!1),A.Am.success("Project Updated")},onSubmit:()=>{n(!1)}}),m=async()=>{try{var s;await c({body:{id:(0,R.Z)(),message:"Please update the project template to the latest Lovable version to enable new features.",mode:O.S.INSTANT,contains_error:!1,project_migration_ids:null==e?void 0:null===(s=e.available_project_migrations)||void 0===s?void 0:s.map(e=>e.id)},projectId:t})}catch(e){b.P.error(e),A.Am.error("Error",{description:"There was an error sending the project update request."})}};return e&&i?(0,u.jsxs)(P.Vq,{open:s,onOpenChange:n,children:[(0,u.jsx)(P.hg,{asChild:!0,children:(0,u.jsxs)(C.z,{loading:d,variant:"accent",size:"sm",className:"flex items-center gap-2 lg:min-w-[125px]",onClick:()=>n(!0),children:[(0,u.jsx)(f.Z,{name:"info"}),(0,u.jsx)("span",{className:"hidden truncate md:inline",children:"Update Project"})]})}),(0,u.jsxs)(P.cZ,{children:[(0,u.jsx)(P.fK,{children:(0,u.jsx)(P.$N,{className:"text-xl font-semibold",children:"Project out of date"})}),(0,u.jsxs)(P.Be,{className:"max-h-[80vh] overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]",children:[l&&(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold",children:"Available Updates"}),(0,u.jsx)("ul",{className:"space-y-3",children:l.map((e,t)=>(0,u.jsxs)("li",{className:"border-l-2 border-primary/20 pl-4",children:[(0,u.jsx)("h4",{className:"font-medium",children:e.name}),(0,u.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:e.description})]},t))})]}),(0,u.jsx)("p",{className:"mt-4 text-sm",children:"The AI assistant will guide you through the necessary steps to complete the migration."})]}),(0,u.jsxs)(P.cN,{children:[(0,u.jsx)(C.z,{variant:"outline",onClick:()=>n(!1),children:"Close"}),(0,u.jsx)(C.z,{disabled:r,loading:d,onClick:m,children:"Update Project"})]})]})]}):null};var T=s(49027),Z=s(19060),L=s(15681),F=s(95186),U=s(36710),H=s(13590),M=s(21770),q=s(29501),V=s(31229);let G=V.z.object({newProjectName:V.z.string().min(1,"Project name is required").max(45,"Project name must be less than 45 characters").regex(/^[a-z0-9-]+$/,{message:"Project name can only contain lowercase letters, numbers, and hyphens."}).regex(/^(?!.*--).+$/,{message:"Project name cannot contain consecutive hyphens."}),renameRepository:V.z.boolean()}),B=e=>{let{project:t,onSuccess:s,showFormDirectly:n=!1}=e,a=(0,U.O)(),[r,l]=(0,N.useState)(n),i=(0,q.cI)({resolver:(0,H.F)(G),defaultValues:{newProjectName:(null==t?void 0:t.name)||"",renameRepository:!0}});(0,N.useEffect)(()=>{t&&i.reset({newProjectName:t.name||"",renameRepository:!0})},[t,i]);let o=(0,M.D)({mutationFn:async e=>{if(!(null==t?void 0:t.id))throw Error("Project ID is missing");let s={desired_name:e.newProjectName,rename_repository:e.renameRepository};return await a.post("/projects/".concat(t.id,"/rename"),s)},onSuccess:(e,t)=>{b.P.info("project_rename_success",{newProjectName:t.newProjectName}),A.Am.success("Success",{description:"Project renamed to ".concat(t.newProjectName)}),null==s||s()},onError:e=>{var t;b.P.error("project_rename_error",{error:e}),A.Am.error("Error",{description:(null===(t=e.data)||void 0===t?void 0:t.detail)||"An unexpected error occurred"})}});return r||n?(0,u.jsx)(L.l0,{...i,children:(0,u.jsxs)("form",{onSubmit:i.handleSubmit(e=>{b.P.info("project_rename_form_submitted",{data:e}),o.mutate(e)}),className:"space-y-4",children:[(0,u.jsx)(L.Wi,{control:i.control,name:"newProjectName",render:e=>{let{field:t}=e;return(0,u.jsxs)(L.xJ,{children:[(0,u.jsx)(L.lX,{children:"New Project Name"}),(0,u.jsx)(L.NI,{children:(0,u.jsx)(F.I,{placeholder:"Enter new project name",...t})}),(0,u.jsx)(L.zG,{})]})}}),(0,u.jsx)(L.Wi,{control:i.control,name:"renameRepository",render:e=>{let{field:t}=e;return(0,u.jsxs)(L.xJ,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,u.jsx)(L.NI,{children:(0,u.jsx)(Z.X,{checked:t.value,onCheckedChange:t.onChange})}),(0,u.jsx)("div",{className:"space-y-1 leading-none",children:(0,u.jsx)(L.lX,{children:"Also rename repository"})})]})}}),(0,u.jsx)(C.z,{type:"submit",disabled:!i.formState.isDirty||o.isPending,loading:o.isPending,children:"Rename Project"})]})}):(0,u.jsx)(C.z,{size:"sm",onClick:()=>l(!0),children:"Rename Project"})};var Y=s(25134),W=s(29550),K=s(27648);let J=e=>{let{username:t}=e;return(0,u.jsxs)("span",{className:"text-xs leading-normal text-muted-foreground",children:["Anyone can view and remix from"," ",(0,u.jsx)(K.default,{className:"underline",href:t?"/@".concat(t):"/settings",target:"_blank",children:"your profile"}),"."]})},$=e=>{var t;let{className:s}=e,{userData:n}=(0,Y.v)(),a=(0,k.Eh)(e=>e.project),r=null==a?void 0:a.id,l=(0,U.O)(),i=null!==(t=null==a?void 0:a.visibility)&&void 0!==t?t:void 0,[o,c]=(0,N.useState)(i);(0,N.useEffect)(()=>{c(i)},[i]);let{mutate:d,isPending:m}=(0,M.D)({mutationFn:e=>l.put("/projects/".concat(r,"/visibility"),{visibility:e}),onSuccess:(e,t)=>{(0,A.Am)("Visibility updated",{description:"Your project is now ".concat(t)})},onError:()=>{A.Am.error("Failed to update visibility"),c(i)}});return(0,u.jsx)(W.F,{className:(0,E.cn)("flex flex-col gap-3",s),visibility:o,setVisibility:e=>{c(e),d(e)},disabled:m,customPublicDescription:(0,u.jsx)(J,{username:null==n?void 0:n.username})})};var Q=s(93022);let X=(0,N.memo)(function(e){let{project:t}=e,s=(0,k.Eh)(e=>e.setIsRemixDialogOpen),n=(0,k.Eh)(e=>e.userProjectPermissions),a=!!(null==t?void 0:t.is_supabase_enabled)||!!(null==t?void 0:t.supabase_project_config),r=n.edit||!a,[l,i]=(0,N.useState)(!1),o=(0,N.useCallback)(()=>{i(!0)},[]),c=(0,N.useCallback)(()=>{i(!1)},[]),d=(0,N.useCallback)(()=>{s(!0)},[s]);return(0,u.jsxs)("div",{children:[(0,u.jsxs)(h.h_,{children:[(0,u.jsx)(h.$F,{asChild:!0,children:(0,u.jsxs)(C.z,{variant:"ghost",className:"flex max-w-[400px] items-center justify-between",children:[(0,u.jsx)(f.Z,{size:"small",name:"private"===t.visibility?"lock":"globe",className:"text-muted-foreground"}),(null==t?void 0:t.name)?(0,u.jsx)("span",{className:"truncate",children:t.name}):(0,u.jsx)(Q.O,{className:"h-4 w-[150px]"}),(0,u.jsx)(f.Z,{name:"keyboard_arrow_down",className:"flex-shrink-0"})]})}),(0,u.jsxs)(h.AW,{className:"z-[1001] min-w-[200px] max-w-[250px] rounded-md border border-border bg-background bg-popover p-4",alignOffset:2,collisionPadding:8,sideOffset:18,children:[(0,u.jsx)("h3",{children:"Visibility"}),(0,u.jsx)($,{className:"mt-2"}),(0,u.jsx)(h.VD,{className:"my-4"}),(0,u.jsx)(h.Xi,{onClick:o,className:"flex cursor-pointer items-center hover:bg-accent hover:text-accent-foreground",children:"Rename project"}),(0,u.jsxs)(h.Xi,{onClick:d,className:"flex cursor-pointer items-center hover:bg-accent hover:text-accent-foreground",disabled:!r,children:["Remix project",!r&&(0,u.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Unavailable for Supabase projects)"})]})]})]}),(0,u.jsx)(P.Vq,{open:l,onOpenChange:i,children:(0,u.jsxs)(P.cZ,{children:[(0,u.jsx)(P.fK,{children:(0,u.jsx)(T.$N,{children:"Rename Project"})}),(0,u.jsx)(B,{project:t,onSuccess:c,showFormDirectly:!0})]})})]})});var ee=s(58912),et=s.n(ee),es=s(22048),en=s(8098),ea=s(68687),er=s(4310),el=s(35974),ei=s(14970),eo=s(24089),ec=e=>{let{domain:t,showRemove:s,refetchDomains:n}=e,a=(0,eo.D)(),[r,l]=(0,N.useState)(!1),[i,o]=(0,N.useState)(!1),c=(0,k.Eh)(e=>e.project),d=async e=>{o(!0),await a.delete("/projects/".concat(null==c?void 0:c.id,"/domains/").concat(e)),null==n||n(),o(!1),l(!1)};return(0,u.jsxs)("li",{className:"mt-2 flex items-center",children:["active"!==t.status?(0,u.jsxs)("span",{className:"flex-grow text-gray-400",title:"Domain is still be configured...",children:[t.domain,(0,u.jsxs)("span",{className:"relative ml-2 inline-flex size-2",children:[(0,u.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-gray-100 opacity-75"}),(0,u.jsx)("span",{className:"relative inline-flex size-2 rounded-full bg-gray-100"})]})]}):(0,u.jsx)("span",{className:"flex-grow",children:t.domain}),s&&(0,u.jsxs)(P.Vq,{open:r,onOpenChange:l,children:[(0,u.jsx)(P.hg,{asChild:!0,children:(0,u.jsx)(C.z,{variant:"outline",size:"sm",type:"button",className:"mr-2 h-6 whitespace-nowrap",children:"Remove"})}),(0,u.jsxs)(P.cZ,{children:[(0,u.jsxs)(P.fK,{children:[(0,u.jsxs)(P.$N,{children:["Remove ",t.domain,"?"]}),(0,u.jsx)(P.Be,{children:"This will disconnect the domain from this project. You will need to reconfigure it if you will want to use it with this project in the future."})]}),(0,u.jsxs)(P.cN,{className:"gap-1.5",children:[(0,u.jsx)(C.z,{variant:"outline",size:"sm",onClick:()=>{l(!1)},children:"Cancel"}),(0,u.jsx)(C.z,{variant:"destructive",size:"sm",onClick:()=>{d(t.domain)},loading:i,children:"Remove"})]})]})]}),(0,u.jsx)("a",{href:"https://".concat(t.domain),target:"_blank",rel:"noopener noreferrer",children:(0,u.jsx)(ei.Z,{size:16})})]})},ed=s(74225),eu=s(66070),em=s(85238),eh=s(81103);let ep=()=>{let[e,t]=(0,x.a)(),{userData:s,isInitialized:n}=(0,Y.v)(),a=(0,k.Eh)(e=>e.project),r=(0,k.Eh)(e=>e.isProjectCollaborator),l=(0,k.Eh)(e=>e.setUserProjectPermissions),i=(0,N.useMemo)(()=>{if(t||!a||!s)return null;let n=(null==a?void 0:a.user_id)===(null==e?void 0:e.uid)||(null==s?void 0:s.is_admin)||(null==a?void 0:a.user_id)==="claimable";return{admin:n,edit:n||r}},[a,e,r,s,t]);return(0,N.useEffect)(()=>{i&&l(i)},[i,l]),i};var ex=s(13781),ef=s(40875),ej=s(75135),eg=s(95106),ev=s(49968),eb=s(39484),ey=s(1828);let eN=e=>{let{projectId:t}=e,[s,n]=(0,N.useState)(!1),[a,r]=(0,N.useState)(!1),l=(0,U.O)(),{userData:i,isInitialized:o}=(0,Y.v)(),c=i&&"free"!==i.plan;(0,N.useEffect)(()=>{(async()=>{try{let e=await l.get("/projects/".concat(t,"/badge/visibility"));n(e.hide_badge)}catch(e){console.error("Failed to fetch badge visibility:",e)}finally{r(!1)}})()},[t,l]);let d=async()=>{if(c){r(!0);try{await l.post("/projects/".concat(t,"/badge/visibility"),{hide_badge:!s}),n(!s),(0,A.Am)("Badge visibility updated",{description:s?"Badge is now visible":"Badge is now hidden"})}catch(e){A.Am.error("Error",{description:"Failed to update badge visibility"})}finally{r(!1)}}};return(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)(ey.r,{checked:s,onCheckedChange:d,disabled:!c||a}),(0,u.jsx)("div",{className:"text-sm font-medium",children:"Hide Badge"}),a&&(0,u.jsx)(eb.T,{text:"",className:"my-0"})]})};var ew=s(29827),e_=s(16593),eC=s(27312);function eE(e){let{projectId:t,onClose:s}=e,[n,a]=(0,N.useState)(""),r=(0,U.O)(),l=(0,ew.NL)(),i=(0,k.Eh)(e=>{var t;return(null===(t=e.project)||void 0===t?void 0:t.main_branch)||"main"}),o=(0,M.D)({mutationFn:async e=>{await r.post("/projects/".concat(t,"/branches/switch"),{branch_name:e,base_branch:i})},onSuccess:(e,n)=>{l.invalidateQueries({queryKey:["branches",t]}),A.Am.success("Lovable is now using branch: ".concat(n)),a(""),s(),d&&d.length>=1e3&&A.Am.warning("Warning: You have a lot of branches. We have a limit (~1000) on how many we show here.")},onError:e=>{A.Am.error("Failed to switch branch. Please try again.")}}),c=e=>o.mutate(e),{data:d,isPending:m,error:h}=(0,e_.a)({queryKey:["branches",t],queryFn:async()=>r.get("/projects/".concat(t,"/branches"))}),p=(null==d?void 0:d.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())))||[],x=[...p.filter(e=>e.name===i),...p.filter(e=>e.name!==i)];return(0,u.jsxs)("div",{className:"relative flex flex-col gap-3 p-4",children:[(0,u.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,u.jsx)("h4",{children:"Switch or create branch"}),(0,u.jsx)(eC.xp,{className:"absolute right-2 top-2",asChild:!0,children:(0,u.jsx)(C.z,{variant:"ghost",size:"icon-sm",children:(0,u.jsx)(f.Z,{name:"close",size:"small"})})})]}),(0,u.jsx)("div",{children:m?(0,u.jsx)(eb.T,{className:"pb-4",text:"Loading branches from GitHub..."}):h?(0,u.jsx)("div",{className:"pb-4 text-destructive",children:"Error loading branches from GitHub"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"",children:(0,u.jsx)(F.I,{type:"text",placeholder:"Find or create a branch...",value:n,onChange:e=>a(e.target.value)})}),(0,u.jsxs)("div",{className:"branches-list flex max-h-[40vh] flex-col gap-2 overflow-y-auto pt-2",children:[x.map(e=>(0,u.jsxs)(C.z,{className:"branch-item flex w-full items-center justify-between px-3 text-left",onClick:()=>c(e.name),variant:e.name===i?"default":"ghost",disabled:o.isPending||e.name===i,loading:o.isPending&&o.variables===e.name,children:[(0,u.jsx)("span",{children:o.isPending&&o.variables===e.name?"Switching to "+e.name:e.name}),e.name===i&&(0,u.jsx)(f.Z,{name:"check"})]},e.name)),n&&!p.some(e=>e.name===n)&&(0,u.jsxs)(C.z,{className:(0,E.cn)("h-auto w-full items-center justify-start py-1.5"),onClick:()=>c(n),variant:"outline",disabled:o.isPending,loading:o.isPending,children:[(0,u.jsx)(f.Z,{name:"add"}),(0,u.jsxs)("p",{className:"text-wrap text-left",children:["Create branch ",(0,u.jsx)("strong",{children:n})," from"," ",(0,u.jsx)("strong",{children:i})]})]})]})]})})]})}var eS=s(72918),ek=s(12339),eP=s(6478),eA=s(20653),eI=s(44895),eO=s(33910),eR=s(46366),ez=()=>{var e;let t=(0,eR.c)(),s=(0,k.Eh)(e=>e.project);if(!t||(null==s?void 0:s.git_on_s3))return null;let n="https://github.com/".concat(null==s?void 0:null===(e=s.github_owner)||void 0===e?void 0:e.name,"/").concat(null==s?void 0:s.github_repo_name);return(0,u.jsxs)("a",{className:(0,E.cn)((0,C.d)({variant:"outline",size:"sm"}),"gap-1.5"),href:n,target:"_blank",children:[(0,u.jsx)(f.Z,{name:"open_in_new",size:"small"}),"Admin: Open in Github"]})},eD=s(19573),eT=s(16831),eZ=s(51948);let eL=e=>{let{installations:t,newTransferTarget:s,startTransfer:n}=e,{installationsQuery:a}=(0,eO.D)(),[r,l]=(0,N.useState)(!1),i=(0,N.useRef)(null);return(0,N.useEffect)(()=>{let e=e=>{"githubAppInstalled"===e.data&&(i.current=Date.now(),a.refetch(),l(!0))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[a]),(0,N.useEffect)(()=>{r&&i.current&&a.dataUpdatedAt>i.current&&l(!1)},[a.dataUpdatedAt,r]),(0,u.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,u.jsx)("p",{className:"text-sm font-medium",children:"Create in"}),t.map(e=>(0,u.jsx)("div",{className:"rounded-md border bg-background p-2 hover:bg-muted",onClick:()=>!s&&n(e.account.login),children:(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[s===e.account.login?(0,u.jsx)(f.Z,{name:"progress_activity",size:"small",className:"animate-spin"}):(0,u.jsx)(eT.qE,{className:"h-4 w-4",children:(0,u.jsx)(eT.F$,{src:e.account.avatar_url})}),(0,u.jsx)("p",{className:"text-sm font-medium",children:e.account.login})]})},e.account.login)),r&&(0,u.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[(0,u.jsx)(f.Z,{name:"progress_activity",size:"small",className:"animate-spin"}),(0,u.jsx)("p",{className:"text-sm font-medium",children:"Loading new account..."})]}),(0,u.jsxs)("div",{className:"-mx-2 flex select-none items-center justify-between rounded-sm p-2 hover:bg-muted",onClick:()=>{(0,eI.yA)("https://github.com/apps/".concat(eZ.F,"/installations/new"))},children:[(0,u.jsx)(ej.Z,{size:"1.2em",className:"text-muted-foreground"}),(0,u.jsx)("p",{className:"text-sm font-medium",children:t.some(e=>"User"===e.target_type)?"Add another organization":"Add another account"}),(0,u.jsx)(f.Z,{name:"open_in_new",size:"small",className:"text-muted-foreground"})]})]})},eF=(e,t)=>({title:"A GitHub Repository is now under your account ".concat(t),options:{description:(0,u.jsx)("a",{target:"_blank",href:(0,er.c_)(e,t),children:(0,er.c_)(e,t)})}}),eU=e=>{let{projectId:t,className:s}=e,n=(0,U.O)(),[a,r]=(0,N.useState)(void 0),{installations:l,hasValidAccessToken:i,hasAccessToken:o}=(0,eO.D)(),{openConnectToGithubPopup:c}=(0,eI.mA)(),[d,m]=(0,N.useState)(!1),h=async e=>{if(r(e),e){var s,a,d,u;try{let a=null==l?void 0:null===(s=l.find(t=>t.account.login===e))||void 0===s?void 0:s.target_type;if(!a)throw Error("Owner type not found");let r=await n.post("/projects/".concat(t,"/github/transfer"),{new_owner:{name:e,type:a}}),{title:i,options:o}=eF(r.new_repo_name,e);(0,A.Am)(i,o)}catch(e){if(401===e.status){c(o,i);return}b.P.error("error_transfering_project",{error:e,detail:null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.detail}),A.Am.error("Error",{description:null!==(u=null==e?void 0:null===(d=e.data)||void 0===d?void 0:d.detail)&&void 0!==u?u:"Something went wrong"})}}r(void 0)};return(0,u.jsxs)("div",{className:(0,E.cn)("flex w-full flex-col items-start gap-2",s),children:[(0,u.jsx)(ez,{projectId:t}),(0,u.jsxs)("p",{className:"pb-2 text-sm text-muted-foreground",children:["Transfer this repository to your GitHub to collaborate and edit your code."," "]}),(0,u.jsx)("p",{className:"pb-2 text-sm text-muted-foreground",children:"We don't keep a copy â€” handle your repository carefully to avoid losing your work."}),void 0===l?(0,u.jsx)(Q.O,{className:"mb-4 h-7 w-full px-2 py-1"}):(0,u.jsx)(u.Fragment,{children:i&&l.length>0?d?(0,u.jsx)(eL,{installations:l,newTransferTarget:a,startTransfer:h}):(0,u.jsxs)(C.z,{variant:"outline",size:"sm",className:(0,E.cn)("gap-1.5",s),onClick:()=>{m(!0)},children:[(0,u.jsx)(eA.wGg,{className:"size-4 text-muted-foreground"}),"Transfer repository"]}):(0,u.jsx)(eD.q,{})})]})};var eH=()=>{var e,t,s,n,a,r;let l=(0,k.Eh)(e=>e.project),i=(null==l?void 0:l.name)?(0,er.c_)(l.github_repo_name,null==l?void 0:null===(e=l.github_owner)||void 0===e?void 0:e.name):"#",o=(null==l?void 0:null===(t=l.github_owner)||void 0===t?void 0:t.name)+"/"+(null==l?void 0:l.github_repo_name);return(0,u.jsxs)(h.h_,{children:[(0,u.jsxs)(eh.u,{children:[(0,u.jsx)(eh.aJ,{asChild:!0,children:(0,u.jsx)(h.$F,{asChild:!0,children:(0,u.jsxs)(C.z,{variant:"muted",size:"sm",className:"gap-1.5",children:[(0,u.jsx)(eA.wGg,{className:"size-4"}),(0,u.jsx)("span",{className:"hidden md:flex",children:"GitHub"})]})})}),(0,u.jsx)(eh._v,{children:"Source Code on GitHub"})]}),(0,u.jsxs)(h.AW,{className:"z-[1001] min-w-[200px] max-w-[250px] rounded-md border border-border bg-background p-4",alignOffset:2,collisionPadding:8,sideOffset:18,onCloseAutoFocus:e=>e.preventDefault(),children:[(0,u.jsx)("h3",{className:"mt-0 pb-1",children:"GitHub"}),(null==l?void 0:null===(s=l.github_owner)||void 0===s?void 0:s.name)&&!(l.github_owner.name!==er.aR)?(0,u.jsx)(eU,{projectId:null==l?void 0:l.id,projectName:null==l?void 0:l.github_repo_name}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("p",{className:"pb-2 text-sm text-muted-foreground",children:["This project is connected to"," ",(null==l?void 0:null===(n=l.github_owner)||void 0===n?void 0:n.name)&&(null==l?void 0:l.github_repo_name)?(0,u.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:(0,u.jsxs)("b",{children:[null==l?void 0:null===(a=l.github_owner)||void 0===a?void 0:a.name,"/",null==l?void 0:l.github_repo_name]})}):"GitHub",". Lovable will commit changes to the"," ",(0,u.jsx)("b",{children:(null==l?void 0:l.main_branch)||"main"})," branch."]}),(0,u.jsx)("h4",{className:"pt-2",children:"Clone"}),(0,u.jsxs)(ek.mQ,{defaultValue:"https",className:"w-full pb-2",children:[(0,u.jsxs)(ek.dr,{className:"gap-2 px-0 pb-0 pt-0",children:[(0,u.jsx)(eM,{value:"https",label:"HTTPS"}),(0,u.jsx)(eM,{value:"ssh",label:"SSH"}),(null==l?void 0:l.is_github)&&(0,u.jsx)(eM,{value:"githubcli",label:"GitHub CLI"})]}),(0,u.jsx)(ek.nU,{value:"https",className:"mt-0",children:(0,u.jsx)(eq,{url:"".concat(i,".git")})}),(0,u.jsx)(ek.nU,{value:"ssh",className:"mt-0",children:(0,u.jsx)(eq,{url:"git@github.com:".concat(o,".git")})}),(0,u.jsx)(ek.nU,{value:"githubcli",className:"mt-0",children:(0,u.jsx)(eq,{url:"gh repo clone ".concat(o)})})]}),(0,u.jsx)(h.VD,{className:"mx-0"}),(0,u.jsx)(p.Z,{externalHref:"https://github.dev/".concat(o,"?").concat((null==l?void 0:l.main_branch)?"tree/".concat(null==l?void 0:l.main_branch):""),title:"Edit in VS Code",className:"-mx-2"},"vscode")]}),(null==l?void 0:null===(r=l.github_owner)||void 0===r?void 0:r.name)!==er.aR&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(h.VD,{className:"mx-0"}),(0,u.jsx)(p.Z,{className:"-mx-2 -mb-2",externalHref:i,title:"View on GitHub"},"github")]})]})]})};let eM=e=>{let{label:t,value:s}=e;return(0,u.jsx)(ek.SP,{className:"rounded-none border-b border-transparent px-0 py-0.5 text-xs data-[state=active]:border-b-border data-[state=active]:font-medium",value:s,children:t})},eq=e=>{let{url:t}=e,s=N.forwardRef((e,t)=>(0,u.jsx)(C.z,{ref:t,...e,variant:"ghost",className:"-mr-2 h-8 text-accent hover:text-primary",children:(0,u.jsx)(f.Z,{name:"content_copy",className:"h-4 w-4"})}));s.displayName="TriggerComponent";let n=(0,eP.F)()({TriggerComponent:s,textToCopy:t});return(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)(F.I,{className:"h-8 flex-1 p-2 font-mono text-xs text-muted-foreground focus:text-primary",value:t,onFocus:e=>e.target.select(),readOnly:!0}),(0,u.jsx)(eh.pn,{children:(0,u.jsxs)(eh.u,{children:[(0,u.jsx)(eh.aJ,{children:n}),(0,u.jsx)(eh._v,{children:"Copy url to clipboard"})]})})]})},eV=e=>{var t,s,n,a,r;let{project:l}=e,[i,o]=(0,N.useState)(!1),[c,d]=(0,N.useState)(!1),[m,h]=(0,N.useState)(null),p=(0,y.useRouter)(),x=(0,U.O)(),f=(0,k.Eh)(e=>e.setProjectBeingDeleted),j=async()=>{var e,t;try{d(!0),f(!0),(await x.delete("/projects/".concat(l.id))).deleting_repo?((0,A.Am)("Project deleted",{description:"Your project has been deleted."}),p.replace("/")):p.replace("/?deleted=true&projectName=".concat(l.github_repo_name,"&githubOwner=").concat(null===(e=l.github_owner)||void 0===e?void 0:e.name)),h(null)}catch(e){h((null===(t=e.data)||void 0===t?void 0:t.detail)||"Something went wrong"),f(!1)}finally{d(!1)}};return(0,u.jsxs)(P.Vq,{open:i,onOpenChange:o,children:[(0,u.jsx)(P.hg,{asChild:!0,children:(0,u.jsx)(C.z,{size:"sm",variant:"destructive",className:"gap-1.5",children:"Delete Project"})}),(0,u.jsxs)(P.cZ,{children:[(0,u.jsxs)(P.fK,{children:[(0,u.jsxs)(P.$N,{children:["Delete ",l.name,"?"]}),(0,u.jsxs)(P.Be,{children:["This action cannot be undone. This will permanently delete your project. Including:",(0,u.jsxs)("ul",{className:"my-2 list-disc pl-5",children:[(0,u.jsx)("li",{children:"Any deployments made with Lovable"}),(0,u.jsx)("li",{children:"All preview links"}),(null==l?void 0:null===(t=l.github_owner)||void 0===t?void 0:t.name)&&!(l.github_owner.name!==er.aR)&&(0,u.jsx)("li",{children:"All generated code"})]}),(null==l?void 0:null===(s=l.github_owner)||void 0===s?void 0:s.name)&&l.github_owner.name!==er.aR&&(0,u.jsxs)("p",{className:"mt-2",children:["Note: The Github repository"," ",(0,u.jsx)("a",{href:null!==(r=(0,er.c_)(l.github_repo_name,null==l?void 0:null===(n=l.github_owner)||void 0===n?void 0:n.name))&&void 0!==r?r:"#",target:"_blank",rel:"noreferrer",className:"text-accent hover:underline",children:(0,u.jsxs)("b",{children:[null==l?void 0:null===(a=l.github_owner)||void 0===a?void 0:a.name,"/",null==l?void 0:l.github_repo_name]})})," ","will not be deleted."]})]})]}),(0,u.jsxs)(P.cN,{className:"gap-1.5",children:[(0,u.jsx)(C.z,{variant:"outline",size:"sm",onClick:()=>{o(!1),h(null)},children:"Cancel"}),(0,u.jsx)(C.z,{variant:"destructive",size:"sm",onClick:()=>{j()},loading:c,children:"Delete"})]}),m&&(0,u.jsx)("p",{className:"text-destructive",children:m})]})]})};var eG=s(26815);let eB=e=>{let{projectId:t,initialFeatured:s}=e,[n,a]=N.useState(s),r=(0,U.O)(),l=async e=>{try{await r.put("/projects/".concat(t,"/featured"),{featured:e}),a(e),(0,A.Am)("Featured status updated",{description:"Project is now ".concat(e?"featured":"not featured",".")})}catch(e){b.P.error("error_updating_featured_status",{error:e}),A.Am.error("Error",{description:"Failed to update featured status. Please try again."})}};return(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)(ey.r,{id:"featured-toggle",checked:n,onCheckedChange:l}),(0,u.jsx)(eG._,{htmlFor:"featured-toggle",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Featured Project"})]})},eY=e=>{let{projectId:t}=e,s=(0,U.O)(),n=(0,e_.a)({queryKey:["project-config",t],queryFn:()=>s.get("/projects/".concat(t,"/config"))});return{config:n.data,query:n}},eW=e=>{let{projectId:t}=e,s=(0,U.O)(),n=(0,ew.NL)();return(0,M.D)({mutationFn:e=>{let{integration:n,remove:a=!1}=e;return s.patch("/projects/".concat(t,"/config/integration"),{integration:n,remove:a})},onSettled(e,s,a,r){if(n.invalidateQueries({queryKey:["project-config",t]}),s){var l;A.Am.error("Integration Error",{description:(null===(l=s.data)||void 0===l?void 0:l.detail)||"Something went wrong"})}}})};var eK=s(76818),eJ=s(62319),e$=s(76451),eQ=s(59625);let eX=(0,eQ.Ue)(e=>({isSupabaseIntegrationOngoing:!1,setSupabaseIntegrationOngoing:t=>e({isSupabaseIntegrationOngoing:t})}));function e0(e){let{projectId:t,integration:s,item:n=e2}=e,a=eW({projectId:t}),r=["sendChatMessage",t,"integration-card"],l=(0,z.d)({projectId:t,finalRedirectUrl:"/projects/"+t+"/improve",mutationKey:r}),i=eX(e=>e.isSupabaseIntegrationOngoing),o=eX(e=>e.setSupabaseIntegrationOngoing),c=(0,e$.B)({mutationKey:r}),d=!!(null==s?void 0:s.slug),m=(0,N.useMemo)(()=>e4(s,n),[s,n]),[h,p]=(0,N.useState)(e4(s,n)),x=(0,N.useMemo)(()=>!e3(s||m,h),[h,s,m]),f=a.isPending||l.isPending||c>0||i,[j,g]=(0,N.useState)(!1);(0,N.useEffect)(()=>{a.isPending||g(!1)},[a.isPending]);let v=(0,k.Eh)(e=>e.isSendChatMessageMutationPending),b=f?"Pending":d?"Connected":"Draft",y=async function(){let{remove:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&g(!0),o(!0);try{let t=await a.mutateAsync({integration:h,remove:e});t?await l.mutateAsync({body:{id:(0,R.Z)(),message:t,tags:["supabase-integration-update"]}}):(0,A.Am)("Supabase schema already up to date")}catch(e){throw e}finally{o(!1)}},w=(0,N.useMemo)(()=>n.isRequiredFilled(h),[n,h]),_=(e,t)=>{"Enter"===t.key&&w&&y()},E=(e,t)=>{p(s=>({...s,parameters:{...s.parameters,[e.key]:t.target.value}}))},S=n.fields?V.Ry(n.fields.reduce((e,t)=>(e[t.key]=t.validation?t.validation:V.Z_().optional(),e),{})):V.IM(V.Yj()),P=(0,q.cI)({resolver:(0,H.F)(S)});return(0,u.jsxs)(eu.Zb,{className:"w-full",children:[(0,u.jsxs)(eu.Ol,{children:[(0,u.jsxs)(eu.ll,{children:[(null==s?void 0:s.title)||n.title,(null==s?void 0:s.slug)?(0,u.jsxs)("span",{className:"ml-1 text-xs opacity-50",children:[" ","- ",null==s?void 0:s.slug]}):null]}),(0,u.jsx)(eu.SZ,{children:(null==s?void 0:s.description)||n.description})]}),n.fields?(0,u.jsx)(eu.aY,{children:(0,u.jsx)(L.l0,{...P,children:(0,u.jsxs)("form",{onSubmit:P.handleSubmit(()=>h&&y()),className:"space-y-6",children:[n.fields.map(e=>{var t;return(0,u.jsx)(L.Wi,{name:e.key,control:P.control,defaultValue:(null===(t=h.parameters)||void 0===t?void 0:t[e.key])||"",render:t=>{let{field:s}=t;return(0,u.jsxs)(L.xJ,{children:[(0,u.jsx)(L.lX,{className:"text-base",children:e.title}),(0,u.jsx)(L.NI,{children:(0,u.jsx)(F.I,{disabled:f,type:e.type,...s,onChange:t=>{E(e,t),s.onChange(t)},autoComplete:"off",className:"mr-4 mt-1 flex-grow",placeholder:e.placeholder,onKeyDown:t=>_(e,t)})}),(0,u.jsx)(L.zG,{})]})}},e.key)}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,u.jsxs)(C.z,{variant:"outline",size:"sm",type:"button",disabled:!0,hidden:!d,className:"min-w-[110px] shrink-0 disabled:opacity-100",children:[(0,u.jsx)(eJ.Z,{strokeWidth:6,className:"-ml-2",color:"Connected"===b?"green":"orange"})," ",b]}),(0,u.jsx)(C.z,{size:"sm",type:"submit",disabled:!w||f||v,loading:f&&!j,className:"mr-2",children:d?x?"Update":"Refresh":"Integrate"}),v&&!f&&w&&(0,u.jsx)("span",{className:"text-xs opacity-60",children:"(waiting for chat message to finish)"})]})]})})}):(0,u.jsx)(e1,{integration:s,isLoading:f}),!n.fields&&(0,u.jsx)("fieldset",{disabled:f,children:(0,u.jsxs)(eu.eW,{className:"space-x-2 p-0",children:[(0,u.jsxs)(C.z,{variant:"outline",size:"sm",disabled:!0,hidden:!d,children:[(0,u.jsx)(eJ.Z,{strokeWidth:6,className:"-ml-2 min-w-[110px]",color:"Connected"===b?"green":"orange"})," ",b]}),(0,u.jsx)(C.z,{variant:"outline",size:"sm",onClick:()=>h&&y({remove:!0}),hidden:!d,loading:f&&j,children:"Remove"}),(0,u.jsx)(C.z,{size:"sm",onClick:()=>y(),disabled:!w,className:"px-8",loading:f&&!j,children:d?x?"Update":"Refresh":"Integrate"})]})})]})}function e1(e){let{integration:t,isLoading:s}=e;return(0,u.jsxs)(eu.aY,{children:[(0,u.jsx)("form",{children:(0,u.jsx)("fieldset",{disabled:s,children:(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("label",{className:"text-base",children:"Input Prompt"}),(0,u.jsx)(eK.g,{className:"mt-1",placeholder:"...",defaultValue:null==t?void 0:t.input_prompt})]})})}),(0,u.jsx)("form",{className:"opacity-60",children:(0,u.jsxs)("fieldset",{disabled:s,children:[(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("label",{className:"text-base",children:"Resources"}),[...(null==t?void 0:t.resources)||[],{id:"",url:"",path:"",error:""}].map(e=>(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsxs)("div",{className:"flex flex-row space-x-1",children:[(0,u.jsx)(F.I,{type:"text",className:"mt-1 w-1/3",placeholder:"id",defaultValue:e.id}),(0,u.jsx)(F.I,{type:"text",className:"mt-1 flex-grow",placeholder:"url",defaultValue:e.url})]}),(0,u.jsx)(F.I,{type:"text",className:"mt-1 flex-grow",placeholder:"path",defaultValue:e.path}),e.error?(0,u.jsx)("span",{className:"text-xs text-destructive opacity-80",children:e.error}):null]},e.id))]}),(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("label",{className:"text-base",children:"Parameters"}),[...Object.entries((null==t?void 0:t.parameters)||{}),["",""]].map(e=>{let[t,s]=e;return(0,u.jsxs)("div",{className:"mb-2 flex flex-row space-x-1",children:[(0,u.jsx)(F.I,{type:"text",className:"w-1/3",placeholder:"KEY",defaultValue:t}),(0,u.jsx)(F.I,{type:"text",className:"",placeholder:"value",defaultValue:s})]},t)})]}),(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("label",{className:"text-base",children:"Context Prompt"}),(0,u.jsx)(eK.g,{className:"mt-1",placeholder:"...",defaultValue:null==t?void 0:t.context_prompt})]})]})})]})}let e2={slug:null,isRequiredFilled:e=>!!e.input_prompt,title:"New Integration",description:(0,u.jsx)(u.Fragment,{children:"Enter the required details, like (public) API keys, endpoint, and usage details, in the input prompt. We have special support for OpenAPI specs URLs, which are often generated automatically in modern backend frameworks."})},e4=(e,t)=>({slug:(null==e?void 0:e.slug)||(null==t?void 0:t.slug)||"",title:(null==e?void 0:e.title)||"",description:(null==e?void 0:e.description)||"",resources:((null==e?void 0:e.resources)||[]).map(e=>({...e})),parameters:{...(null==e?void 0:e.parameters)||{}},context_prompt:(null==e?void 0:e.context_prompt)||"",input_prompt:(null==e?void 0:e.input_prompt)||""}),e5=e=>!e||"object"==typeof e&&(Array.isArray(e)?0===e.length:0===Object.keys(e).length),e3=(e,t)=>{if(e5(e)&&e5(t))return!0;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return e===t;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!e3(e[s],t[s]))return!1;return!0}let s=Object.keys(Object.fromEntries([...Object.keys(e),...Object.keys(t)].map(e=>[e,1])));for(let n=0;n<s.length;n++){let a=s[n];if(!e3(e[a],t[a]))return!1}return!0};var e6=s(46214);let e7=(0,eQ.Ue)(e=>({isInstantDBIntegrationOngoing:!1,setInstantDBIntegrationOngoing:t=>e({isInstantDBIntegrationOngoing:t})})),e8=e=>{let{project:t}=e,s=t.id,n=V.z.object({appId:V.z.string().uuid()}),a=t.instant_db_app_id,r=(0,q.cI)({resolver:(0,H.F)(n),defaultValues:{appId:null!=a?a:""}}),l=eW({projectId:s}),i=["sendChatMessage",s,"integration-card","instant-db"],o=(0,z.d)({projectId:s,finalRedirectUrl:"/projects/"+s+"/improve",mutationKey:i}),{isInstantDBIntegrationOngoing:c,setInstantDBIntegrationOngoing:d}=e7(),m=async()=>{try{d(!0);let e=await l.mutateAsync({remove:!0,integration:{slug:"instant_db"}});await o.mutateAsync({body:{message:e,id:(0,R.Z)(),tags:["instant-db-integration-update"]}})}catch(e){throw e}finally{d(!1)}},h=async e=>{try{d(!0);let t=await l.mutateAsync({integration:{slug:"instant_db",parameters:{INSTANT_DB_APP_ID:e.appId}}});t?await o.mutateAsync({body:{message:t,id:(0,R.Z)(),tags:["instant-db-integration-update"]}}):(0,A.Am)('"Instant DB already connected"',{description:"You can already use Instant DB to connect to your database."})}catch(e){throw e}finally{d(!1)}};return(0,u.jsxs)(eu.Zb,{className:"w-full",children:[(0,u.jsxs)(eu.Ol,{children:[(0,u.jsx)(eu.ll,{children:"Instant DB"}),(0,u.jsx)(eu.SZ,{children:"Instant DB is a backend as a service that doesn't require any setup and can be used directly from the frontend client."})]}),(0,u.jsx)(eu.aY,{children:(0,u.jsx)(L.l0,{...r,children:(0,u.jsxs)("form",{onSubmit:r.handleSubmit(h),children:[(0,u.jsx)(L.Wi,{control:r.control,name:"appId",render:e=>{let{field:t}=e;return(0,u.jsxs)(L.xJ,{children:[(0,u.jsx)(L.lX,{children:"Instant DB App ID"}),(0,u.jsx)(L.NI,{children:(0,u.jsx)(F.I,{...t,placeholder:"5f05b152-20c6-40e0.."})})]})}}),(0,u.jsxs)(C.z,{disabled:c||!r.formState.isValid||!r.watch("appId"),className:"mt-4",type:"submit",children:[c?(0,u.jsx)(f.Z,{name:"progress_activity",className:"mr-2 animate-spin"}):null,a?"Update":"Connect"]}),a&&(0,u.jsxs)(C.z,{disabled:c,className:"ml-4 mt-4",variant:"destructive",onClick:m,children:[c?(0,u.jsx)(f.Z,{name:"progress_activity",className:"mr-2 animate-spin"}):null,"Remove"]})]})})})]})},e9=e=>{let{projectId:t}=e,s=(0,k.Eh)(e=>e.project),n=e6.ZP.isFeatureEnabled("instant_db")||!1;return s&&n?(0,u.jsx)(e8,{project:s}):null},te={slug:"supabase",isRequiredFilled:e=>{var t,s;return!!((null===(t=e.parameters)||void 0===t?void 0:t.SUPABASE_PROJECT_URL)&&(null===(s=e.parameters)||void 0===s?void 0:s.SUPABASE_API_KEY))},title:(0,u.jsxs)("div",{className:"flex items-center gap-2",children:["Supabase integration",(0,u.jsx)(el.C,{children:"Alpha"})]}),description:(0,u.jsx)(()=>(0,u.jsxs)(u.Fragment,{children:["Create a project on"," ",(0,u.jsx)("a",{className:"underline",target:"_blank",href:"https://database.new",children:"supabase.com"}),", and fetch your URL & API key from the Configuration/API screen. Visit"," ",(0,u.jsxs)("a",{className:"underline",target:"_blank",href:"https://docs.lovable.dev/integrations/supabase/",children:["our docs"," "]}),"to learn more."]}),{}),fields:[{title:"Project URL",key:"SUPABASE_PROJECT_URL",type:"text",placeholder:"https://your-project-id.supabase.co",validation:V.Z_().url("Please enter a valid URL").refine(e=>e.endsWith(".supabase.co")||e.endsWith(".supabase.co/"),{message:"Please enter a Supabase Project URL"})},{title:"API Key (Anon/Public)",key:"SUPABASE_API_KEY",type:"text",placeholder:"your-supabase-anon-key",validation:V.Z_().min(20)}]};function tt(e){let{projectId:t}=e,{isPending:s,isError:n,error:a,data:r}=eY({projectId:t}).query;return(0,N.useMemo)(()=>{let e=Object.values((null==r?void 0:r.integrations)||{});return s?(0,u.jsx)(eu.Zb,{children:(0,u.jsx)(eu.Ol,{className:"opacity-30",children:"Integrations loading..."})}):n?(0,u.jsxs)(eu.Zb,{children:[(0,u.jsx)(eu.Ol,{className:"opacity-30",children:"Integrations issue"}),(0,u.jsx)(eu.aY,{children:(0,u.jsxs)("p",{className:"text-destructive opacity-80",children:["Error: ",a.message]})})]}):(0,u.jsx)(ts,{integrations:e,projectId:t})},[s,n,a,r,t])}function ts(e){var t,s;let{projectId:n,integrations:a}=e,r=(0,k.Eh)(e=>e.project),l=(null==r?void 0:null===(s=r.creation_options)||void 0===s?void 0:null===(t=s.tech_stack)||void 0===t?void 0:t.includes("supabase"))?[]:[te],i=new Map(l.map(e=>[e.slug,e])),o=new Set,c=[...a.map(e=>{var t;let s=i.get(null!==(t=e.slug)&&void 0!==t?t:null);return s&&o.add(s.slug),{integration:e,item:s||e2,key:e.slug||"existing-".concat(e.slug)}}),...l.filter(e=>!o.has(e.slug)).map((e,t)=>({item:e,key:e.slug||"available-".concat(t)}))];return(0,u.jsxs)(u.Fragment,{children:[c.map(e=>{let{integration:t,item:s,key:a}=e;return(0,u.jsx)(e0,{projectId:n,integration:t,item:s},a)}),(0,u.jsx)(e9,{projectId:n})]})}var tn=s(57054),ta=s(1787);let tr={domain:[{type:"A",host:"@",value:"185.158.133.1",ttl:300},{type:"A",host:"www",value:"185.158.133.1",ttl:300}],subDomain:[{type:"A",host:"{SUBDOMAIN}",value:"185.158.133.1",ttl:300}]};var tl=s(4391);let ti=(0,eQ.Ue)()((0,tl.n)(e=>({workspaces:{owned:[],joined:[],invited:[]},currentWorkspace:null,isLoading:!1,error:null,setWorkspaces:t=>e(e=>{e.workspaces=t}),setCurrentWorkspace:t=>e(e=>{e.currentWorkspace=t}),setLoading:t=>e(e=>{e.isLoading=t}),setError:t=>e(e=>{e.error=t})}))),to=()=>{let e=(0,ea.ye)("teams")||!1,{workspaces:t,isLoading:s,error:n,setWorkspaces:a,setLoading:r,setError:l}=ti(),[i]=(0,x.a)(),{put:o,get:c}=(0,eo.D)(),d=(0,N.useCallback)(async(t,s)=>{if(e){if(!i)throw Error("User must be logged in to move projects");try{r(!0);let e=await o("/projects/".concat(t),[{path:"workspace_id",value:s}]);if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));A.Am.success("Project moved")}catch(e){throw A.Am.error("Failed to move project to workspace"),e}finally{r(!1)}}},[i,o,r,e]),u=(0,N.useCallback)(async()=>{if(e&&i){r(!0);try{let e=await c("/user/workspaces");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();a(t),l(null)}catch(e){A.Am.error("Failed to fetch workspaces"),l(e instanceof Error?e.message:"Unknown error")}finally{r(!1)}}},[i,c,a,r,l,e]);return(0,N.useEffect)(()=>{u()},[u]),(0,N.useMemo)(()=>e?{workspaces:t,moveProjectToWorkspace:d,isLoading:s,error:n,refreshWorkspaces:u}:{workspaces:t,moveProjectToWorkspace:()=>Promise.resolve(),isLoading:!1,error:null,refreshWorkspaces:()=>Promise.resolve()},[e,t,d,s,n,u])};var tc=s(30401);function td(e){let{trigger:t,currentWorkspaceId:s,projectId:n,onWorkspaceSelect:a}=e,{workspaces:r,isLoading:l,error:i,moveProjectToWorkspace:o}=to(),[c,d]=(0,N.useState)(!1),[m,h]=(0,N.useState)(!1),p=async e=>{h(!0),n?await o(n,e.id):null==a||a(e),d(!1),h(!1)};return(0,u.jsxs)(P.Vq,{open:c,onOpenChange:d,children:[(0,u.jsx)(P.hg,{asChild:!0,children:t||(0,u.jsx)(C.z,{variant:"outline",children:s?"Change":"Select"})}),(0,u.jsxs)(P.cZ,{className:"sm:max-w-[425px]",children:[(0,u.jsxs)(P.fK,{children:[(0,u.jsx)(P.$N,{children:"Change Workspace"}),(0,u.jsx)(P.Be,{children:n?"Select a workspace to move this project to":"Select a workspace to switch to"})]}),(0,u.jsx)("div",{className:"space-y-4 py-4",children:l?(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(Q.O,{className:"h-12 w-full"}),(0,u.jsx)(Q.O,{className:"h-12 w-full"}),(0,u.jsx)(Q.O,{className:"h-12 w-full"})]}):i?(0,u.jsxs)("div",{className:"text-center text-destructive",children:["Error loading workspaces: ",i]}):0===r.owned.length&&0===r.joined.length?(0,u.jsx)("div",{className:"text-center text-muted-foreground",children:"No workspaces found"}):r.owned.map(e=>(0,u.jsxs)(C.z,{variant:"outline",className:"w-full justify-between",onClick:()=>p(e),disabled:m,children:[(0,u.jsx)("span",{className:"flex items-center gap-2",children:(0,u.jsx)("span",{children:e.name})}),e.id===s&&(0,u.jsx)(tc.Z,{className:"h-4 w-4"})]},e.id))})]})]})}function tu(e){let{workspaceId:t}=e,{workspaces:s,isLoading:n}=to();if(!t)return(0,u.jsx)("span",{className:"text-muted-foreground",children:"No workspace"});if(n)return(0,u.jsx)("span",{className:"text-muted-foreground",children:"Loading workspace..."});let a=[...s.owned,...s.joined,...s.invited].find(e=>e.id===t);return a?(0,u.jsx)("div",{className:"flex items-center gap-2",children:(0,u.jsx)(K.default,{href:"/@".concat(a.name),className:"hover:underline",children:(0,u.jsxs)("span",{className:"font-medium",children:["@",a.name]})})}):(0,u.jsx)("span",{className:"text-muted-foreground",children:"Workspace not found"})}let tm=e=>(null==e?void 0:e.seconds)?eg.ou.fromSeconds(null==e?void 0:e.seconds).toFormat("yyyy-LL-dd HH:mm:ss"):void 0;var th=e=>{var t,s,n,a,r,l,i;let{projectId:o,openDrawer:c,setOpenDrawer:d,highlight:m,customDomains:h,refetchDomains:p}=e,[j,g]=(0,N.useState)(!1),[v,b]=(0,N.useState)(null),y=(0,k.Eh)(e=>e.userProjectPermissions),w=(0,ea.ye)("custom_domains")||!1,_=(0,ea.ye)("teams")||!1,[S,P]=(0,N.useState)(!1),I=(0,k.Eh)(e=>e.project),O=(0,x.e)(),R=(0,U.O)(),z=ep(),D=z&&z.admin,[T,Z]=(0,N.useState)(),{userData:L}=(0,Y.v)(),F=!!(null==I?void 0:I.is_supabase_enabled);(0,N.useEffect)(()=>{T&&T===(null==I?void 0:I.visibility)&&Z(void 0)},[T,null==I?void 0:I.visibility]);let H=(0,ta.M)();(0,N.useEffect)(()=>{c&&((async()=>{b(await H.get("/entri/token"))})(),et().close())},[c]);let[M,q]=(0,N.useState)(null!==(i=null==I?void 0:I.llm_name)&&void 0!==i?i:null),V=async e=>{if(!I)return;let t="default"===e?null:e;q(t);try{await R.put("/projects/".concat(I.id,"/llm_name"),{llm_name:t}),A.Am.success("Model Updated",{description:"The project's model has been updated successfully."})}catch(e){var s;q(null!==(s=null==I?void 0:I.llm_name)&&void 0!==s?s:null),A.Am.error("Error",{description:"Failed to update the model. Please try again."})}},G=async e=>{if(null===v)return;d(!1);let t={...v,dnsRecords:tr,userId:""+(null==I?void 0:I.id),sellVersion:"v3",whiteLabel:{customCopy:{initialScreen:{title:{en:"Use your domain with Lovable"}}},hideEntriLogo:!0,theme:{primary:"#000000",secondary:"#000000",onSecondary:"#FFFFFF",headerBackground:"#000000"},logo:"https://lovable.dev/apple-icon.png",sell:{partnerName:"Lovable",partnerLogo:"https://lovable.dev/img/lovable-logo-text-nav.png",partnerUrl:"https://lovable.dev",overlayScreenHeight:"75%",flowTarget:"_blank"}}};"buy"===e?(t.prefilledDomain=(null==I?void 0:I.name)+".com",et().purchaseDomain(t)):et().showEntri(t),e6.ZP.capture("domain_connecting_attempt",{mode:e})},W=async e=>{if(e.detail.success){d(!0);let t=A.Am.success("Connecting domain...",{description:"Hold on while we were mapping ".concat(e.detail.domain," to your project.")});try{await H.post("/projects/".concat(null==I?void 0:I.id,"/domains"),{domain:e.detail.domain}),p(),A.Am.success("Domain connected!",{description:"The domain ".concat(e.detail.domain," is now mapped to your project. It might take a few minutes to propagate.")}),e6.ZP.capture("domain_connected")}catch(e){A.Am.info("Domain not connected",{description:"There was an error while connecting your domain. Please try again."}),es.Tb(e)}A.Am.dismiss(t)}};return N.useEffect(()=>(window.addEventListener("onEntriClose",W,!1),()=>{window.removeEventListener("onEntriClose",W)}),[]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(tx,{open:j,setOpen:g,projectId:o}),(0,u.jsxs)(em.dy,{direction:"right",open:c,onOpenChange:d,children:[(0,u.jsxs)(eh.u,{children:[(0,u.jsx)(eh.aJ,{asChild:!0,children:(0,u.jsx)(em.Qz,{asChild:!0,children:(0,u.jsx)(C.z,{size:"icon-sm",variant:"muted",onClick:e=>{e.altKey&&(e.preventDefault(),g(!0))},children:(0,u.jsx)(f.Z,{name:"settings"})})})}),(0,u.jsx)(eh._v,{children:"Project Settings"})]}),(0,u.jsxs)(em.sc,{className:"max-h-screen",onCloseAutoFocus:e=>e.preventDefault(),children:[(0,u.jsxs)(em.OX,{className:"p-6 pb-3",children:[(0,u.jsx)(em.iI,{children:"Project Settings"}),(0,u.jsx)(em.u6,{children:"View and manage your project settings."})]}),(0,u.jsxs)("div",{className:"flex flex-1 flex-col gap-4 overflow-y-scroll px-6 py-3",children:[(0,u.jsxs)(eu.Zb,{children:[(0,u.jsxs)(eu.Ol,{className:"pb-2",children:[(0,u.jsx)(eu.ll,{children:"Project Info"}),(0,u.jsx)(eu.SZ,{children:"General information about your project."})]}),(0,u.jsx)(eu.aY,{children:(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,u.jsx)(tp,{label:"Project name",value:null==I?void 0:I.name}),(0,u.jsx)(tp,{label:"Owner",value:(null==I?void 0:I.created_by)&&(0,u.jsxs)(K.default,{className:"underline",target:"_blank",href:"/@".concat(I.created_by),children:["@",I.created_by]})}),(0,u.jsx)(tp,{label:"Created at",value:tm(null==I?void 0:I.created_at)}),(0,u.jsx)(tp,{label:"Tech stack",value:null==I?void 0:null===(t=I.creation_options)||void 0===t?void 0:t.tech_stack}),(0,u.jsx)(tp,{label:"Messages count",value:(null==I?void 0:null===(s=I.user_message_count)||void 0===s?void 0:s.toString())||"0"}),(0,u.jsx)(tp,{label:"AI Edits count",value:(null==I?void 0:null===(n=I.edit_count)||void 0===n?void 0:n.toString())||"0"}),_&&(0,u.jsx)(tp,{label:"Workspace",value:(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(null==I?void 0:I.workspace_id)&&(0,u.jsx)(tu,{workspaceId:null==I?void 0:I.workspace_id}),(0,u.jsx)(td,{projectId:o,currentWorkspaceId:null==I?void 0:I.workspace_id})]})})]})})]}),w&&(0,u.jsxs)(eu.Zb,{className:"domains"===m?"highlight":"",children:[(0,u.jsxs)(eu.Ol,{children:[(0,u.jsx)(eu.ll,{children:"Domains"}),(0,u.jsxs)(eu.SZ,{children:[(0,u.jsx)("span",{className:"absolute inline-flex animate-ping rounded-full bg-sky-400 opacity-75"}),"Manage your domains. To disconnect a domain from your lovable project, manage it with your domain provider and remove it from this list.",(0,u.jsxs)("ul",{className:"mt-4",children:[(null==I?void 0:I.url)?(0,u.jsx)(ec,{showRemove:!1,domain:{domain:(0,ed.P)(null==I?void 0:I.url),status:"active"}}):(0,u.jsx)("li",{className:"flex items-center",children:(0,u.jsxs)("span",{className:"flex-grow text-gray-400",title:"Your have to publish your project for this domain to work",children:[null==I?void 0:I.name,".lovable.app"]})}),null==h?void 0:h.map((e,t)=>(0,u.jsx)(ec,{domain:e,showRemove:!0,refetchDomains:p},t))]})]})]}),(0,u.jsxs)(eu.aY,{children:[(0,u.jsx)(C.z,{variant:"outline",size:"sm",type:"button",onClick:()=>G("connect"),className:"whitespace-nowrap",children:0===h.length?"Add a domain you own":"Add another domain"}),(0,u.jsx)(C.z,{variant:"outline",size:"sm",type:"button",onClick:()=>G("buy"),className:"ml-2 whitespace-nowrap",children:"Buy a domain"})]})]}),(0,u.jsxs)(eu.Zb,{children:[(0,u.jsxs)(eu.Ol,{className:"pb-2",children:[(0,u.jsx)(eu.ll,{children:"Knowledge"}),(0,u.jsxs)(eu.SZ,{children:["Add custom context and instructions for your project.",(0,u.jsx)("br",{}),"Lovable will use it in every edit."]})]}),(0,u.jsx)(eu.aY,{children:(0,u.jsx)(eS.Z,{})})]}),y.admin&&(0,u.jsx)(eu.Zb,{children:null==I?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eu.Ol,{}),(0,u.jsx)(eu.aY,{children:(0,u.jsx)(Q.O,{className:"h-10 w-full"})})]}):I.is_github||I.git_on_s3?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(eu.Ol,{children:[(0,u.jsxs)(eu.ll,{className:"flex items-center justify-between",children:["GitHub",(0,u.jsxs)(C.z,{variant:"outline",size:"sm",type:"button",disabled:!0,hidden:(null==I?void 0:null===(a=I.github_owner)||void 0===a?void 0:a.name)===er.aR,className:"min-w-[110px] shrink-0 gap-2 rounded-full bg-transparent disabled:opacity-100",children:[(0,u.jsx)("span",{className:"h-2 w-2 rounded-full bg-success"}),"Connected"]})]}),(null==I?void 0:null===(r=I.github_owner)||void 0===r?void 0:r.name)!==er.aR?(0,u.jsxs)(eu.SZ,{children:[(0,u.jsxs)("p",{className:"mb-4",children:["Lovable will make commits and watch for changes on the ",(0,u.jsx)("b",{children:(null==I?void 0:I.main_branch)||"main"})," branch."]}),(0,u.jsxs)(tn.J2,{open:S,onOpenChange:P,children:[(0,u.jsx)(tn.xo,{children:(0,u.jsxs)(C.z,{variant:"outline",size:"sm",className:"items-center gap-2 px-3",children:[(0,u.jsx)(ex.Z,{className:"h-4 w-4"}),(null==I?void 0:I.main_branch)||"main",(0,u.jsx)(ef.Z,{className:"h-4 w-4"})]})}),(0,u.jsx)(tn.yk,{className:"p-0",align:"start",children:(0,u.jsx)(eE,{projectId:o,onClose:()=>P(!1)})})]})]}):null]}),(0,u.jsx)(eu.aY,{className:"flex justify-start",children:(null==I?void 0:null===(l=I.github_owner)||void 0===l?void 0:l.name)!==er.aR?(0,u.jsx)("div",{children:(0,u.jsxs)("a",{href:(0,er.c_)(I.github_repo_name,I.github_owner.name),className:(0,E.cn)((0,C.d)({variant:"link",size:"sm"}),"flex items-center gap-2 whitespace-normal break-all px-0"),target:"_blank",children:[(0,u.jsx)(ej.Z,{size:"1rem",className:"flex-shrink-0"}),(0,er.c_)(I.github_repo_name,I.github_owner.name)]})}):(0,u.jsx)(eU,{projectId:I.id,projectName:I.github_repo_name})})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(eu.Ol,{children:[(0,u.jsx)(eu.ll,{children:"Git Guide"}),(0,u.jsx)(eu.SZ,{children:'Access the Git repository for your project. You can use this to edit code locally, and sync with the AI Editor."'})]}),(0,u.jsx)(eu.aY,{children:(0,u.jsxs)("div",{children:[(0,u.jsxs)("ol",{className:"list-inside list-decimal",children:[(0,u.jsxs)("li",{children:["Clone the repository:",(0,u.jsxs)("pre",{className:"my-2 rounded-md bg-secondary p-2",children:["git clone"," ",I.name&&(0,er.c_)(I.name)]})]}),(0,u.jsxs)("li",{children:["Use ",(0,u.jsx)(el.C,{variant:"outline",children:O})," as username and a personal access token as password when prompted for credentials.",(0,u.jsx)("p",{className:"ml-5 text-sm text-muted-foreground",children:"Note: If the repository is public, you will first be prompted for credentials when pushing."})]})]}),(0,u.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Profit! Make changes to the code, and push them to the repository. The AI Editor will automatically update with your changes."})]})})]})}),F&&(0,u.jsx)("div",{className:"flex flex-1 flex-col gap-4",children:(0,u.jsx)(tt,{projectId:o})}),D&&(0,u.jsxs)(eu.Zb,{children:[(0,u.jsxs)(eu.Ol,{children:[(0,u.jsx)(eu.ll,{children:"Visibility"}),(0,u.jsx)(eu.SZ,{children:"Control who can view your project."})]}),(0,u.jsx)(eu.aY,{children:(0,u.jsx)($,{})})]}),(0,u.jsxs)(eu.Zb,{children:[(0,u.jsxs)(eu.Ol,{children:[(0,u.jsx)(eu.ll,{children:"Badge"}),(0,u.jsx)(eu.SZ,{children:"Control the visibility of the edit with Lovable badge."})]}),(0,u.jsxs)(eu.aY,{children:[(0,u.jsx)(eN,{projectId:o}),(null==L?void 0:L.plan)==="free"&&(0,u.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"This option is only available for paid users."})]})]}),I&&(null==L?void 0:L.is_admin)&&(0,u.jsxs)(eu.Zb,{children:[(0,u.jsxs)(eu.Ol,{children:[(0,u.jsx)(eu.ll,{children:"Featured Project"}),(0,u.jsx)(eu.SZ,{children:"Control whether this project is featured in the homepage."})]}),(0,u.jsx)(eu.aY,{children:(0,u.jsx)(eB,{projectId:o,initialFeatured:I.featured||!1})})]}),(null==L?void 0:L.is_admin)&&(0,u.jsxs)(eu.Zb,{children:[(0,u.jsxs)(eu.Ol,{children:[(0,u.jsx)(eu.ll,{children:"Model Selection"}),(0,u.jsx)(eu.SZ,{children:"Select the AI model for this project. (Admin only)"})]}),(0,u.jsx)(eu.aY,{children:(0,u.jsx)(en.O,{value:M||"default",onChange:V,className:"w-full"})})]}),I&&(0,u.jsxs)(eu.Zb,{children:[(0,u.jsxs)(eu.Ol,{children:[(0,u.jsx)(eu.ll,{children:"Rename Project"}),(0,u.jsx)(eu.SZ,{children:"Adjust project name and deployment domain."})]}),(0,u.jsx)(eu.aY,{children:(0,u.jsx)(B,{project:I})})]}),I&&y.admin&&(0,u.jsxs)(eu.Zb,{children:[(0,u.jsxs)(eu.Ol,{children:[(0,u.jsx)(eu.ll,{children:"Danger Zone"}),(0,u.jsx)(eu.SZ,{children:"These actions are irreversible. Proceed with caution."})]}),(0,u.jsx)(eu.aY,{children:(0,u.jsx)(eV,{project:I})})]})]})]})]})]})};let tp=e=>{let{label:t,value:s}=e;return(0,u.jsxs)("div",{className:"flex flex-col",children:[(0,u.jsx)("h4",{className:"text-primary",children:t}),s&&(0,u.jsx)("p",{className:"truncate text-sm text-muted-foreground",children:s})]})},tx=e=>{let{open:t,setOpen:s,projectId:n}=e,[a]=(0,x.a)(),{userData:r}=(0,Y.v)(),l=(0,k.Eh)(e=>e.project),[i,o]=(0,N.useState)(!1),c=(0,U.O)(),d=async()=>{o(!0);try{await c.post("/projects/".concat(n,"/clear-history")),A.Am.success("History Cleared",{description:"Chat history has been cleared successfully."})}catch(e){A.Am.error("Error",{description:"Failed to clear chat history. Please try again."})}finally{o(!1)}};return(0,u.jsxs)(h.h_,{open:t,onOpenChange:s,children:[(0,u.jsx)(h.$F,{asChild:!0,children:(0,u.jsx)("button",{className:"pointer-events-none select-none bg-transparent text-transparent"})}),(0,u.jsxs)(h.AW,{className:"z-[1001] flex min-w-[200px] max-w-[250px] flex-col gap-3 rounded-md border bg-background p-4",alignOffset:2,collisionPadding:8,sideOffset:18,children:[(0,u.jsxs)("div",{className:"flex flex-col",children:[(0,u.jsx)("h3",{className:"",children:"Advanced Settings"}),(0,u.jsx)("p",{className:"text-sm text-muted-foreground",children:"Developer & debug options."})]}),(0,u.jsx)("div",{className:"flex flex-col gap-y-3",children:(0,u.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,u.jsx)("p",{className:"text-sm font-medium",children:"Clear History"}),(0,u.jsx)(C.z,{variant:"destructive",size:"sm",onClick:d,loading:i,children:"Clear"})]})}),((null==r?void 0:r.is_admin)||!1)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p.Z,{externalHref:(0,ev.U1)(n),iconName:"language",title:"Firestore: Project"},"preview"),(null==l?void 0:l.user_id)&&(null==a?void 0:a.uid)!==(null==l?void 0:l.user_id)&&(0,u.jsx)(p.Z,{externalHref:(0,ev.fA)(null==l?void 0:l.user_id),iconName:"language",title:"Firestore: User that created this project"},"firestore-user"),(null==a?void 0:a.uid)&&(0,u.jsx)(p.Z,{externalHref:(0,ev.fA)(null==a?void 0:a.uid),iconName:"language",title:"Firestore: This user"},"firestore-current-user")]})]})]})},tf=e=>{let t=(0,k.Eh)(e=>e.project);return(0,u.jsx)(P.Vq,{...e,children:(0,u.jsxs)(P.cZ,{className:"sm:max-w-md",children:[(0,u.jsx)(P.fK,{children:(0,u.jsx)(P.$N,{className:"text-center text-2xl font-semibold tracking-tight",children:"Your site is live!"})}),(null==t?void 0:t.url)&&(0,u.jsx)("div",{className:"flex w-full flex-col items-center gap-4",children:(0,u.jsxs)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 rounded-lg bg-secondary px-4 py-2 text-sm font-medium transition-colors hover:bg-secondary/80",children:[t.url,(0,u.jsx)(f.Z,{name:"open_in_new",size:"small",className:"text-muted-foreground"})]})}),(0,u.jsx)("div",{className:"flex flex-col gap-3 text-center",children:(0,u.jsxs)("div",{className:"flex flex-col items-center gap-8",children:[(0,u.jsx)(C.z,{onClick:()=>{e6.ZP.capture("launched_link_clicked",{project_url:null==t?void 0:t.url,source:"publish_complete_dialog"}),window.open("https://launched.lovable.app","_blank")},children:"Share on Lovable Launched"}),(0,u.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Want a custom domain?"," ",(0,u.jsx)("a",{href:"https://docs.lovable.dev/tips-tricks/custom-domain/",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-primary hover:underline",children:"Learn more"})]})]})})]})})},tj=e=>{let{open:t,onOpenChange:s,errorMessage:n}=e;return(0,u.jsx)(P.Vq,{open:t,onOpenChange:s,children:(0,u.jsxs)(P.cZ,{className:"py-16 text-center",children:[(0,u.jsxs)(P.fK,{children:[(0,u.jsx)(P.$N,{className:"text-center text-2xl",children:"Oops! \uD83D\uDE22"}),(0,u.jsx)("p",{className:"text-center",children:"Something went wrong and we couldn't publish your site."}),n&&(0,u.jsxs)("div",{className:"mt-4 flex flex-col items-center",children:[(0,u.jsx)("p",{className:"text-center",children:"The build failed with the following message:"}),(0,u.jsx)("p",{className:"mx-auto mt-2 max-w-[80%] text-center font-medium text-destructive",children:n})]})]}),(0,u.jsx)(C.z,{variant:"default",onClick:()=>s(!1),children:"Close"})]})})};var tg=e=>{let{setOpenDrawer:t,setHighlight:s,customDomains:n}=e,a=(0,ea.ye)("custom_domains")||!1,[r,l]=(0,N.useState)(!1),[i,o]=(0,N.useState)(!1),[c,d]=(0,N.useState)(),m=(0,k.Eh)(e=>e.project),p=null==m?void 0:m.id,x=(0,U.O)(),j=(0,M.D)({mutationFn:()=>x.post("/projects/".concat(p,"/deployments"),{}),onSuccess:()=>{(null==m?void 0:m.is_published)||l(!0)},onError:e=>{if(422===e.status){var t;d((null===(t=e.data)||void 0===t?void 0:t.detail)||null)}o(!0)}}),g=async()=>{if(!p){b.P.error("project id is missing, can't deploy");return}j.mutate()};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(h.h_,{children:[(0,u.jsxs)(eh.u,{children:[(0,u.jsx)(eh.aJ,{asChild:!0,children:(0,u.jsx)(h.$F,{asChild:!0,children:(0,u.jsxs)(C.z,{variant:"muted",size:"sm",className:"gap-1.5",children:[(0,u.jsx)(f.Z,{name:"language",className:"text-muted-foreground"}),(0,u.jsx)("span",{className:"hidden md:flex",children:"Publish"})]})})}),(0,u.jsx)(eh._v,{children:"Visibility and Publish"})]}),(0,u.jsxs)(h.AW,{className:"z-[1001] min-w-[200px] max-w-[250px] rounded-md border border-border bg-background p-4",alignOffset:2,collisionPadding:8,sideOffset:18,onCloseAutoFocus:e=>e.preventDefault(),children:[(0,u.jsxs)("div",{className:"flex flex-col text-muted-foreground",children:[(0,u.jsx)("p",{children:"Publish your project to the following domains:"}),(0,u.jsxs)("ul",{className:"text-xs",children:[(null==m?void 0:m.url)?(0,u.jsxs)("li",{className:"mt-2 flex items-center",children:[(0,u.jsx)("span",{className:"flex-grow",children:(0,ed.P)(m.url)}),(0,u.jsx)("a",{href:null==m?void 0:m.url,target:"_blank",children:(0,u.jsx)(f.Z,{name:"open_in_new",size:"small"})})]}):(0,u.jsx)("li",{className:"mt-2 flex items-center",children:(0,u.jsxs)("span",{className:"flex-grow",children:[null==m?void 0:m.name,".lovable.app"]})}),null==n?void 0:n.map((e,t)=>(0,u.jsx)(ec,{domain:e,showRemove:!1},t))]})]}),(0,u.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,u.jsx)(C.z,{size:"sm",onClick:g,loading:j.isPending,variant:"accent",children:(null==m?void 0:m.url)?"Update":"Publish"}),a&&(0,u.jsx)(C.z,{size:"sm",onClick:()=>{s("domains"),t(!0),setTimeout(()=>s(""),1500)},variant:"secondary",children:"Manage domains"})]})]})]}),(0,u.jsx)(tj,{open:i,onOpenChange:o,errorMessage:c}),(0,u.jsx)(tf,{open:r,onOpenChange:l})]})},tv=s(29461);let tb=e=>{let{projectId:t,closeDialog:s}=e,n=(0,U.O)(),a=(0,M.D)({mutationFn:()=>n.post("/projects/".concat(t,"/supabase/disconnect")),onSuccess:()=>{(0,A.Am)("Supabase disconnected",{description:"You can connect to a new Supabase project later."}),s()},onError:e=>{A.Am.error("Error",{description:e.message})}});return(0,u.jsxs)(P.cZ,{children:[(0,u.jsxs)(P.fK,{children:[(0,u.jsx)(P.$N,{children:"Disconnect Supabase"}),(0,u.jsx)(P.Be,{children:"Are you sure you want to disconnect Supabase? We will stop deploying edge functions and reading your database schema, but no changes will be made to your code. You can reconnect to Supabase later."})]}),(0,u.jsxs)(P.cN,{children:[(0,u.jsx)(C.z,{variant:"outline",onClick:s,children:"Cancel"}),(0,u.jsx)(C.z,{variant:"destructive",onClick:()=>{a.mutate()},loading:a.isPending,children:"Disconnect"})]})]})},ty=e=>{let{projectId:t,setIsDropdownOpen:s,supabaseConfig:n}=e,a=ep(),r=(0,tv.z)(tb);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("p",{className:"pb-2 text-sm text-muted-foreground",children:["Supabase has been enabled."," ",(0,u.jsx)("a",{href:"https://docs.lovable.dev/integrations/supabase/",target:"_blank",rel:"noreferrer",className:"underline",children:"Integration Docs"}),"."]}),(0,u.jsx)(p.Z,{externalHref:"https://supabase.com/dashboard/project/".concat(n.supabase_project_id),title:"Dashboard",className:"-mx-2"}),(0,u.jsx)(p.Z,{externalHref:"https://supabase.com/dashboard/project/".concat(n.supabase_project_id,"/auth/users"),title:"Manage Users",className:"-mx-2"}),(0,u.jsx)(p.Z,{externalHref:"https://supabase.com/dashboard/project/".concat(n.supabase_project_id,"/editor"),title:"SQL Editor",className:"-mx-2"}),(0,u.jsx)(p.Z,{externalHref:"https://supabase.com/dashboard/project/".concat(n.supabase_project_id,"/functions"),title:"Edge Functions",className:"-mx-2"}),(0,u.jsx)(p.Z,{externalHref:"https://supabase.com/dashboard/project/".concat(n.supabase_project_id,"/settings/functions"),title:"Manage Secrets",className:"-mx-2"}),(0,u.jsx)(h.VD,{className:"mx-0"}),a&&a.admin&&(0,u.jsx)("div",{className:"flex justify-start",children:(0,u.jsx)(C.z,{onClick:()=>r({dialogProps:{onOpen:()=>{s(!1)}},childProps:{projectId:t,closeDialog:()=>r(!1)}}),variant:"destructive",size:"sm",className:"mt-2 whitespace-nowrap",children:"Disconnect"})})]})};var tN=s(78844);let tw=()=>{let e=(0,U.O)(),{data:t,isPending:s}=(0,e_.a)({queryKey:["supabaseOrganizations"],queryFn:async()=>{let t=await e.get("/supabase/organizations");return Array.isArray(t)?t:(b.P.error("Unexpected response format:",t),[])}}),n=!t||0===t.length;return{supabaseOrganizations:t,isLoading:s,noOrganizations:n}};(n=r||(r={})).ACTIVE_HEALTHY="ACTIVE_HEALTHY",n.ACTIVE_UNHEALTHY="ACTIVE_UNHEALTHY",n.COMING_UP="COMING_UP",n.GOING_DOWN="GOING_DOWN",n.INACTIVE="INACTIVE",n.INIT_FAILED="INIT_FAILED",n.REMOVED="REMOVED",n.RESTARTING="RESTARTING",n.UNKNOWN="UNKNOWN",n.UPGRADING="UPGRADING",n.PAUSING="PAUSING",n.RESTORING="RESTORING",n.RESTORE_FAILED="RESTORE_FAILED",n.PAUSE_FAILED="PAUSE_FAILED";let t_=e=>{let{onClose:t,selectedSupabaseProject:s}=e,n=(0,I.DZ)(),a=(0,k.Eh)(e=>e.isSendChatMessageMutationPending),l=(null==s?void 0:s.supabaseProjectStatus)===r.ACTIVE_HEALTHY,{mutateAsync:i,isPending:o}=(0,z.d)({projectId:n,finalRedirectUrl:void 0,onSubmit:()=>{t()},onSuccess:()=>{A.Am.success("Supabase connected",{description:"Follow the instructions in the chat to complete the integration."})}}),c=async()=>{if(b.P.info("handleProjectSelect"),s){b.P.info("Selected Supabase project: ".concat(s.supabaseProjectId)),b.P.info("Starting connection mutation");try{await i({body:{id:(0,R.Z)(),message:"Please connect my supabase project `".concat(s.supabaseProjectName,"`"),mode:O.S.INSTANT,contains_error:!1,integrate_supabase_project_id:s.supabaseProjectId,integrate_supabase_org_id:s.supabaseOrgId},projectId:n},{})}catch(e){b.P.error(e),A.Am.error("Error",{description:"There was an error connecting to Supabase."})}}};return(0,u.jsxs)(P.cZ,{children:[(0,u.jsx)(P.fK,{children:(0,u.jsx)(P.$N,{children:"Connect this Lovable project to Supabase"})}),(0,u.jsxs)(P.Be,{children:["You are about to connect your project to Supabase. This will give Lovable context on your Supabase project to persist data, add authentication, write backend functions, and more."," ",(0,u.jsx)("a",{href:"https://docs.lovable.dev/integrations/supabase/",target:"_blank",rel:"noreferrer",className:"underline",children:"Learn more."})]}),s&&(0,u.jsx)(eu.Zb,{className:"pb-4",children:(0,u.jsxs)(eu.aY,{className:"flex flex-col gap-2 pt-0",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"-mt-2 text-sm text-muted-foreground",children:"Supabase Project"}),(0,u.jsx)("h3",{className:"font-semibold",children:s.supabaseProjectName})]}),(0,u.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,u.jsxs)("a",{href:"https://supabase.com/dashboard/project/".concat(s.supabaseProjectId),target:"_blank",rel:"noopener noreferrer",className:(0,E.cn)((0,C.d)({variant:"outline",size:"sm"}),"flex items-center gap-2"),children:["Supabase Dashboard",(0,u.jsx)(f.Z,{name:"open_in_new",size:"small"})]}),(0,u.jsxs)("a",{href:"https://supabase.com/dashboard/project/".concat(s.supabaseProjectId,"/database/schemas"),target:"_blank",rel:"noopener noreferrer",className:(0,E.cn)((0,C.d)({variant:"outline",size:"sm"}),"flex items-center gap-2"),children:["View Tables ",(0,u.jsx)(f.Z,{name:"open_in_new",size:"small"})]})]})]})}),(0,u.jsx)(P.Be,{children:"We won't make any changes at this step, and you can always disconnect."}),a&&(0,u.jsx)("p",{className:"text-sm text-warning",children:"Can't connect to Supabase while the AI is writing code. Please wait until the AI is ready."}),!l&&(0,u.jsx)("p",{className:"text-sm text-warning",children:"The selected Supabase project is not active so we can't connect to it. Go to the Supabase dashboard to activate it."}),(0,u.jsxs)(P.cN,{children:[(0,u.jsx)(C.z,{variant:"outline",disabled:o,onClick:t,children:"Cancel"}),(0,u.jsx)(C.z,{loading:o,onClick:c,disabled:a||!l,children:"Connect"})]})]})};function tC(e){let{project:t,supabaseOrgId:s,onProjectSelect:n}=e;return(0,u.jsxs)(h.Xi,{onClick:e=>{e.preventDefault(),n({supabaseOrgId:s,supabaseProjectId:t.id,supabaseProjectName:t.name,supabaseProjectStatus:t.status})},className:"flex cursor-pointer items-center justify-between gap-x-2 py-2",children:[(0,u.jsx)("span",{className:"truncate",children:t.name}),t.status===r.ACTIVE_HEALTHY&&(0,u.jsx)(el.C,{variant:"success",children:"Connect"})]},t.id)}function tE(e){let{projects:t,supabaseOrgId:s,onProjectSelect:n,title:a}=e;return 0===t.length?null:(0,u.jsxs)(u.Fragment,{children:[a&&(0,u.jsx)(h.Ju,{children:a}),t.map(e=>(0,u.jsx)(tC,{project:e,supabaseOrgId:s,onProjectSelect:n},e.id))]})}let tS=e=>{let{supabaseOrgId:t,projects:s,onProjectSelect:n}=e,a=s.filter(e=>e.status===r.ACTIVE_HEALTHY),l=s.filter(e=>e.status!==r.ACTIVE_HEALTHY),i=a.length>0&&l.length>0?"Active projects":null,o=l.length>0&&a.length>0?"Inactive projects":null;return(0,u.jsxs)(u.Fragment,{children:[0===s.length&&(0,u.jsx)(h.Xi,{disabled:!0,className:"py-2",children:"No projects available"}),(0,u.jsx)(tE,{projects:a,supabaseOrgId:t,onProjectSelect:n,title:i}),(0,u.jsx)(tE,{projects:l,supabaseOrgId:t,onProjectSelect:n,title:o})]})},tk=e=>{let{supabaseOrganizations:t,onProjectSelect:s}=e,n=(0,I.DZ)(),{handleConnect:a}=(0,tN.h)(n);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h4",{children:"Connect to a project"}),null==t?void 0:t.map(e=>(0,u.jsxs)(h.Ph,{children:[(0,u.jsxs)(h.kt,{disabled:"failed"===e.status,className:"-mx-2 flex cursor-pointer items-center justify-between",children:[e.name,"failed"===e.status&&(0,u.jsxs)(eh.u,{children:[(0,u.jsx)(eh.aJ,{children:(0,u.jsx)(el.C,{onClick:()=>{a()},variant:"destructive",className:"py-0",children:"Reconnect"})}),(0,u.jsx)(eh._v,{className:"max-w-[200px]",children:"There is an issue connecting to this organization. Click to reconnect your supabase organization."})]})]}),(0,u.jsxs)(h.TG,{className:"max-w-[250px] p-4",children:[(0,u.jsx)("h3",{className:"",children:"Connect to a project"}),e.projects.some(e=>e.status!==r.ACTIVE_HEALTHY)&&(0,u.jsx)("p",{className:"mb-2 text-sm text-muted-foreground",children:"Project not ready? Check the status in Supabase."}),(0,u.jsx)("div",{className:"-mx-2 max-h-[400px] overflow-x-auto overflow-y-scroll scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]",children:(0,u.jsx)(tS,{supabaseOrgId:e.id,projects:e.projects,onProjectSelect:s})}),(0,u.jsx)(h.VD,{}),(0,u.jsx)(h.Xi,{asChild:!0,className:"-mx-2 -mb-2 flex justify-between",children:(0,u.jsxs)(K.default,{href:"https://supabase.com/dashboard/new/".concat(e.id),className:"cursor-pointer",target:"_blank",children:[(0,u.jsx)("span",{className:"",children:"Create new project"}),(0,u.jsx)(f.Z,{name:"open_in_new",size:"small"})]})})]})]},e.id))]})},tP=e=>{let{onShowTutorial:t,setIsDropdownOpen:s,hasSeenTutorial:n,needsAccess:a}=e,r=(0,I.DZ)(),[l,i]=(0,N.useState)(),{supabaseOrganizations:o,isLoading:c,noOrganizations:d}=tw(),m=(0,tv.z)(t_),p=ep(),x=()=>{i(void 0),m(!1)};(0,N.useEffect)(()=>{l?m({dialogProps:{onOpenChange:x,onOpen:()=>{s(!1)}},childProps:{onClose:x,selectedSupabaseProject:l}}):m(!1)},[l]);let{handleConnect:f,isConnecting:j}=(0,tN.h)(r);return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"flex flex-col gap-2",children:[a&&(0,u.jsx)("div",{children:p&&!p.admin?(0,u.jsx)("p",{className:"text-sm text-warning",children:"You don't have the right Supabase access. Please ask the project owner to add you to their Supabase organization. Once added, connect to that Supabase organization using the button below."}):(0,u.jsx)("p",{className:"text-sm text-warning",children:"You don't have access to this Supabase project, connect to the organization that this Supabase project belongs to in order to make edits."})}),(0,u.jsxs)("p",{className:"pb-2 text-sm text-muted-foreground",children:["Connect to add authentication, store data, or call third party APIs."," ",(0,u.jsx)("a",{href:"https://docs.lovable.dev/integrations/supabase/",target:"_blank",rel:"noreferrer",className:"underline",children:"Docs"}),"."]}),c?(0,u.jsx)("div",{className:"flex items-center justify-center",children:(0,u.jsx)(eb.T,{text:"Loading organizations..."})}):(0,u.jsxs)(u.Fragment,{children:[!d&&(0,u.jsx)(tk,{supabaseOrganizations:o,onProjectSelect:e=>{let{supabaseOrgId:t,supabaseProjectId:s,supabaseProjectName:n,supabaseProjectStatus:a}=e;i({supabaseOrgId:t,supabaseProjectId:s,supabaseProjectName:n,supabaseProjectStatus:a})}}),(0,u.jsx)(h.Xi,{asChild:!0,children:(0,u.jsx)(C.z,{onClick:()=>{n?f():t()},disabled:j,className:(0,E.cn)("-mx-2 justify-start",d?"h-8 w-fit cursor-pointer p-0 focus:bg-transparent":"justify-start"),variant:"ghost",children:d?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("img",{src:"/img/connect-supabase/connect-supabase-dark.svg",alt:"Connect to Supabase"})}):(0,u.jsx)("span",{children:"Add another organization"})})})]})]})})};var tA=s(89651);let tI=()=>{let e=(0,I.DZ)(),{isConnecting:t,handleConnect:s}=(0,tN.h)(e);return(0,u.jsx)(P.cZ,{className:"max-w-3xl p-6",children:(0,u.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,u.jsx)(P.$N,{className:"text-lg font-semibold",children:"Connect Supabase"}),(0,u.jsxs)(P.Be,{className:"text-sm text-muted-foreground",children:["Add authentication, store data, or call third party API's. ",(0,u.jsx)("a",{href:"https://docs.lovable.dev/integrations/supabase/",target:"_blank",rel:"noreferrer",className:"underline",children:"Docs"})]}),(0,u.jsx)("div",{className:"aspect-video",children:(0,u.jsx)("iframe",{className:"h-full w-full rounded-lg",src:"https://www.youtube.com/embed/eVHg4wipRrU",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),(0,u.jsxs)("div",{className:"mt-4 flex flex-row items-center gap-2",children:[(0,u.jsxs)("p",{className:"mr-4 text-sm text-muted-foreground",children:["If you're new to Supabase, watch the video or"," ",(0,u.jsx)("a",{href:"https://docs.lovable.dev/integrations/supabase/",target:"_blank",rel:"noreferrer",className:"underline",children:"read the docs"})," ","to ensure your project is ready."]}),(0,u.jsx)(C.z,{onClick:s,disabled:t,className:"flex-0 mb-4 h-[40px] w-[200px] cursor-pointer p-0 focus:bg-transparent",variant:"ghost",children:(0,u.jsx)("img",{src:"/img/connect-supabase/connect-supabase-dark.svg",alt:"Connect to Supabase",className:"h-full w-auto"})})]})]})})};var tO=s(94746);function tR(){return(tR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}var tz=function(e){return tO.createElement("svg",tR({xmlns:"http://www.w3.org/2000/svg",width:109,height:113,fill:"none"},e),l||(l=tO.createElement("path",{fill:"url(#supabase_logo_svg__a)",d:"M63.708 110.284c-2.86 3.601-8.658 1.628-8.727-2.97l-1.007-67.251h45.22c8.19 0 12.758 9.46 7.665 15.874z"})),i||(i=tO.createElement("path",{fill:"url(#supabase_logo_svg__b)",fillOpacity:.2,d:"M63.708 110.284c-2.86 3.601-8.658 1.628-8.727-2.97l-1.007-67.251h45.22c8.19 0 12.758 9.46 7.665 15.874z"})),o||(o=tO.createElement("path",{fill:"#3ECF8E",d:"M45.317 2.071c2.86-3.601 8.657-1.628 8.726 2.97l.442 67.251H9.83c-8.19 0-12.759-9.46-7.665-15.875z"})),c||(c=tO.createElement("defs",null,tO.createElement("linearGradient",{id:"supabase_logo_svg__a",x1:53.974,x2:94.163,y1:54.974,y2:71.829,gradientUnits:"userSpaceOnUse"},tO.createElement("stop",{stopColor:"#249361"}),tO.createElement("stop",{offset:1,stopColor:"#3ECF8E"})),tO.createElement("linearGradient",{id:"supabase_logo_svg__b",x1:36.156,x2:54.484,y1:30.578,y2:65.081,gradientUnits:"userSpaceOnUse"},tO.createElement("stop",null),tO.createElement("stop",{offset:1,stopOpacity:0})))))},tD=e=>{let{projectId:t}=e,s=(0,k.Eh)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.supabase_project_config}),n=(0,k.Eh)(e=>{var t;return!!(null===(t=e.project)||void 0===t?void 0:t.is_supabase_enabled)}),a=(0,k.Eh)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.creation_options.tech_stack}),r=function(e,t){if(e.isLoading||!t||!e.supabaseOrganizations)return!1;if(e.noOrganizations)return!0;let s=e.supabaseOrganizations.find(e=>e.id===t.supabase_organization_id);return!s||"failed"===s.status}(tw(),s),[l,i]=(0,tA.Z)("supabase-tutorial-shown",{defaultValue:!1}),o=(0,tv.z)(tI),c=(0,ew.NL)(),[d,m]=(0,N.useState)(!1);return((0,N.useEffect)(()=>{let e=e=>{e.origin===window.location.origin&&"supabaseAuth"===e.data.type&&(e.data.success?(A.Am.success("Connection Successful",{description:"Your Supabase organization has been linked to your account. Select a project to finish the setup."}),c.invalidateQueries({queryKey:["supabaseOrganizations"]}),o(!1),m(!0)):A.Am.error("Connection Failed",{description:e.data.error||"Failed to connect to Supabase. Please try again."}))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[c,o]),n||a&&"vite_react_shadcn_ts"!==a)?null:(0,u.jsxs)(h.h_,{open:d,onOpenChange:m,children:[(0,u.jsx)(h.$F,{asChild:!0,children:(0,u.jsxs)(C.z,{variant:"muted",size:"sm",className:"flex-shrink-0 gap-1.5",id:"supabase-dropdown-menu-button",children:[(0,u.jsx)(tz,{className:"h-4 w-auto",viewBox:"0 0 109 113"}),(0,u.jsx)("span",{className:"hidden md:flex",children:"Supabase"})]})}),(0,u.jsxs)(h.AW,{className:"z-[1001] min-w-[200px] max-w-[250px] rounded-md border border-border bg-background p-4",alignOffset:2,collisionPadding:8,sideOffset:18,children:[(0,u.jsx)("div",{className:"mb-2 flex items-center justify-between",children:(0,u.jsxs)("h3",{className:"flex items-center gap-2",children:["Supabase",(0,u.jsx)(el.C,{className:"px-1 py-0",children:"Beta"})]})}),(null==s?void 0:s.supabase_project_id)&&!r?(0,u.jsx)(ty,{projectId:t,setIsDropdownOpen:m,supabaseConfig:s}):(0,u.jsx)(tP,{setIsDropdownOpen:m,needsAccess:r,onShowTutorial:()=>{o({childProps:{},dialogProps:{onOpenChange:e=>{e||m(!0)}}}),i(!0)},hasSeenTutorial:l})]})]})};(a=d||(d={})).ADMIN="admin",a.WRITE="write",a.READ="read",a.NONE="none";var tT=s(13673);let tZ=e=>(t,s)=>t.id===e?-1:s.id===e?1:0,tL=()=>{let[e]=(0,x.a)(),t=(0,I.DZ)(),s=(0,ew.NL)();(0,N.useEffect)(()=>()=>{s.refetchQueries({queryKey:["collaborators",t]})},[s,t]);let n=(0,tT.ZP)(e=>e.collaborators),a=(0,N.useMemo)(()=>Object.values(n).sort(tZ(null==e?void 0:e.uid)).filter(e=>e.access_level!==d.NONE),[n,null==e?void 0:e.uid]),r=(0,tT.ZP)(e=>e.collaboratorsInitialized);return(0,u.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,u.jsx)("h4",{className:"text-base font-semibold",children:"People with access"}),r?a.map(e=>(0,u.jsx)(tF,{collaboratorId:e.id,displayName:e.display_name,email:e.email,username:e.username,accessLevel:e.access_level},e.id)):(0,u.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,u.jsx)(Q.O,{className:"mb-1 mt-1 h-[1em] w-full"}),(0,u.jsx)(Q.O,{className:"mb-4 h-[1em] w-3/4"})]})]})},tF=e=>{let{collaboratorId:t,displayName:s,email:n,accessLevel:a,username:r}=e,[l]=(0,x.a)(),i=(0,U.O)(),o=(0,I.DZ)(),c=(0,ew.NL)(),m=(0,M.D)({mutationFn:async e=>{await i.post("/projects/".concat(o,"/collaborators/").concat(e,"/deactivate"))},onSuccess:async()=>{A.Am.success("Collaborator removed successfully"),await c.refetchQueries({queryKey:["collaborators",o]})},onError:()=>{A.Am.error("Failed to remove collaborator")}}),h=(0,N.useCallback)(()=>{m.mutate(t)},[m,t]);return(0,u.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,u.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[(0,u.jsxs)("div",{className:"flex min-w-0 gap-1 text-sm font-medium",children:[(0,u.jsx)(K.default,{href:"/@".concat(r),className:"truncate hover:underline",children:s}),a===d.ADMIN&&(0,u.jsx)("span",{className:"whitespace-nowrap text-muted-foreground",children:"(owner)"}),(null==l?void 0:l.uid)===t&&(0,u.jsx)("span",{className:"whitespace-nowrap text-muted-foreground",children:"(you)"})]}),(0,u.jsx)("div",{className:"truncate text-xs text-muted-foreground",children:n})]}),a!==d.ADMIN&&(0,u.jsx)(eh.pn,{children:(0,u.jsxs)(eh.u,{defaultOpen:!1,children:[(0,u.jsx)(eh.aJ,{asChild:!0,children:(0,u.jsx)(C.z,{disabled:m.isPending,onClick:h,variant:"ghost",size:"icon-sm",className:"ml-auto",children:(0,u.jsx)(f.Z,{name:"delete",size:"small",className:"text-muted-foreground"})})}),(0,u.jsx)(eh._v,{children:(null==l?void 0:l.uid)===t?"Remove yourself from the project":"Remove collaborator"})]})})]})},tU=(0,N.forwardRef)((e,t)=>(0,u.jsx)(C.z,{size:"icon-sm",ref:t,...e,variant:"ghost",children:(0,u.jsx)(f.Z,{name:"content_copy",size:"small"})}));tU.displayName="TriggerComponent";let tH=()=>{let e=(0,U.O)(),t=(0,I.DZ)(),{data:s,isLoading:n}=(0,e_.a)({queryKey:["secret-link-id",t],queryFn:async()=>{let s=await e.get("/projects/".concat(t,"/magic-codes"));return s.length>0&&s[0].id?s[0].id:null}});return(0,u.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,u.jsx)("h4",{className:"text-base font-semibold",children:"Secret Link"}),(0,u.jsx)("p",{className:"subtext text-sm text-muted-foreground",children:"Share your secret link for others to access."}),n?(0,u.jsx)(Q.O,{className:"h-7 w-full"}):s?(0,u.jsx)(tM,{secretLinkId:s}):(0,u.jsx)(tq,{})]})},tM=e=>{let{secretLinkId:t}=e,s=(0,U.O)(),n=(0,I.DZ)(),a=(0,ew.NL)(),r=(0,eP.F)(),{mutate:l,isPending:i}=(0,M.D)({mutationFn:async()=>{await s.post("/projects/".concat(n,"/magic-codes/").concat(t,"/deactivate"))},onSuccess:()=>{a.setQueryData(["secret-link-id",n],null),(0,A.Am)("Secret link deactivated")},onError:()=>{A.Am.error("Failed to deactivate secret link")}}),o=(0,N.useCallback)(()=>{l()},[l]),c=(0,N.useMemo)(()=>t?"".concat(window.location.origin,"/projects/").concat(n,"?magic_link=").concat(t):null,[n,t]);return(0,u.jsxs)("div",{className:"nowrap flex items-center text-muted-foreground",children:[(0,u.jsx)("div",{className:"truncate text-xs",children:c}),(0,u.jsx)(eh.pn,{children:(0,u.jsxs)(eh.u,{defaultOpen:!1,children:[(0,u.jsx)(eh.aJ,{asChild:!0,children:(0,u.jsx)("div",{children:r({TriggerComponent:tU,textToCopy:null!=c?c:""})})}),(0,u.jsx)(eh._v,{children:"Copy secret link"})]})}),(0,u.jsx)(eh.pn,{children:(0,u.jsxs)(eh.u,{defaultOpen:!1,children:[(0,u.jsx)(eh.aJ,{asChild:!0,children:(0,u.jsx)(C.z,{disabled:i,size:"icon-sm",onClick:o,variant:"ghost",children:(0,u.jsx)(f.Z,{name:"delete",size:"small"})})}),(0,u.jsx)(eh._v,{children:"Deactivate secret link"})]})})]})},tq=()=>{let e=(0,U.O)(),t=(0,I.DZ)(),s=(0,ew.NL)(),{mutate:n,isPending:a}=(0,M.D)({mutationFn:async()=>await e.post("/projects/".concat(t,"/magic-codes")),onSuccess:e=>{s.setQueryData(["secret-link-id",t],e.id),(0,A.Am)("Secret link created")},onError:()=>{A.Am.error("Failed to create secret link")}}),r=(0,N.useCallback)(()=>{n()},[n]);return(0,u.jsxs)("button",{className:(0,E.cn)("flex h-7 items-center",a&&"opacity-50"),onClick:r,disabled:a,children:[(0,u.jsx)("span",{className:"text-sm font-medium",children:"Create link"}),(0,u.jsx)(f.Z,{className:"ml-auto mr-1.5 text-muted-foreground",name:"add_link",size:"small"})]})},tV=()=>(0,u.jsxs)(h.h_,{children:[(0,u.jsxs)(eh.u,{children:[(0,u.jsx)(eh.aJ,{asChild:!0,children:(0,u.jsx)(h.$F,{asChild:!0,children:(0,u.jsxs)(C.z,{variant:"muted",size:"sm",className:"flex-shrink-0 gap-1.5",children:[(0,u.jsx)(f.Z,{name:"group_add",size:"small"}),(0,u.jsx)("span",{className:"hidden md:flex",children:"Collaborate"})]})})}),(0,u.jsx)(eh._v,{children:"Collaborate on your project with others"})]}),(0,u.jsxs)(h.AW,{className:"z-[1001] flex w-full max-w-[250px] flex-col gap-4 rounded-md border border-border bg-background p-4",alignOffset:2,collisionPadding:8,sideOffset:18,onCloseAutoFocus:e=>e.preventDefault(),children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"mb-2 flex w-full flex-1 items-center justify-between",children:(0,u.jsx)("h3",{className:"flex w-full items-center",children:"Collaborate"})}),(0,u.jsx)("div",{className:"text-sm text-muted-foreground",children:"Collaborators will use their own credits when editing your project."})]}),(0,u.jsx)(tH,{}),(0,u.jsx)(tL,{})]})]}),tG=(0,N.memo)(function(e){let{projectId:t}=e,s=(0,ea.ye)("collaboration")||!1,n=(0,k.Eh)(e=>e.userProjectPermissions),a=(0,ta.M)(),[r,l]=(0,N.useState)(!1),[i,o]=(0,N.useState)(""),{data:c,refetch:d}=(0,e_.a)({queryKey:["data"],queryFn:()=>a.get("/projects/".concat(t,"/domains")),refetchOnMount:!1,refetchOnWindowFocus:!1});return(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(th,{projectId:t,openDrawer:r,setOpenDrawer:l,highlight:i,customDomains:c||[],refetchDomains:d}),(0,u.jsx)(tD,{projectId:t}),s&&n.admin&&(0,u.jsx)(tV,{}),n.admin&&(0,u.jsx)(eH,{}),(0,u.jsx)(tg,{setOpenDrawer:l,setHighlight:o,customDomains:c,refetchDomains:d})]})}),tB=(0,N.memo)(function(e){let{editNumber:t,commitMessage:s}=e;return(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Previewing"}),(0,u.jsx)(el.C,{variant:"outline",className:"inline-flex gap-1 text-xs",children:(0,u.jsx)("p",{children:s})})]})});var tY=s(52552),tW=s(81004);let tK=(0,N.memo)(function(e){let{activeEdit:t}=e;return(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(tY.k,{}),(0,u.jsx)(tW.q,{activeEdit:t})]})}),tJ=(0,N.memo)(function(e){let{projectName:t,createdBy:s}=e;return(0,u.jsxs)("span",{className:"truncate",children:[(0,u.jsx)("strong",{children:t}),"\xa0by\xa0",(0,u.jsx)(K.default,{href:"/@".concat(s),children:(0,u.jsx)("strong",{children:s})})]})}),t$=(0,N.memo)(function(){let e=(0,k.Eh)(e=>e.setIsRemixDialogOpen),t=(0,k.Eh)(e=>e.userProjectPermissions),s=(0,k.Eh)(e=>e.project),n=!!(null==s?void 0:s.is_supabase_enabled)||!!(null==s?void 0:s.supabase_project_config),a=t.edit||!n,r=(0,N.useCallback)(()=>{e(!0)},[e]);return(0,u.jsxs)(C.z,{className:"flex items-center gap-1",onClick:r,disabled:!a,children:[(0,u.jsx)(f.Z,{name:"shuffle",size:"small"}),"Remix"]})}),tQ=()=>{let e=(0,k.Eh)(e=>e.userProjectPermissions),t=(0,k.Eh)(e=>e.project),s=(0,k.Eh)(e=>e.consoleContentType),n=(0,k.Eh)(e=>e.activeEdit);return(0,N.useMemo)(()=>t?n&&"preview"===s?{center:(0,u.jsx)(tB,{editNumber:n.number,commitMessage:n.commit_message}),right:(0,u.jsx)(tK,{activeEdit:n}),left:e.edit?(0,u.jsx)(D,{}):null}:e.edit?{center:(0,u.jsx)(X,{project:t}),right:(0,u.jsx)(tG,{projectId:t.id}),left:(0,u.jsx)(D,{})}:{center:(0,u.jsx)(tJ,{projectName:t.name,createdBy:t.created_by}),right:(0,u.jsx)(t$,{}),left:null}:{center:null,right:null,left:null},[t,s,n,e])},tX=(0,N.memo)(e=>{let{isSidebarOpen:t,toggleSidebar:s}=e,n=(0,y.useRouter)(),[a,r,l]=(0,w.QJ)(v.I),i=(0,N.useCallback)(async()=>{try{try{await a()}catch(e){}await fetch("/api/logout"),n.replace("/?should-refresh-credentials=1"),n.refresh(),e6.ZP.reset(!0)}catch(e){b.P.error("logout_failed",{error:e})}},[a,n]),o=(0,N.useCallback)(()=>{n.push("/settings")},[n]);(0,_.y1)("ctrl+shift+,; meta+shift+,",o,{splitKey:";"});let{left:c,center:d,right:m}=tQ();return(0,u.jsx)("nav",{className:"flex h-12 w-full shrink-0 items-center px-4",children:(0,u.jsx)(g.Z,{className:"flex w-full shrink-0 items-center",children:(0,u.jsxs)("div",{className:"flex w-full flex-shrink-0 items-center justify-between gap-2",children:[(0,u.jsxs)("div",{className:"flex-basis-0 flex-grow-1 flex flex-shrink-0 items-center gap-2",children:[(0,u.jsx)(j,{handleSignOut:i}),(0,u.jsx)(S,{isSidebarOpen:t,toggleSidebar:s}),c]}),(0,u.jsx)("div",{className:"flex flex-grow justify-center",children:d}),(0,u.jsx)("div",{className:"flex-basis-0 flex-grow-1 flex-shrink-0",children:m})]})})})});tX.displayName="EditorNav";var t0=s(23374);let t1=e=>{let{className:t,...s}=e;return(0,u.jsx)(t0.eh,{className:(0,E.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...s})},t2=t0.s_,t4=e=>{let{tooltip:t,className:s,...n}=e,[a,r]=(0,N.useState)(!1),[l,i]=(0,N.useState)(!1),[o,c]=(0,N.useState)(0),[d,m]=(0,N.useState)(0);return(0,N.useEffect)(()=>{var e;let t;let s=(e=e=>{c(e.clientY)},function(){for(var s=arguments.length,n=Array(s),a=0;a<s;a++)n[a]=arguments[a];clearTimeout(t),t=setTimeout(()=>e.apply(this,n),100)});return window.addEventListener("mousemove",s),()=>{window.removeEventListener("mousemove",s)}},[]),(0,u.jsx)(t0.OT,{className:(0,E.cn)("relative -mr-px mb-[20px] mt-[12px] flex w-[2px] cursor-col-resize items-center justify-center rounded-full transition-colors duration-300 ease-in-out after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 hover:bg-accent focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-panel-group-direction=vertical]>div]:rotate-90",s,a?"bg-accent":""),onDragging:e=>{r(e)},...n,children:t&&(0,u.jsx)(eh.pn,{delayDuration:600,skipDelayDuration:0,children:(0,u.jsxs)(eh.u,{disableHoverableContent:!0,open:!a&&l,onOpenChange:e=>{i(e),e&&m(o)},children:[(0,u.jsx)(eh.aJ,{asChild:!0,children:(0,u.jsx)("div",{className:"absolute -left-[2px] -right-[2px] bottom-0 top-0 z-[12000]"})}),(0,u.jsx)(eh._v,{side:"right",align:"start",alignOffset:d>0?d-68:0,children:t})]})})})};var t5=s(5978);let t3=()=>{let e=(0,I.vp)(),[t,s]=(0,x.a)(),n=null==t?void 0:t.uid,a=(0,k.Eh)(e=>e.setIsProjectCollaborator),r=(0,k.Eh)(e=>e.hasHandledCollaborationInvite);(0,N.useEffect)(()=>{if(!e||!n||s||!r)return;let t=(0,t5.JU)(v.db,"projects/".concat(e,"/collaborators/").concat(n));return(0,t5.cf)(t,e=>{let t=e.data();t&&t.access_level!=d.NONE?a(!0):a(!1)},e=>{b.P.error("PROJECT COLLABORATORS ERROR",{error:e})})},[e,s,n,a,r])};var t6=s(76906);let t7=(0,N.memo)(()=>{let e=(0,tT.ZP)(e=>e.selectedImageUrl),t=(0,tT.ZP)(e=>e.setSelectedImageUrl),s=(0,N.useCallback)(()=>{t(void 0)},[t]),n=(0,N.useCallback)(e=>{e.target===e.currentTarget&&s()},[s]),a=(0,N.useRef)(null);return(0,u.jsx)(P.Vq,{open:void 0!==e,onOpenChange:s,children:(0,u.jsx)(P.cZ,{className:"flex h-screen max-h-[100vh] w-screen max-w-[100vw] items-center justify-center border-none",onClick:n,children:(0,u.jsx)("div",{className:"relative inline-block max-h-[85vh] max-w-[90vw]",ref:a,children:(0,u.jsx)("img",{onLoad:e=>{let t=e.target;t&&a.current&&(a.current.style.aspectRatio="".concat(t.naturalWidth," / ").concat(t.naturalHeight))},className:"h-full w-full object-contain",src:e,alt:"Fullscreen Image"})})})})});t7.displayName="ImagePreviewDialogV2";let t8="magic_link",t9="collaborationInvite",se=()=>{let e=localStorage.getItem(t9);return e?JSON.parse(e):null},st=()=>{let[e,t]=(0,N.useState)(null),[s,n]=(0,N.useState)(!0);return(0,N.useEffect)(()=>{t(se()),n(!1)},[t]),{collaborationInvite:e,loading:s}},ss=()=>{let e=(0,I.vp)(),t=(0,y.useSearchParams)().get(t8);return((0,N.useEffect)(()=>{null!=t&&null!=e&&localStorage.setItem(t9,JSON.stringify({projectId:e,token:t}))},[e,t]),t)?{projectId:e,token:t}:null},sn=()=>{let e=(0,I.vp)(),[t,s]=(0,N.useState)(!0),[n,a]=(0,N.useState)(null),r=ss(),{collaborationInvite:l,loading:i}=st();return(0,N.useEffect)(()=>{if(!n){if((null==r?void 0:r.projectId)===e){a(r.token),s(!1);return}i||((null==l?void 0:l.projectId)===e&&a(l.token),s(!1))}},[n,r,l,e,i]),{collaborationInviteToken:n,loading:t}},sa=()=>{let e=(0,I.vp)(),t=(0,U.O)(),[s,n]=(0,x.a)(),a=(0,y.useRouter)(),r=(0,y.useSearchParams)(),[l,i]=(0,N.useState)(!1),[o,c]=(0,N.useState)(!1),{collaborationInviteToken:d,loading:u}=sn(),m=(0,k.Eh)(e=>e.isProjectCollaborator),h=(0,k.Eh)(e=>e.setHasHandledCollaboratorInvite),p=(0,N.useCallback)(async s=>{try{i(!0),await t.post("/projects/".concat(e,"/magic-codes/").concat(s,"/join")),A.Am.success("Success",{description:"You are now a collaborator of this project"})}catch(e){}finally{localStorage.removeItem(t9);let e=new URLSearchParams(r.toString());e.delete(t8),a.replace("".concat(window.location.pathname,"?").concat(e.toString())),c(!0)}},[t,e,A.Am,a,r,i]),f=!!(d&&!n&&!s),j=m||o||!(n||u)&&!f&&(!s||!d);return(0,N.useEffect)(()=>{!m&&s&&d&&!l&&p(d)},[s,m,p,d,l]),(0,N.useEffect)(()=>{f&&((0,A.Am)("Log in",{description:"You have to log in to join this project"}),a.push("/login?redirect=".concat(window.location.pathname)))},[a,f,A.Am]),(0,N.useEffect)(()=>{j&&h(!0)},[j,h]),j};var sr=s(88746);let sl=e=>(0,u.jsx)(P.Vq,{...e,children:(0,u.jsx)(P.cZ,{className:"py-16 text-center",children:(0,u.jsxs)(P.fK,{children:[(0,u.jsx)(P.$N,{className:"text-center text-2xl",children:"This project has been deprecated."}),(0,u.jsx)("p",{className:"text-center",children:"This project is no longer supported, as it's using Gitlab. Please consider migrating the code to a new GitHub project."})]})})}),si=()=>{let[e,t]=(0,N.useState)(!1);return{GithubRequiredDialog:()=>(0,u.jsx)(P.Vq,{open:e,onOpenChange:t,children:(0,u.jsx)(P.cZ,{className:"sm:max-w-[425px]",children:(0,u.jsxs)(P.fK,{children:[(0,u.jsx)(P.$N,{children:"GitHub Access Required"}),(0,u.jsx)(P.Be,{children:"This action requires GitHub access. Please connect your GitHub account under the GitHub button in the top-right."})]})})}),isOpen:e,open:()=>t(!0),close:()=>t(!1)}};var so=s(99478),sc=s(27410),sd=s(63611),su=s(1188),sm=s(48614),sh=s(64935),sp=s(97459);let sx=(0,N.createContext)(void 0);function sf(e){let{children:t}=e,[s,n]=(0,N.useState)("preview"),a=(0,N.useMemo)(()=>({tab:s,setTab:n}),[s]);return(0,u.jsx)(sx.Provider,{value:a,children:t})}function sj(){let e=(0,N.useContext)(sx);if(!e)throw Error("usePreview must be used within a PreviewProvider");return e}var sg=s(90432),sv=s(31406),sb=s(30166),sy=s(50835),sN=s(23260),sw=s(85755),s_=s(73521);let sC=(0,s(67457).P0)({settings:{background:"hsl(var(--muted))",gutterBackground:"hsl(var(--muted))",fontFamily:"var(--font-roboto-mono)"}}),sE=[(0,sw.eJ)({jsx:!0,typescript:!0}),(0,s_.dy)({autoCloseTags:!0})];var sS=s(15345),sk=s.n(sS),sP=s(91576),sA=s(55214),sI=s.n(sA),sO=s(96139),sR=s(22135);let sz={add_dependency:{icon:"deployed_code",color:"text-green-500"},remove_dependency:{icon:"deployed_code",color:"text-red-500"},delete:{icon:"scan_delete",color:"text-red-500"},delete_directory:{icon:"scan_delete",color:"text-red-500"},edit:{icon:"note_stack",color:"text-yellow-500"},new:{icon:"note_add",color:"text-green-500"},rename:{icon:"swap_horiz",color:"text-blue-500"},rename_directory:{icon:"swap_horiz",color:"text-blue-500"}},sD=["delete","delete_directory","add_dependency","remove_dependency","rename","rename_directory"],sT=e=>{let{filePath:t,oldFilePath:s,operation:n,className:a}=e;return(0,u.jsxs)("div",{className:(0,E.cn)("flex flex-row items-center gap-2 rounded-t-lg bg-transparent font-mono",a,{"rounded-b-lg":sD.includes(n)}),children:[(0,u.jsx)(f.Z,{name:sz[n].icon,className:sz[n].color,size:"small"}),s&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{children:s}),(0,u.jsx)(f.Z,{name:"arrow_right",className:"text-muted-foreground",size:"small"})]}),(0,u.jsx)("span",{children:t})]})},sZ=e=>{let{className:t,...s}=e;return(0,u.jsx)(sT,{...s,className:(0,E.cn)("border border-border px-3 py-2 text-sm font-medium",t)})};var sL=e=>{let{oldContent:t,newContent:s,filePath:n,originalFilePath:a,action:r,unified:l=!1}=e,[i,o]=(0,N.useState)(!0);return(0,u.jsxs)("div",{className:"overflow-hidden rounded-lg border border-border",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)(sZ,{filePath:n,className:"border-none",oldFilePath:a,operation:r}),(0,u.jsx)(C.z,{variant:"ghost",size:"icon-sm",onClick:()=>o(e=>!e),className:"mr-1",children:(0,u.jsx)(sR.Z,{className:(0,E.cn)("size-4 transition-transform duration-200",i?"":"rotate-180")})})]}),(0,u.jsx)(su.E.div,{initial:{height:0},animate:{height:i?"auto":0},exit:{height:0},transition:{duration:.25},children:(0,u.jsx)(sv.ZP,{className:(0,E.cn)(sk().editor,"border-t"),readOnly:!0,theme:sC,extensions:[...sE,sv.tk.editable.of(!1),(0,sO.Z)({original:t,mergeControls:!1})],value:s})})]},n)};function sF(){return(0,u.jsx)("div",{className:"flex flex-col rounded-lg border border-border",children:(0,u.jsx)("div",{className:"flex items-center justify-between p-3",children:(0,u.jsx)("div",{className:"h-3 w-80 animate-pulse rounded bg-muted"})})})}let sU=N.memo(e=>{var t,s;let{activeEdit:n}=e,[a,r]=(0,N.useState)(Math.min(2,(null==n?void 0:null===(t=n.diff)||void 0===t?void 0:t.length)||0)),l=(0,N.useRef)(null);return(0,N.useEffect)(()=>()=>{null!==l.current&&clearTimeout(l.current)},[]),(0,N.useEffect)(()=>{(null==n?void 0:n.diff)&&a<n.diff.length&&(l.current=window.setTimeout(()=>{r(e=>{var t;return Math.min(e+2,(null===(t=n.diff)||void 0===t?void 0:t.length)||0)})},50))},[a,null==n?void 0:n.diff]),(0,u.jsx)("div",{className:"flex flex-col gap-4",children:null==n?void 0:null===(s=n.diff)||void 0===s?void 0:s.map((e,t)=>(0,u.jsx)(N.Fragment,{children:t<a?(0,u.jsx)(sL,{oldContent:e.old_content,newContent:e.new_content,filePath:e.file_path,originalFilePath:e.original_file_path,action:e.action}):(0,u.jsx)(sF,{})},"".concat(e.action,"-").concat(e.file_path,"-").concat(t)))})});sU.displayName="DiffView";var sH=s(61062);let sM=e=>{var t,s,n;let{errors:a,allErrors:r}=e,l=a.find(e=>{var t;return null===(t=e.meta_data)||void 0===t?void 0:t.url}),i=null==l?void 0:null===(t=l.meta_data)||void 0===t?void 0:t.url,o=null==l?void 0:null===(s=l.meta_data)||void 0===s?void 0:s.method,c=null==l?void 0:null===(n=l.meta_data)||void 0===n?void 0:n.origin,d=a.length===r.length?"This":"At least one of these";return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("p",{className:"text-sm",children:[d," is a Cross-Origin Resource Sharing (CORS) error. It means that the HTTP call you made is not allowed by the server. This could be because the server is not configured to accept requests from the client URL. Unfortuantely this is not something that the AI can fix for you since we don't control the server you're trying to communicate with."]}),(0,u.jsx)("p",{className:"text-sm",children:"If you are in control of the server, please configure the server to accept requests from the client URL. If you are not in control of the server, please contact the server administrator to configure the server to accept requests from the client URL. If it's not possible to change the CORS configuration, explore other API services that do allow requests directly from the browser."}),(0,u.jsx)("table",{className:"text-sm",children:(0,u.jsxs)("tbody",{children:[i&&(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"font-bold",children:"URL"}),(0,u.jsx)("td",{children:i})]}),o&&(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"font-bold",children:"Method"}),(0,u.jsx)("td",{children:o})]}),c&&(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"font-bold",children:"Origin"}),(0,u.jsx)("td",{children:c})]})]})})]})},sq=e=>{var t,s,n;let{errors:a,allErrors:r}=e;return a.length!==r.length?(0,u.jsx)("p",{className:"text-sm",children:"At least one of these HTTP calls failed which means that the server or API you're trying to communicate with is not working properly. Unfortunately this is not something that the AI can fix for you since we don't control the server that you're trying to communicate with."}):(0,u.jsxs)("p",{className:"text-sm",children:["This is an HTTP server error which means that the server or API you're trying to communicate with is not working properly.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"Unfortunately this is not something that the AI can fix for you since we don't control the server that you're trying to communicate with.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(null===(t=a[0].meta_data)||void 0===t?void 0:t.url)&&!(null===(s=a[0].meta_data)||void 0===s?void 0:s.status)&&(0,u.jsxs)(u.Fragment,{children:["Please validate that the url"," ",(0,u.jsx)("pre",{className:"inline-block rounded bg-secondary p-1",children:null===(n=a[0].meta_data)||void 0===n?void 0:n.url})," ","is correct."]})]})};var sV=s(42503),sG=s(5707);function sB(e){let{onClick:t,label:s,disabled:n,icon:a}=e;return(0,u.jsx)(sc.Z,{label:s,children:(0,u.jsx)(C.z,{disabled:n,onClick:t,variant:"ghost",size:"sm",children:a&&(0,u.jsx)(f.Z,{name:a,size:"small"})})})}let sY=e=>"string"==typeof e?e:(0,sV.l)((0,sG.K)(e.seconds),new Date),sW=e=>{switch(e){case sH.N.CORS_ERROR:return"CORS error";case sH.N.HTTP_SERVER_ERROR:return"HTTP server error";case sH.N.HTTP_CLIENT_ERROR:return"HTTP client error";case sH.N.SUPABASE_EDGE_FUNCTION_ERROR:return"Supabase edge function error";case sH.N.BUILD:return"Build error";case sH.N.RUNTIME:case sH.N.IMMEDIATE_RUNTIME:return"Runtime error";default:return"Error"}};function sK(e){let{errorId:t,hideFn:s}=e,n=(0,I.vp)(),a=(0,U.O)(),{mutate:r,isPending:l}=(0,M.D)({mutationFn:async()=>{s(),await a.post("/projects/".concat(n,"/handle_error/").concat(t))}});return(0,u.jsx)(sB,{onClick:()=>r(),disabled:l,label:"Dismiss",icon:"close"})}function sJ(e){let{error:t,hideFn:s}=e,n=(0,I.DZ)(),{onClick:a,isPending:r}=(0,sP.hw)({projectId:n,errors:[t]}),l=(0,k.Eh)(e=>e.isSendChatMessageMutationPending),i=(0,k.Eh)(e=>e.setShowConsole);return(0,u.jsx)(sB,{onClick:()=>{i(null),s(),a()},label:"Try to fix this error",icon:"build",disabled:r||l})}let s$=e=>{let{error:t}=e,[s,n]=(0,N.useState)(!1);return s?null:(0,u.jsxs)("div",{className:"mb-4 mt-2",children:[(0,u.jsxs)("div",{className:"flex flex-row items-center justify-between rounded-t-md border-l border-r border-t border-border bg-popover p-2",children:[(0,u.jsxs)("div",{className:"flex flex-row",children:[(0,u.jsx)("p",{className:"mr-2 text-sm",children:sW(t.type)}),(0,u.jsx)("p",{className:"text-sm text-muted-foreground",children:sY(t.created_at)})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)(sJ,{error:t,hideFn:()=>{n(!0)}}),(0,u.jsx)(sK,{errorId:t.id,hideFn:()=>{n(!0)}})]})]}),(0,u.jsx)(sP.UL,{errors:[t],roundedTop:!1})]})},sQ=e=>{let{errors:t}=e;if(!sP.t6[t[0].type])return null;let s=[...t].sort((e,t)=>t.created_at.seconds-e.created_at.seconds),n=s.filter(e=>e.type===sH.N.CORS_ERROR),a=s.filter(e=>e.type===sH.N.HTTP_SERVER_ERROR);return(0,u.jsxs)(u.Fragment,{children:[n.length>0&&(0,u.jsx)(sM,{errors:n,allErrors:t}),a.length>0&&(0,u.jsx)(sq,{errors:a,allErrors:t}),t.map(e=>(0,u.jsx)(s$,{error:e},e.id))]})},sX=()=>{let e=(0,k.Eh)(e=>e.activeConsoleErrorContent),t=(0,I.vp)();if(!t)throw Error("Project ID is required and should always be set here");return e?(0,u.jsx)(sQ,{errors:e,projectId:t}):(b.P.error("No errors to display, this probably shouldn't happen"),null)},s0=(0,sb.default)(()=>s.e(346).then(s.bind(s,20346)).then(e=>e.ConsoleDebug),{loadableGenerated:{webpack:()=>[20346]},loading:()=>(0,u.jsx)("div",{className:"flex h-full items-center justify-center",children:"Loading debug view..."})}),s1=[sN.Z],s2={code(e){let{node:t,className:s,children:n}=e;return/language-(\w+)/.exec(s||"")?(0,u.jsx)("div",{className:"max-w-full overflow-x-auto",children:(0,u.jsx)(sv.ZP,{readOnly:!0,value:String(n).replace(/\n$/,""),className:(0,E.cn)("flex-1 overflow-y-auto",sk().editor),theme:sC,extensions:sE})}):(0,u.jsx)("span",{className:"rounded bg-muted px-1.5 py-0.5 font-mono text-sm",children:n})}},s4=e=>{let{part:t}=e;if("content"in t)return"file_path"in t?(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)(sZ,{filePath:t.file_path,operation:"new"}),(0,u.jsx)("div",{className:"overflow-hidden rounded-b-lg border-x border-b",children:(0,u.jsx)(sv.ZP,{value:t.content,className:(0,E.cn)("flex-1 overflow-y-auto",sk().editor),theme:sC,basicSetup:{foldGutter:!1,foldKeymap:!1},extensions:sE})})]}):(0,u.jsx)(sy.U,{className:"prose prose-zinc prose-markdown mb-2 max-w-full dark:prose-invert ".concat(sI().customProse," prose-h1:mb-2 prose-h1:text-xl prose-h1:font-bold prose-h2:text-lg prose-h2:font-bold prose-h3:text-base prose-h3:font-bold prose-pre:my-2 prose-ol:my-2 prose-ul:my-2 prose-li:my-0"),remarkPlugins:s1,components:s2,children:t.content});if("search_replace_parts"in t)return(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)(sZ,{filePath:t.file_path,operation:"edit"}),(0,u.jsx)("div",{className:"rounded-b-lg border-x border-b",children:t.search_replace_parts.map((e,t)=>(0,u.jsxs)("div",{className:"mb-1 p-2",children:[(0,u.jsxs)("div",{className:"mb-1 flex text-sm text-muted",children:[(0,u.jsx)("span",{className:"flex-1",children:"Search"}),(0,u.jsx)("span",{className:"flex-1",children:"Replace"})]}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)(sv.ZP,{value:e.search,className:(0,E.cn)("flex-1 overflow-y-auto",sk().editor),theme:sC,extensions:sE}),(0,u.jsx)(sv.ZP,{value:e.replace,className:(0,E.cn)("flex-1 overflow-y-auto",sk().editor),theme:sC,extensions:sE})]})]},t))})]});if("file_path"in t)return(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsx)(sZ,{filePath:t.file_path,operation:"delete"})});if("original_file_path"in t)return(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsx)(sZ,{filePath:t.new_file_path,oldFilePath:t.original_file_path,operation:"rename"})});if("dependency"in t)return(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsx)(sZ,{filePath:t.dependency,operation:"add_dependency",className:"rounded-lg"})});if("removed_dependency"in t)return(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsx)(sZ,{filePath:t.removed_dependency,operation:"remove_dependency",className:"rounded-lg"})});if("error_message"in t)return(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsxs)("div",{className:"flex items-center rounded-lg border border-warning p-3 text-sm font-medium",children:[(0,u.jsx)(f.Z,{name:"warning",className:"mr-2 text-warning",size:"small"}),(0,u.jsx)("span",{children:t.error_message})]})});return null},s5=()=>{var e;let t=(0,k.Eh)(e=>e.activeConsoleErrorContent),s=(0,k.Eh)(e=>e.consoleContentType),n=(0,I.vp)(),a=(0,sg.qV)({projectId:null!=n?n:"",errorIds:null!==(e=null==t?void 0:t.map(e=>e.id))&&void 0!==e?e:[],setErrors:()=>{}});if("error"!==s||!(null==t?void 0:t.length)||!n)return null;let r=(0,sP.Sv)(t);return(0,u.jsx)("div",{className:"flex flex-row items-start",children:r.map((e,s)=>{let r=sP.cb[e];return(0,u.jsx)(r,{errors:t,primary:0===s,projectId:n,handleErrorMutation:a},e)})})},s3=e=>{var t;let{scrollContainerRef:s}=e,n=(0,k.Eh)(e=>e.activeConsoleCodeContent),a=(0,k.Eh)(e=>e.codeViewType),r=(0,k.Eh)(e=>e.activeEdit),l=(0,N.useRef)(null),i=(0,N.useRef)(),o=(0,N.useRef)(!0),c=(0,N.useRef)(!1),d=(0,N.useCallback)(()=>{if(s.current){let{scrollTop:e,scrollHeight:t,clientHeight:n}=s.current;o.current=t-e-n<10}},[s]),m=(0,N.useCallback)(e=>{e.deltaY<0?c.current=!0:c.current=!1},[]),h=(0,N.useCallback)(()=>{c.current=!0},[]),p=(0,N.useCallback)(()=>{c.current=!1},[]);return((0,N.useEffect)(()=>{let e=s.current;return e&&(e.addEventListener("scroll",d),e.addEventListener("wheel",m),e.addEventListener("touchstart",h),e.addEventListener("touchend",p)),()=>{e&&(e.removeEventListener("scroll",d),e.removeEventListener("wheel",m),e.removeEventListener("touchstart",h),e.addEventListener("touchend",p))}},[s,d,m,h,p]),(0,N.useEffect)(()=>{var e,t,n;i.current!==(null===(e=s.current)||void 0===e?void 0:e.scrollHeight)&&(i.current=null===(t=s.current)||void 0===t?void 0:t.scrollHeight,o.current&&!c.current&&(null===(n=l.current)||void 0===n||n.scrollIntoView({behavior:"auto"})))},[n,s]),a===k.es.DIFF)?(0,u.jsx)(sU,{activeEdit:r},null==r?void 0:r.id):(0,u.jsxs)(u.Fragment,{children:[n&&(null===(t=n.parts)||void 0===t?void 0:t.length)>0?n.parts.map((e,t)=>(0,u.jsx)(s4,{part:e},t)):null,(0,u.jsx)("div",{ref:l})]})},s6=()=>{let e=(0,k.Eh)(e=>e.activeEdit),t=(0,k.Eh)(e=>e.project),s=(0,N.useMemo)(()=>{if(e&&t)return(0,t6.t)({projectId:null==t?void 0:t.id,sha:e.commit_sha})},[e,t]);return(0,u.jsx)("iframe",{id:"preview-panel",src:"".concat(s,"?forceHideBadge=true"),allow:"accelerometer; autoplay; camera; encrypted-media; fullscreen; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; payment; usb; vr; xr-spatial-tracking; screen-wake-lock; magnetometer; ambient-light-sensor; battery; gamepad; picture-in-picture; display-capture; bluetooth;",className:"min-h-full w-full flex-grow"})},s7=e=>{let{scrollContainerRef:t}=e;switch((0,k.Eh)(e=>e.consoleContentType)){case"error":return(0,u.jsx)(sX,{});case"code":return(0,u.jsx)(s3,{scrollContainerRef:t});case"preview":return(0,u.jsx)(s6,{});case"debug":return(0,u.jsx)(s0,{});default:return(0,u.jsx)("p",{className:"mt-4 text-center",children:"Click on a code chip in the chat to inspect the code output."})}};var s8=()=>{let e=(0,k.Eh)(e=>e.consoleContentType),t=(0,N.useRef)(null);return(0,u.jsx)("div",{className:(0,E.cn)("absolute inset-0 z-50 overflow-y-auto rounded-b-none bg-background p-4 pb-10",{"p-0":"preview"===e}),ref:t,children:(0,u.jsx)(s7,{scrollContainerRef:t})})},s9=s(1266),ne=s(32489),nt=s(63420),ns=s(10407),nn=s(69658);function na(e){var t;let{node:s,setCurrentFile:n,currentFile:a,level:r}=e,[l,i]=(0,N.useState)(r<1),o=null===(t=s.children)||void 0===t?void 0:t.sort((e,t)=>"directory"===e.type&&"directory"!==t.type?-1:"directory"!==e.type&&"directory"===t.type?1:e.name.localeCompare(t.name));return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:(0,E.cn)("group flex cursor-pointer items-center px-2 py-1 text-sm hover:bg-primary/25",a===s.path&&"!bg-accent/50"),onClick:()=>{"directory"===s.type?i(!l):n(s.path)},role:"button",tabIndex:0,children:[(0,u.jsx)("div",{className:"mr-1 flex-shrink-0",style:{marginLeft:16*r},children:"directory"===s.type?l?(0,u.jsx)(ef.Z,{className:"h-4 w-4"}):(0,u.jsx)(ns.Z,{className:"h-4 w-4"}):null}),"directory"!==s.type&&(0,u.jsx)("div",{className:"mr-1 h-4 w-4 flex-shrink-0",children:(0,u.jsx)(nn.Z,{className:"h-4 w-4"})}),(0,u.jsx)("span",{className:"truncate",children:s.name})]}),"directory"===s.type&&l&&o&&(0,u.jsx)("div",{children:o.map(e=>(0,u.jsx)(na,{node:e,setCurrentFile:n,currentFile:a,level:r+1},e.path))})]})}function nr(e){let{setCurrentFile:t,code:s,currentFile:n}=e,a=(function(e){let t=[];return e.forEach(e=>{let[s]=e,n=s.split("/"),a=t;n.forEach((e,t)=>{let s=t===n.length-1,r=a.find(t=>t.name===e),l=n.slice(0,t+1).join("/");if(r)s||(a=r.children);else{let t={name:e,path:l,type:s?"file":"directory",...s?{}:{children:[]}};a.push(t),s||(a=t.children)}})}),t})(s).sort((e,t)=>"directory"===e.type&&"directory"!==t.type?-1:"directory"!==e.type&&"directory"===t.type?1:e.name.localeCompare(t.name));return(0,u.jsx)("div",{className:"overflow-x-auto p-2",children:a.map(e=>(0,u.jsx)(na,{node:e,setCurrentFile:t,currentFile:n,level:0},e.path))})}let nl={history:s9.cE},ni=["tailwind.config.lov.json","package-lock.json","bun.lockb","vite-env.d.ts"],no=(e,t)=>e.filter(e=>{let[s]=e;return!ni.some(e=>s.includes(e))&&(!t||s.toLowerCase().includes(t.toLowerCase()))}),nc=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=(0,ta.M)(),{data:n}=(0,e_.a)({queryKey:["sourceCode"],queryFn:()=>s.get("/projects/".concat(e,"/source-code")),enabled:t});return(0,N.useMemo)(()=>{var e;return null==n?void 0:null===(e=n.files)||void 0===e?void 0:e.filter(e=>{let{binary:t}=e;return!t}).map(e=>{let{name:t,contents:s}=e;return[t,s]})},[n])};function nd(e){let{projectId:t}=e,{code:s,syncCode:n,enableServer:a,hasInitialCode:r}=(0,nt.v)(),[l,i]=(0,N.useState)(null),[o,c]=(0,N.useState)({}),[d,m]=(0,N.useState)(!1),h=nc(t,!r),p=(0,N.useMemo)(()=>r?s:h,[h,r,s]),x=null==p?void 0:p.length;(0,N.useEffect)(()=>{if(l||!x)return;let e=null==p?void 0:p.find(e=>{let[t,s]=e;return t.endsWith("pages/Index.tsx")});e&&i(e[0])},[x]);let f=(0,k.Nk)(e=>e.experimentalFeatures.codeEditor);(0,N.useEffect)(()=>{f&&a()},[f,a]);let j=(0,N.useMemo)(()=>{var e;if(l)return l in o?o[l]:null==p?void 0:null===(e=p.find(e=>{let[t,s]=e;return t===l}))||void 0===e?void 0:e[1]},[p,l,o]),[g,v]=(0,N.useState)(""),b=(0,N.useMemo)(()=>no(null!=p?p:[],g),[p,g]),[y,w]=(0,N.useState)([]),[_,S]=(0,N.useState)({});(0,N.useEffect)(()=>{l&&!y.includes(l)&&w([...y,l])},[l,y]);let P=e=>{l&&c(t=>({...t,[l]:e}))},{setTab:I}=sj(),O=(0,N.useCallback)(async()=>{m(!0);try{await n(o,{commitMessage:"Code edited in Lovable Code Editor"}),c({}),A.Am.success("Changes saved"),I("preview")}finally{m(!1)}},[o,I,n]),R=Object.keys(o).length>0;return(0,u.jsxs)("div",{className:"relative flex h-full w-full",children:[(0,u.jsxs)("div",{className:"w-64 flex-shrink-0 flex-grow-0 overflow-y-auto border-r border-border",children:[(0,u.jsx)("div",{className:"p-2",children:(0,u.jsx)(F.I,{placeholder:"Search",value:g,onChange:e=>v(e.target.value)})}),x?(0,u.jsx)(nr,{setCurrentFile:i,currentFile:l,code:b}):(0,u.jsx)("div",{className:"flex items-center justify-center pb-16",children:(0,u.jsx)("p",{className:"text-sm text-muted-foreground",children:"Waiting for Sandbox to start..."})}),(0,u.jsx)("div",{className:"pb-12"})]}),(0,u.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden bg-muted p-0",children:[(0,u.jsx)(ek.mQ,{value:l||"",onValueChange:i,className:(0,E.cn)({hidden:!l}),children:(0,u.jsx)(ek.dr,{className:"h-auto w-full justify-start overflow-x-auto rounded-none bg-background pb-0 scrollbar-hide",children:y.map(e=>(0,u.jsxs)(ek.SP,{value:e,className:"group relative rounded-none border-r px-2 pl-3 data-[state=active]:!bg-muted-active data-[state=active]:text-foreground hover:bg-muted/50","data-state":l===e?"active":"inactive",children:[(0,u.jsx)("span",{children:e}),(0,u.jsx)("button",{onClick:t=>{t.stopPropagation(),t.preventDefault(),w(y.filter(t=>t!==e)),l===e&&i(y.find(t=>t!==e)||null)},className:"ml-2 opacity-0 transition-opacity group-hover:opacity-100 group-data-[state=active]:opacity-100",children:(0,u.jsx)(ne.Z,{className:"size-4"})})]},e))})}),(0,u.jsx)("div",{className:(0,E.cn)("flex w-full flex-1 overflow-y-auto bg-muted",sk().editor),children:l&&(0,u.jsx)(sv.ZP,{readOnly:!f,initialState:_[l]?{json:_[l],fields:nl}:void 0,onChange:(e,t)=>{if(l){let e=t.state.toJSON(nl);S(t=>({...t,[l]:e}))}P(e)},value:j,className:"flex-1 overflow-y-auto pb-12",theme:sC,extensions:[...sE,sv.tk.editable.of(!!f)]},l)})]}),f?(0,u.jsx)(sm.M,{children:R&&(0,u.jsxs)(su.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},className:"absolute bottom-0 left-0 right-0 flex items-center justify-between border-t border-border bg-background p-3",children:[(0,u.jsx)("div",{className:"text-sm text-muted-foreground",children:"You have unsaved changes"}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)(C.z,{variant:"ghost",size:"sm",onClick:()=>{c({})},disabled:d,children:"Discard"}),(0,u.jsx)(C.z,{variant:"default",size:"sm",onClick:O,loading:d,disabled:d,children:"Save changes"})]})]})}):(0,u.jsx)("div",{className:"absolute bottom-0 left-0 right-0 flex w-full items-center justify-between border-t border-border bg-background p-3",children:(0,u.jsx)("div",{className:"w-full text-center text-sm text-muted-foreground",children:"Here you can view the code. If you want to make changes, set up sync with Github."})})]})}var nu=s(61563),nm=s(96771);let nh=e=>{let{diffAvailable:t}=e,s=(0,k.Eh)(e=>e.codeViewType),n=(0,k.Eh)(e=>e.setCodeViewType),a=(0,k.Eh)(e=>e.activeEdit);return(0,u.jsxs)(nu.t,{className:"ml-auto",type:"single",variant:"outline",value:s,defaultValue:k.es.RAW,onValueChange:e=>e&&n(e),children:[(null==a?void 0:a.type)!==nm.I.type.REVERT&&(0,u.jsx)(nu.G,{size:"sm",value:k.es.RAW,children:"Raw"}),(0,u.jsx)(nu.G,{size:"sm",disabled:!t,value:k.es.DIFF,children:"Diff"})]})},np=e=>{let{projectId:t,errors:s,allErrors:n,setErrors:a,canAIFix:r}=e,{onClick:l,isPending:i}=(0,sP.hw)({projectId:t,errors:n}),o=(0,k.Eh)(e=>e.consoleContentType),[c,d]=(0,N.useState)(!1),[m,h]=(0,N.useState)(!1),p=(0,k.Eh)(e=>e.isSendChatMessageMutationPending),x=(0,k.Eh)(e=>e.setShowConsole),j=(0,k.Eh)(e=>null!==e.consoleContentType),g=(0,k.Eh)(e=>e.setConsoleErrorContent),v=(0,sg.qV)({projectId:t,errorIds:s.map(e=>e.id),setErrors:a});return(0,N.useEffect)(()=>{s&&0!==s.length?d(!0):d(!1)},[s]),(0,u.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 overflow-hidden",style:{height:"100%"},children:(0,u.jsx)("div",{className:"pointer-events-auto absolute bottom-0 left-1/2 mb-4 -translate-x-1/2 transform shadow-lg transition-all duration-500 ease-in-out ".concat(c?"translate-y-0 opacity-100":"translate-y-full opacity-0"),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:(0,u.jsxs)(eu.Zb,{className:"p-1",children:[(0,u.jsx)(eu.aY,{className:"p-4",children:(0,u.jsx)("div",{className:"flex w-full flex-col items-start justify-start",children:(0,u.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,u.jsxs)("div",{className:"flex items-start gap-4",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"mb-1 flex",children:[(0,u.jsx)(f.Z,{name:"warning",size:"large",className:"mr-2 text-warning"}),(0,u.jsx)("p",{className:"text-m font-bold",children:"Error"})]}),(0,u.jsx)("div",{className:"flex flex-col",children:(0,u.jsx)("p",{className:"text-sm text-muted-foreground",children:sP.v7[s[0].type]})})]}),(0,u.jsxs)("div",{className:"flex-basis-0 flex min-w-[110px] flex-shrink flex-wrap justify-end gap-2",children:[r&&(0,u.jsx)(so.z,{variant:"default",className:"w-full max-w-[110px] justify-evenly py-1",onClick:()=>{a([]),l()},disabled:i||p||j,hotkey:"F",showHotkey:!0,children:"Try to fix"}),(0,u.jsx)(so.z,{variant:"outline",className:"w-full max-w-[110px] justify-evenly py-1",onClick:()=>{g(n),x("error"===o?null:"error")},hotkey:"L",showHotkey:!0,children:"Show logs"})]})]})})})}),m&&(0,u.jsx)("div",{className:"absolute right-0 top-0",children:(0,u.jsx)(C.z,{variant:"ghost",size:"icon",onClick:()=>{v.mutate()},className:"h-6 w-6",children:(0,u.jsx)(ne.Z,{className:"h-4 w-4"})})})]})})})},nx=e=>{let{projectId:t}=e,{errors:s,setErrors:n}=(0,sg.hT)({projectId:t}),a=null==s?void 0:s.filter(e=>!e.message_id);if(!a||0===a.length||!s)return null;let r=(0,sP.Sv)(a).includes(sP.eX.AI_FIX);return(0,u.jsx)(np,{projectId:t,allErrors:s,errors:a,setErrors:n,canAIFix:r})},nf=()=>{let e=(0,I.vp)();return e?(0,u.jsx)(nx,{projectId:e}):(b.P.error("projectId is not defined, this should not happen"),null)},nj=e=>{let{children:t}=e;return(0,u.jsxs)(u.Fragment,{children:[t,(0,u.jsx)(nf,{})]})};var ng=s(97226),nv=s(51817),nb=s(11594);let ny=[{icon:"dock_to_right",text:"Chat with AI in the sidebar"},{icon:"location_searching",text:"Select specific elements to modify"},{icon:"imagesmode",text:"Upload images as a reference"},{icon:"preview",text:"Instantly preview your changes"},{icon:"school",text:"Set custom knowledge for every edit"},{icon:"database",text:"Connect Supabase for backend"},{icon:"code_blocks",text:"Collaborate at source, via GitHub"},{icon:"globe",text:"Deploy when you're ready"}],nN=e=>{let{text:t="Setting up..."}=e,s=(0,N.useRef)(null);return(0,N.useEffect)(()=>{let e=s.current;if(!e)return;let t=()=>{e.style.transform="translateY(0)"};return e.addEventListener("animationiteration",t),()=>e.removeEventListener("animationiteration",t)},[]),(0,u.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-8",children:[(0,u.jsx)(m.default,{src:"/img/lovable.svg",alt:"lovable logo",width:100,height:100}),(0,u.jsx)("span",{children:t}),(0,u.jsxs)("div",{className:"w-100 relative mx-auto h-48 overflow-hidden rounded-lg bg-muted/50",children:[(0,u.jsx)("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-10 h-12 bg-gradient-to-b from-muted to-transparent"}),(0,u.jsx)("div",{ref:s,className:"animate-slide-up",children:[...ny,...ny].map((e,t)=>(0,u.jsxs)("div",{className:"flex items-center gap-3 p-4 transition-colors",children:[(0,u.jsx)(f.Z,{name:e.icon,className:"h-5 w-5 text-muted-foreground"}),(0,u.jsx)("span",{className:"text-muted-foreground",children:e.text})]},t))}),(0,u.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 z-10 h-12 bg-gradient-to-t from-muted to-transparent"})]})]})},nw=e=>{let{refetch:t,description:s,isLoading:n}=e,[a,r]=(0,N.useState)(!1);return(0,u.jsxs)("div",{className:"bg-navy-900 flex h-full w-full flex-col items-center justify-center",children:[(0,u.jsx)(ng.Z,{className:"mb-4 text-foreground",size:48}),(0,u.jsx)("h1",{className:"mb-6 text-2xl text-foreground",children:s}),a||n?(0,u.jsxs)(C.z,{variant:"default",className:"w-48",disabled:!0,children:[(0,u.jsx)("span",{className:"mr-2",children:"Starting"}),(0,u.jsx)(nv.Z,{className:"h-4 w-4 animate-spin"})]}):(0,u.jsx)(C.z,{variant:"default",className:"w-48",onClick:async()=>{r(!0);try{await t()}catch(e){b.P.error("ERROR STARTING DEVSERVER",{error:e})}},children:"Start project"})]})},n_=e=>{var t;let{children:s,projectId:n,baseUrl:a,shouldDisplayDeployPreview:r,justStarted:l}=e,{refetch:i,isLoading:o,data:c,error:d,isFetching:m}=(0,nb.i)({projectId:n,enabled:!1,userInitiated:!0}),[h,p]=(0,N.useState)("starting"),[x,f]=(0,N.useState)(!1),j=(0,k.Eh)(e=>e.shouldShowTipsAndTricksOnDevServerStart),g=(0,N.useRef)(!1);(0,N.useEffect)(()=>{j&&(g.current=!0)},[j]),(0,N.useEffect)(()=>{"starting"!==h&&g.current&&!j&&(g.current=!1)},[h,j]);let{status:v,initialized:y,error:w}=function(e,t){let[s,n]=(0,N.useState)(!1),{data:a,isLoading:r,error:l,isStale:i}=(0,e_.a)({queryKey:["devserverStatus",e],enabled:t,staleTime:23e4,queryFn:async()=>{try{let t=new AbortController,s=setTimeout(()=>t.abort(),3e3);try{let s=await fetch("".concat(e,"/_sandbox/dev-server"),{signal:t.signal}),n=await s.json();return b.P.debug("devserver_status_from_api",{state:null==n?void 0:n.state,initialized:null==n?void 0:n.initialized}),{state:null==n?void 0:n.state,initialized:null==n?void 0:n.initialized}}finally{clearTimeout(s)}}catch(e){throw e instanceof Error&&(e.message.includes("NetworkError")||e.message.includes("operation was aborted"))&&b.P.debug("devserver_error_from_api",{error:e}),e}},refetchInterval:s?6e4:1e3,refetchIntervalInBackground:!1});return(0,N.useEffect)(()=>{i||(null==a?void 0:a.state)!=="started"?n(!1):n(!0)},[i,null==a?void 0:a.state]),{status:i?"unknown":(null==a?void 0:a.state)||null,initialized:(null==a?void 0:a.initialized)||null,isLoading:r,error:l}}(a,!!a&&(null==c?void 0:null===(t=c.status)||void 0===t?void 0:t.sandbox)=="started"),_=(0,ew.NL)();if((0,N.useEffect)(()=>{"ready"==h&&w&&!x&&(_.invalidateQueries({queryKey:["devServer",n]}),_.removeQueries({queryKey:["devserverStatus",a]}),f(!0))},[x,w,m,h]),(0,N.useEffect)(()=>{x&&f(!1)},[x,c,d]),(0,N.useEffect)(()=>{var e;let t=(null==c?void 0:null===(e=c.status)||void 0===e?void 0:e.sandbox)||"starting",s=h;x?s="starting":"unknown"===v?s="starting":"error"==t||d?s="sandbox_error":"starting"===t?s="starting":"started"===t&&(s="error"===v?"devserver_error":"started"===v?"ready":"starting"),h!==s&&p(s)},[o,v,w,c,d,x]),(j||g.current)&&"starting"==h)return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"flex flex-grow items-center justify-center bg-muted",children:(0,u.jsx)(nN,{text:"Spinning up preview..."})})});if("ready"==h||"starting"==h||r)return(0,u.jsxs)("div",{className:"relative flex flex-grow flex-col",children:[s,(0,u.jsx)(sm.M,{children:"starting"===h&&!r&&(0,u.jsx)(su.E.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:20,stiffness:300},className:"pointer-events-none absolute bottom-0 left-0 right-0 flex items-center justify-center pb-2",children:(0,u.jsx)(eu.Zb,{className:"pointer-events-auto bg-muted p-4 px-6",children:(0,u.jsx)(eu.aY,{className:"p-0",children:(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)(nv.Z,{className:"h-5 w-5 animate-spin text-foreground"}),(0,u.jsx)("p",{className:"text-sm text-foreground",children:"Spinning up Sandbox..."})]})})})})})]});if("starting"==h)return(0,u.jsx)("div",{className:"relative flex flex-grow flex-col",children:s});if("sandbox_error"!=h&&"devserver_error"!=h)return b.P.error("unexpected mode",{mode:h,devServerStatus:status,startSandboxResp:c}),(0,u.jsx)(u.Fragment,{children:s});{b.P.debug("devserver_not_running",{status:v,initialized:y});let e="sandbox_error"==h?"Could not start sandbox machine":"Could not start dev server";return(0,u.jsx)(nw,{refetch:i,description:e,isLoading:o})}},nC=e=>{let{children:t,device:s,className:n}=e,a=(0,N.useMemo)(()=>"mobile"===s?{width:"375px",height:"100%"}:{width:"100%",height:"100%"},[s]);return(0,u.jsx)("div",{className:(0,E.cn)("flex flex-col transition-all ease-in-out",n),style:{width:a.width,height:a.height},children:t})},nE=[{name:"mobile",title:"Switch to mobile preview mode",icon:"phone_iphone",description:"Enter mobile preview mode"},{name:"desktop",title:"Switch to desktop preview mode",icon:"laptop_mac",description:"Enter desktop preview mode"}],nS=e=>{let{onChange:t,value:s}=e,n=nE[(nE.findIndex(e=>e.name===s)+1)%nE.length];return(0,u.jsxs)(eh.u,{children:[(0,u.jsx)(eh.aJ,{asChild:!0,children:(0,u.jsx)(C.z,{className:"hidden gap-1.5 md:flex",variant:"ghost",size:"icon-sm",onClick:()=>{t(n.name)},children:(0,u.jsx)(f.Z,{name:n.icon,size:"small"})})}),(0,u.jsx)(eh._v,{side:"bottom",children:n.title})]})};var nk=s(2925),nP=e=>{let{onRefresh:t,url:s,urlToDisplay:n,pages:a}=e,r=(0,nk.u)(e=>e.setCurrentPage),l="";if(s)try{l=new URL(s).pathname,"/"===l[0]&&(l=l.substring(1)),"/"===l.trim()&&(l="index")}catch(e){}return(0,N.useEffect)(()=>{r(l||"index")},[l,r]),(0,u.jsx)(u.Fragment,{children:a?(0,u.jsxs)("div",{className:"flex items-center gap-[4px] px-1.5 text-sm",children:[(0,u.jsx)("p",{className:"hidden text-sm font-medium text-muted-foreground @sm:flex",children:n}),(0,u.jsx)("p",{className:"hidden text-sm font-medium text-muted-foreground @sm:flex",children:"/"}),(0,u.jsxs)(h.h_,{children:[(0,u.jsx)(h.$F,{asChild:!0,children:(0,u.jsxs)("div",{className:"flex cursor-pointer items-center hover:opacity-75",children:[(0,u.jsx)("p",{className:"text-sm font-medium",children:l||"index"}),(0,u.jsx)(f.Z,{name:"keyboard_arrow_down",className:"relative top-[1px] h-4 w-4"})]})}),(0,u.jsx)(h.AW,{className:"max-h-[600px] min-w-[200px] overflow-y-auto bg-background",align:"start",collisionPadding:8,sideOffset:20,alignOffset:-40,children:a.map(e=>(0,u.jsxs)(h.bO,{onClick:()=>{if(!s)return;let n=new URL(s);n.pathname=e.path,t(n.toString()),r(e.name)},className:"flex flex-col items-start gap-0",checked:e.path.substring(1)===l,children:[e.name,(0,u.jsx)("span",{className:"text-xs text-muted-foreground",children:e.path})]},e.path))})]})]}):(0,u.jsx)("p",{className:"hidden px-1.5 text-sm @sm:flex",children:(0,u.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:n})})})};let nA=e=>{var t;let{openGithubRequiredDialog:s}=e,n=(0,k.Eh)(e=>e.exitConsole),a=(0,k.Eh)(e=>e.activeEdit),r=(0,k.Eh)(e=>e.project),{tab:l="chat"}=(0,y.useParams)(),{setTab:i}=sj();return(0,u.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,u.jsxs)(so.z,{variant:"ghost",size:"sm",onClick:()=>{n(),i("preview")},className:"flex items-center gap-2",hotkey:"esc",showHotkey:!0,hotkeyOptions:{enableOnFormTags:!0},children:[(0,u.jsx)(f.Z,{name:"chevron_left",size:"small"}),"Exit"]}),(null==a?void 0:a.commit_sha)&&(0,u.jsx)(so.z,{variant:"ghost",size:"sm",onClick:()=>{var e,t;let n=(0,er._J)((null==r?void 0:r.github_repo_name)||"",a.commit_sha||"",null==r?void 0:null===(e=r.github_owner)||void 0===e?void 0:e.name);if((null==r?void 0:null===(t=r.github_owner)||void 0===t?void 0:t.name)===er.aR){s();return}n&&window.open(n,"_blank")},hotkey:"G",showHotkey:!0,children:"View on GitHub"}),"chat"===l&&(0,u.jsx)(nh,{diffAvailable:!!(null==a?void 0:null===(t=a.diff)||void 0===t?void 0:t.length)}),(0,u.jsx)(s5,{})]})},nI=e=>{let{handleRefresh:t,iframeUrl:s,baseSandboxUrl:n,pages:a,device:r,setDevice:l}=e,i=(0,k.Eh)(e=>e.userProjectPermissions),o=(0,k.Eh)(e=>e.project),c=(0,k.Eh)(e=>e.customScript),d=(0,k.Eh)(e=>e.setCustomScript),{tab:m,setTab:h}=sj(),p=(0,k.Nk)(e=>e.experimentalFeatures.codeEditor)?"Dev mode":"Code viewer";return(0,u.jsxs)("div",{className:"flex w-full items-center justify-between gap-2 @container",children:[(0,u.jsx)("div",{className:"flex items-center gap-2",children:!!i.edit&&(0,u.jsxs)(eh.u,{delayDuration:100,children:[(0,u.jsx)(eh.aJ,{asChild:!0,children:(0,u.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,u.jsx)(sd.Z,{"aria-label":p,pressed:"code"===m,onPressedChange:e=>h(e?"code":"preview"),className:(0,E.cn)("h-7 rounded-lg bg-primary/10 p-px hover:bg-primary/[0.15]","code"===m&&"bg-affirmative hover:bg-affirmative/75"),size:"sm",children:(0,u.jsx)("div",{className:"relative h-full w-10",children:(0,u.jsx)(su.E.div,{className:"absolute flex aspect-square h-full items-center justify-center rounded-lg bg-muted",animate:{right:"code"===m?0:"unset",left:"preview"===m?0:"unset"},transition:{duration:.2,type:"spring"},children:(0,u.jsx)(sh.Z,{className:"size-4"})})})})})}),(0,u.jsx)(eh._v,{children:p})]})}),(0,u.jsx)(nP,{onRefresh:t,url:s,urlToDisplay:(null==o?void 0:o.name)&&(0,ed.P)((0,t6.t)({projectName:o.name})).replace(/\/+$/,""),pages:a}),(0,u.jsx)("div",{className:"flex items-center gap-2",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(sc.Z,{label:"Open preview in new tab",children:(0,u.jsx)("a",{href:(null==o?void 0:o.name)?(0,t6.t)({projectName:null==o?void 0:o.name}):"#",target:"_blank",rel:"noreferrer",onClick:e=>{e.altKey&&n&&(e.preventDefault(),window.open(n,"_blank"))},children:(0,u.jsx)(C.z,{variant:"ghost",size:"icon-sm",children:(0,u.jsx)(f.Z,{name:"open_in_new",size:"small"})})})}),(0,u.jsx)(nS,{value:r,onChange:l}),(0,u.jsx)(sc.Z,{label:"Refresh page",children:(0,u.jsx)(C.z,{variant:"ghost",size:"icon-sm",onClick:()=>t(),children:(0,u.jsx)(f.Z,{name:"refresh",size:"small"})})}),c&&(0,u.jsx)(sc.Z,{label:"Override script to ".concat("http://localhost:8081/gptengineer.js"),children:(0,u.jsx)(C.z,{variant:"ghost",size:"icon-sm",onClick:()=>d(!c),className:(0,E.cn)(c&&"bg-accent"),children:(0,u.jsx)(f.Z,{name:"code",size:"small"})})})]})})]})};function nO(e){let{handleRefresh:t,iframeUrl:s,baseSandboxUrl:n,preview:a,projectId:r,devServerEnabled:l}=e,{open:i,GithubRequiredDialog:o}=si(),{edits:c}=(0,sp.U)({projectId:r}),[d,m]=(0,N.useState)("desktop"),h=(0,N.useMemo)(()=>{var e,t;return null!==(t=null==c?void 0:null===(e=c.findLast(e=>e.pages))||void 0===e?void 0:e.pages)&&void 0!==t?t:void 0},[c]),p=(0,k.Eh)(e=>e.consoleContentType),{tab:x,setTab:f}=sj();return(0,N.useEffect)(()=>{p?f("console"):f("preview")},[f,p]),(0,u.jsxs)("div",{className:"flex flex-grow flex-col",children:[(0,u.jsx)(o,{}),(0,u.jsx)("div",{className:"flex h-12 w-full items-center justify-between overflow-hidden rounded-t-xl border border-b-0 border-border bg-muted px-3",children:"console"===x?(0,u.jsx)(nA,{openGithubRequiredDialog:i}):(0,u.jsx)(nI,{handleRefresh:t,iframeUrl:s,baseSandboxUrl:n,pages:h,device:d,setDevice:m})}),(0,u.jsxs)("div",{className:"relative mb-2 flex flex-grow flex-col items-center overflow-hidden rounded-b-xl border",children:[(0,u.jsx)("div",{className:"flex h-full w-full flex-grow items-center justify-center",children:(0,u.jsx)(nC,{device:d,className:"justify-center",children:(0,u.jsx)("div",{className:"relative flex min-h-full w-full flex-grow overflow-auto",children:(0,u.jsx)(n_,{baseUrl:null!=n?n:null,projectId:r,shouldDisplayDeployPreview:!l,justStarted:c.length<2,children:(0,u.jsx)(nj,{children:a})})})})}),(0,u.jsxs)(sm.M,{mode:"wait",children:["console"===x&&(0,u.jsx)(su.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 z-10 bg-background",children:(0,u.jsx)(s8,{})},"console"),"code"===x&&(0,u.jsx)(su.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 z-10 flex bg-background",children:(0,u.jsx)(nd,{projectId:r})},"code")]})]})]})}let nR=e=>{let t=(0,k.Eh)(e=>e.project),s=(0,k.Eh)(e=>e.userProjectPermissions),n=!!(null==t?void 0:t.is_supabase_enabled)||!!(null==t?void 0:t.supabase_project_config),a=s.edit||!n;return(0,u.jsx)(P.Vq,{...e,children:(0,u.jsxs)(P.cZ,{className:"py-16 text-center",children:[(0,u.jsx)(P.fK,{children:(0,u.jsx)(P.$N,{className:"flex items-center justify-center gap-2 text-center text-2xl",children:e.isRemixing?(0,u.jsxs)(u.Fragment,{children:["Remixing the project",(0,u.jsx)(nv.Z,{size:20,className:"animate-spin"})]}):"Remix the project"})}),e.isRemixing?(0,u.jsx)("p",{children:"Stay put while we are setting it up!"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{children:"By remixing a project, you will create a copy that you own."}),!a&&(0,u.jsx)("p",{className:"text-destructive",children:"You do not have permission to remix this project because it uses Supabase."}),(0,u.jsxs)(C.z,{disabled:!a,onClick:e.onRemix,className:"mt-4 flex items-center gap-1",children:[(0,u.jsx)(f.Z,{name:"shuffle",size:"small"}),"Remix"]})]})]})})};var nz=s(98507);let nD=e=>{let{open:t,onOpenChange:s,setOpen:n,projectId:a,projectName:r,githubOwner:l}=e,{installations:i}=(0,eO.D)(),{repoAccessibilityResponse:o,refetchRepoAccessibility:c}=(0,nz.C)(a),d=(0,N.useMemo)(()=>{if(!l||!i)return null;let e=i.find(e=>l.name===e.account.login);return e?e.html_url:null},[l,i]),[h,p]=(0,N.useState)(!1);return(0,N.useEffect)(()=>{c()},[c]),(0,N.useEffect)(()=>{o&&("repo_accessible"===o.accessibility?n(!1):h||(n(!0),p(!0)))},[o,n,h,p]),(0,u.jsx)(P.Vq,{open:t,onOpenChange:s,children:(0,u.jsxs)(P.cZ,{children:[(0,u.jsx)(P.fK,{children:(0,u.jsx)(P.$N,{className:"text-2xl",children:"We can't access your repository"})}),(()=>{switch(null==o?void 0:o.accessibility){case"repo_not_accessible":return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"text-l",children:"If you want to keep using Lovable to improve your project:"}),(0,u.jsxs)("ol",{className:"mt-4 list-inside list-decimal",children:[(0,u.jsxs)("li",{children:["Go to the"," ",d?(0,u.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:"GitHub App settings"}):(0,u.jsx)("strong",{children:" GitHub App settings"})]}),(0,u.jsxs)("li",{children:["Grant ",(0,u.jsx)("strong",{children:"Repository access"})," to"," ",l&&r?(0,u.jsxs)("strong",{children:[l.name,"/",r]}):(0,u.jsx)("strong",{children:"your project"}),"."]})]}),(0,u.jsx)(nT,{appSettingsUrl:d})]});case"installation_not_found":return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("p",{className:"text-l",children:["We couldn't find the Lovable GitHub app installation for your"," ",(null==l?void 0:l.type)==="Organization"?"organization":"account",". To resolve this issue, please connect the GitHub app again."]}),(0,u.jsx)("div",{className:"mt-4 flex justify-center",children:(0,u.jsx)(C.z,{className:"ml-2",size:"lg",onClick:()=>{(0,eI.yA)((0,eI.Mw)(l))},children:"Install GitHub App"})})]});case"unauthorized":return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"text-l",children:"We don't have the necessary permissions to access your repository."}),(0,u.jsx)(eD.q,{})]});case"installation_suspended":return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("p",{className:"text-l",children:["The GitHub app installation for your"," ",(null==l?void 0:l.type)==="Organization"?"organization":"account"," ","has been suspended."," ",d?(0,u.jsxs)(u.Fragment,{children:["To resolve this issue, visit your"," ",(0,u.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:"GitHub App settings"})," ","and unsuspend the Lovable GitHub app installation."]}):(0,u.jsx)(u.Fragment,{children:"Please navigate to your GitHub App settings and unsuspend the Lovable app installation. You can find it under your GitHub account or organizationâ€™s settings."})]}),(0,u.jsx)(nT,{appSettingsUrl:d})]});case"repo_not_found":return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"text-l",children:"We couldn't find the specified repository in your GitHub account. Please reach out to us on Discord for further assistance:"}),(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)(C.z,{variant:"outline",asChild:!0,children:(0,u.jsxs)("a",{href:"https://discord.gg/lovable-dev",target:"_blank",title:"Join the Discord server",className:"flex items-center gap-2",children:[(0,u.jsx)("span",{children:"Talk to us on Discord"}),(0,u.jsx)(m.default,{width:24,height:24,src:"/img/discord.svg",alt:"Discord"})]})})})]});default:return null}})()]})})},nT=e=>{let{appSettingsUrl:t}=e;return(0,u.jsx)("div",{className:"mt-4 flex justify-center",children:t&&(0,u.jsx)(C.z,{className:"ml-2",size:"lg",onClick:()=>{window.open(t,"_blank")},children:"App settings"})})};var nZ=s(83856),nL=s(9476),nF=s(94875),nU=s(43206),nH=s(95098);let nM=e=>{let{projectId:t,project:s}=e,{repoInaccessibleDialogOpen:n,setRepoInaccessibleDialogOpen:a}=(0,nt.v)();return(0,u.jsx)(nD,{open:n,onOpenChange:a,setOpen:a,projectId:t,projectName:null==s?void 0:s.name,githubOwner:null==s?void 0:s.github_owner})},nq=e=>{let{children:t,projectId:s,baseSandboxUrl:n,iframeBaseUrl:a,devServerEnabled:r,refreshPreview:l,preview:i,iframeUrl:o}=e,c=(0,y.useRouter)(),[d,m]=(0,N.useState)(!0),h=(0,k.Eh)(e=>e.isRemixDialogOpen),p=(0,k.Eh)(e=>e.setIsRemixDialogOpen),x=(0,k.Eh)(e=>e.isSomeRevertMutationPending),f=(0,nk.u)(e=>e.currentPage),j=(0,k.Eh)(e=>e.project);(0,N.useEffect)(()=>{(null==j?void 0:j.name)&&(document.title="".concat(j.name," - Lovable"))},[null==j?void 0:j.name]);let g=(0,k.Eh)(e=>e.userProjectPermissions),v=(0,N.useRef)(null),w=(0,nU.Z)("md"),C=(0,N.useCallback)(()=>{m(!1)},[]),S=(0,N.useCallback)(()=>{m(!0)},[]),P=(0,N.useCallback)(()=>{m(!d)},[d]);(0,_.y1)("mod+b",e=>{e.preventDefault(),P()},{enableOnFormTags:!0},[P]);let{mutate:A,isPending:I}=(0,nL.o)({onSubmit:()=>p(!0)}),O=(0,N.useCallback)(e=>{A({projectId:s,chatMessage:e})},[A,s]),R=(0,N.useCallback)(e=>{l(e)},[l]);(0,N.useEffect)(()=>{x&&"index"===f&&R("".concat(a))},[f,R,x,a]);let z=(0,k.Eh)(e=>e.reset),D=(0,tT.ZP)(e=>e.reset);return(0,N.useEffect)(()=>()=>{window.location.pathname.startsWith("/projects/".concat(s))||(b.P.info("Clearing editor state, since route changed to: ".concat(window.location.pathname)),z(),D(),nZ.QE.length=0)},[z,D,s]),(0,u.jsxs)("div",{className:"flex h-dvh flex-col",children:[(0,u.jsx)("div",{className:"sticky top-0 z-50 w-full",children:(0,u.jsx)(nF.E,{})}),(0,u.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col bg-background",children:[(0,u.jsx)(sr.Y,{}),(0,u.jsx)(tv.RootDialog,{}),j&&!j.git_on_s3&&!j.is_github&&(0,u.jsx)(sl,{open:!0,onOpenChange:()=>c.push("/")}),g.edit&&j&&(0,u.jsx)(nM,{projectId:s,project:j}),(0,u.jsx)(nR,{onRemix:O,isRemixing:I,open:h,onOpenChange:p}),(0,u.jsx)(tX,{isSidebarOpen:d,toggleSidebar:P}),(0,u.jsxs)("main",{className:"relative isolate flex min-h-0 flex-1",ref:v,children:[w&&(0,u.jsxs)("div",{className:"flex min-h-0 flex-1 px-2 md:hidden",children:[(0,u.jsx)(em.dy,{open:d,onOpenChange:e=>m(e),direction:"left",container:v.current,modal:!0,repositionInputs:!1,children:(0,u.jsxs)(em.sc,{className:"absolute inset-y-0 bottom-0 left-0 right-auto h-full min-w-[308px] border-l-0 focus:outline-none",showCloseButton:!1,onOpenAutoFocus:e=>e.preventDefault(),autoFocus:!1,"aria-describedby":void 0,onPointerDownOutside:e=>{let t=v.current,s=e.target;(null==t?void 0:t.contains(s))||e.preventDefault()},overlayProps:{className:"absolute"},children:[(0,u.jsx)(nH.T,{children:(0,u.jsx)(em.iI,{children:"Chat panel"})}),t]})}),(0,u.jsx)(nO,{handleRefresh:R,iframeUrl:null!=o?o:"",baseSandboxUrl:null!=n?n:null,preview:i,projectId:s,devServerEnabled:r})]}),!w&&(0,u.jsx)("div",{className:"hidden min-h-0 flex-1 md:flex",children:(0,u.jsxs)(t1,{direction:"horizontal",className:"relative flex min-h-0 flex-1 flex-row",children:[(0,u.jsx)(t2,{collapsible:!0,onExpand:S,onCollapse:C,defaultSize:30,collapsedSize:0,className:(0,E.cn)("relative inset-y-0 z-40 mr-0 flex h-full min-h-0 overflow-x-hidden bg-background",d?"min-w-[308px]":"w-0 max-w-0"),children:t}),(0,u.jsx)(t4,{className:"z-[10000] ml-2",tooltip:"Drag to resize"}),(0,u.jsx)(t2,{minSize:15,defaultSize:70,className:"relative flex flex-1 flex-col pr-2",id:"preview-panel",children:(0,u.jsx)(nO,{handleRefresh:R,iframeUrl:null!=o?o:"",baseSandboxUrl:null!=n?n:null,preview:i,projectId:s,devServerEnabled:r})})]})})]}),(0,u.jsx)(t7,{})]})]})};function nV(e){var t,s;let{children:n}=e,{project_id:a}=(0,y.useParams)(),r=(0,k.Eh)(e=>e.userProjectPermissions),l=(0,k.Eh)(e=>e.isProjectLoaded),i=(0,k.Eh)(e=>e.customScript),[o,c]=(0,N.useState)(!1),{data:d}=(0,nb.i)({projectId:a,enabled:r.edit&&o}),{edits:m}=(0,sp.U)({projectId:a}),h=(0,N.useRef)(m.length);(0,N.useEffect)(()=>{m.length!==h.current&&r.edit&&c(!0),h.current=m.length},[m.length,r]);let p=(0,N.useRef)(""),x=(0,nb.N)(),f=o&&x.url?x.url:null!==(s=null==d?void 0:d.url)&&void 0!==s?s:null,[j,g]=(0,N.useState)(a?(0,t6.t)({projectId:a}):"");(0,N.useEffect)(()=>{let e=async()=>{if(!o&&j)try{let e=await fetch(j,{method:"HEAD"});200!==e.status&&c(!0)}catch(e){c(!0)}};j!==p.current&&(e(),p.current=j)},[j,o]),(0,N.useEffect)(()=>{f&&g(f)},[f]);let{preview:v,refresh:b,url:w}=(0,nZ.uL)({baseUrl:j,hidden:!l,projectId:a,useCustomScript:i});sa(),t3(),(0,I.PY)(),ep(),(0,ev.dO)(a);let[_,C]=(0,N.useState)(!0);return(0,N.useEffect)(()=>{var e;o&&((null===(e=x.status)||void 0===e?void 0:e.checked_at)&&!_?b():C(!1))},[null===(t=x.status)||void 0===t?void 0:t.checked_at,_,o]),(0,u.jsx)(eh.pn,{delayDuration:550,children:(0,u.jsx)(nt.P,{baseSandboxUrl:f,refreshPreview:b,setDevServerEnabled:c,children:(0,u.jsx)(sf,{children:(0,u.jsx)(nq,{projectId:a,baseSandboxUrl:f,iframeBaseUrl:j,devServerEnabled:o,refreshPreview:b,preview:v,iframeUrl:w,children:n})})})})}},4310:function(e,t,s){"use strict";s.d(t,{_J:function(){return r},aR:function(){return n},c_:function(){return a}}),s(57437),s(62869),s(57346);let n="GPT-Engineer-App",a=(e,t)=>"https://github.com/".concat(t||n,"/").concat(e),r=(e,t,s)=>"".concat(a(e,s),"/commit/").concat(t)},95670:function(e,t,s){"use strict";var n=s(57437),a=s(55721),r=s(57346),l=s(94508),i=s(33145),o=s(27648);t.Z=e=>{let{title:t,iconName:s,imageSrc:c,onClick:d,internalHref:u,externalHref:m,className:h,iconClassName:p}=e,x=(0,n.jsxs)(n.Fragment,{children:[s&&(0,n.jsx)(r.Z,{name:s,className:"shrink-0 text-muted-foreground ".concat(p)}),c&&(0,n.jsx)(i.default,{alt:"icon",src:c,width:"14",height:"14"}),(0,n.jsx)("span",{className:"truncate text-primary",children:t})]});return(0,n.jsx)(a.Xi,{className:(0,l.cn)("flex items-center gap-2 rounded-sm px-2 py-2 text-sm",h),asChild:!0,children:u?(0,n.jsx)(o.default,{href:u,children:x}):m?(0,n.jsxs)("a",{href:m,target:"_blank",rel:"noopener noreferrer",children:[x,(0,n.jsx)(r.Z,{name:"open_in_new",className:"ml-auto h-4 w-4 text-muted-foreground"})]}):(0,n.jsx)("div",{onClick:()=>{d&&d()},children:x})})}},19125:function(e,t,s){"use strict";var n=s(57437),a=s(94508),r=s(92451),l=s(10407),i=s(2265),o=s(62869);t.Z=i.memo(e=>{let{children:t,showScrollButtonsInitially:s=!1,className:c}=e,[d,u]=(0,i.useState)(!1),[m,h]=(0,i.useState)(s),[p,x]=(0,i.useState)(s),f=m||p,j=(0,i.useRef)(null),g=()=>{if(!j.current)return;let{scrollLeft:e,scrollWidth:t,clientWidth:s}=j.current;h(e>0),x(e<t-s)};return(0,i.useEffect)(()=>{u(!0),g()},[t]),(0,i.useEffect)(()=>(window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}),[]),(0,n.jsxs)("div",{className:(0,a.cn)("relative flex max-w-full gap-1",c),children:[f&&(0,n.jsx)(o.z,{variant:"ghost",size:"sm",className:"px-1",disabled:!d||!m,onClick:e=>{e.preventDefault(),j.current&&j.current.scrollTo({behavior:"smooth",left:j.current.scrollLeft-.8*j.current.clientWidth})},children:(0,n.jsx)(r.Z,{className:"self-center",size:"1.2em"})}),(0,n.jsx)("div",{ref:j,onScroll:g,className:"w-full overflow-x-auto whitespace-nowrap scrollbar-hide",children:t}),f&&(0,n.jsx)(o.z,{variant:"ghost",size:"sm",className:"px-1",disabled:!p,onClick:e=>{e.preventDefault(),j.current&&j.current.scrollTo({behavior:"smooth",left:j.current.scrollLeft+.8*j.current.clientWidth})},children:(0,n.jsx)(l.Z,{className:"self-center",size:"1.2em"})})]})})},29550:function(e,t,s){"use strict";s.d(t,{F:function(){return x}});var n=s(57437),a=s(1673),r=s(57346),l=s(26815),i=s(74991),o=s(25134),c=s(99376),d=s(29461),u=s(67150),m=s(97050),h=s(26110);function p(){return(0,n.jsxs)(h.cZ,{className:"max-h-[90vh] overflow-y-auto md:max-w-7xl",children:[(0,n.jsx)(h.fK,{children:(0,n.jsx)(h.$N,{className:"text-2xl",children:"Upgrade to Pro and unlock more features & usage"})}),(0,n.jsx)(m.Z,{plans:u.o9})]})}let x=e=>{let{visibility:t,setVisibility:s,onClick:u,disabled:m,className:h,customPrivateDescription:x,customPublicDescription:f,redirectToSubscription:j=!1}=e,g=(0,o.d)(),v=(0,d.z)(p),b=(0,c.useRouter)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.E,{className:h,disabled:m,defaultValue:"public",value:t,onValueChange:e=>{s(e)},children:[(0,n.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,n.jsx)(i.m,{value:"public",id:"public",onClick:()=>{null==u||u()}}),(0,n.jsxs)(l._,{htmlFor:"public",className:"flex w-full cursor-pointer flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,n.jsx)(r.Z,{size:"small",name:"globe",className:"text-muted-foreground"}),"Public"]}),f||(0,n.jsx)("span",{className:"text-xs leading-normal text-muted-foreground",children:"Anyone can view and remix"})]})]}),(0,n.jsxs)("div",{className:"flex w-full items-start space-x-2",children:[(0,n.jsx)(i.m,{value:"private",id:"private",onClick:e=>{g?null==u||u():(e.preventDefault(),j?b.push("/settings/plans"):v({childProps:{}}))}}),(0,n.jsxs)(l._,{htmlFor:"private",className:"flex w-full cursor-pointer flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,n.jsx)(r.Z,{size:"small",name:"lock",className:"text-muted-foreground"}),"Private",(0,n.jsx)(a.v,{plan:"Starter"})]}),x||(0,n.jsx)("span",{className:"text-xs leading-normal text-muted-foreground",children:"Build and deploy in private"})]})]})]})})}},93435:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(57437),a=s(62869),r=s(108),l=s(94508);function i(e){let{label:t,className:s,variant:i}=e,{createPortalSession:o,isCreatePortalSessionLoading:c,checkoutLoading:d}=(0,r.m)();return(0,n.jsx)(a.z,{variant:i,className:(0,l.cn)("min-h-10",s),onClick:o,loading:c,disabled:!!d,children:t})}},74129:function(e,t,s){"use strict";s.d(t,{U:function(){return y}});var n=s(57437),a=s(25134),r=s(66070),l=s(49340),i=s(94508),o=s(35974),c=s(57346),d=s(62869),u=s(108),m=s(73400),h=s(67150),p=s(93435);let x=e=>{let{plan:t}=e,[s,r]=(0,l.a)(),{userData:o}=(0,a.v)(),c=(null==o?void 0:o.plan)===t.id,{checkoutLoading:h,isCreatePortalSessionLoading:x,toCheckout:j}=(0,u.m)();if(r)return null;if(t.id===m.n.plan.ENTERPRISE){var g,v,b,y,N;return(0,n.jsx)("a",{className:(0,i.cn)((0,d.d)({variant:"default"}),"min-h-10 w-full"),href:"https://antonosika.typeform.com/to/pT3rZYw0#email=".concat(null!==(N=null!==(y=null==s?void 0:s.email)&&void 0!==y?y:null==s?void 0:null===(b=s.firebase)||void 0===b?void 0:null===(v=b.identities)||void 0===v?void 0:null===(g=v.email)||void 0===g?void 0:g[0])&&void 0!==N?N:"xxxxx"),target:"_blank",children:"Contact us"})}return s?c&&t.canManagePlan?(0,n.jsx)(p.Z,{className:"w-full",label:"Manage subscription"}):t.stripeCheckoutData?(0,n.jsx)(d.z,{className:"min-h-10 w-full",variant:"default",onClick:()=>j({userId:null==s?void 0:s.uid,plan:t}),disabled:!!h||x,loading:h===t.id,children:f(t,null==o?void 0:o.plan)}):null:(0,n.jsx)("a",{className:(0,i.cn)((0,d.d)({variant:"default"}),"min-h-10 w-full"),href:"/signup?redirect=/settings/plans",children:"Try now"})},f=(e,t)=>{var s,n;if(e.ctaOverride)return e.ctaOverride;let a=t&&null!==(s=h.qZ[t])&&void 0!==s?s:-1,r=null!==(n=h.qZ[e.id])&&void 0!==n?n:0;return"".concat(r>a?"Upgrade":"Downgrade"," to ").concat(e.name)};var j=s(94132),g=s.n(j),v=s(53647),b=s(2265);function y(e){let{plan:t,fullWidth:s}=e,[d]=(0,l.a)(),{userData:u,isInitialized:m}=(0,a.v)(),[h,p]=(0,b.useState)(Array.isArray(t.planOptions)?t.planOptions[0]:t.planOptions);(0,b.useEffect)(()=>{if((null==u?void 0:u.plan)&&Array.isArray(t.planOptions)){let e=t.planOptions.find(e=>e.id===u.plan);e&&p(e)}},[null==u?void 0:u.plan]);let f=(null==u?void 0:u.plan)===h.id;return(0,n.jsxs)(r.Zb,{className:(0,i.cn)("bg-background",s&&"col-span-full",s&&"mx-auto max-w-2xl"),children:[(0,n.jsxs)(r.Ol,{className:"flex flex-col gap-4",children:[(0,n.jsxs)(r.ll,{className:(0,i.cn)("flex flex-wrap items-center gap-x-2 text-lg font-bold",g().className),children:[t.icon&&(0,n.jsx)(c.Z,{name:t.icon,size:"small",className:"text-muted-foreground"}),h.name.toUpperCase(),f&&(0,n.jsx)(o.C,{className:"text-xs font-normal",variant:"default",children:"Active"})]}),(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[h.price>0?(0,n.jsxs)("span",{children:["$",null==h?void 0:h.price," "]}):void 0,t.priceSuffix&&(0,n.jsx)("span",{className:"text-lg font-normal text-muted-foreground",children:t.priceSuffix})]}),Array.isArray(t.planOptions)&&(0,n.jsx)(N,{planOptions:t.planOptions,setSelectedPlanOption:p,selectedPlanOption:h}),(0,n.jsx)(r.SZ,{className:"mt-4 text-sm font-medium text-muted-foreground",children:t.description})]}),t.features.length>0&&(0,n.jsxs)(r.aY,{className:(0,i.cn)("space-y-2 text-xs","flex flex-col gap-2"),children:[t.features.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-start gap-1",children:[(0,n.jsx)(c.Z,{name:"check_small",className:"-ml-2 text-muted-foreground"}),(0,n.jsx)("span",{children:e})]},t)),(0,n.jsx)("div",{className:"w-[50ch] opacity-0"})]}),(0,n.jsxs)(r.eW,{className:"mt-auto flex-col px-0 pb-4",children:[(0,n.jsx)("div",{className:"mt-8"}),(0,n.jsx)(x,{plan:h})]})]})}let N=e=>{let{planOptions:t,selectedPlanOption:s,setSelectedPlanOption:a}=e;return(0,n.jsxs)(v.Ph,{onValueChange:e=>{let s=t.find(t=>t.id===e);s&&a(s)},value:s.id,children:[(0,n.jsx)(v.i4,{className:"bg-card",children:(0,n.jsx)(v.ki,{placeholder:"Select a plan"})}),(0,n.jsx)(v.Bw,{children:t.map(e=>(0,n.jsx)(v.Ql,{value:e.id,onClick:()=>a(e),children:e.dropdownLabel||e.price},e.id))})]})}},97050:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(57437),a=s(93435),r=s(74129),l=s(108);function i(e){let{plans:t,showInvoiceButton:s=!1}=e;return(0,n.jsxs)(l.q,{children:[s&&(0,n.jsx)(a.Z,{variant:"link",label:"To Billing and Invoices"}),(0,n.jsx)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-".concat(Math.min(t.length,4)),children:null==t?void 0:t.map(e=>(0,n.jsx)(r.U,{plan:e},e.id))}),(0,n.jsx)("div",{className:"mt-8 text-center text-sm text-muted-foreground",children:"100 GB free hosting bandwidth included per month during beta."})]})}},108:function(e,t,s){"use strict";s.d(t,{m:function(){return c},q:function(){return d}});var n=s(57437),a=s(2265),r=s(36710),l=s(21288),i=s(46214);let o=(0,a.createContext)(void 0),c=()=>{let e=(0,a.useContext)(o);if(!e)throw Error("useSubscription must be used within a SubscriptionProvider");return e},d=e=>{let{children:t}=e,s=(0,r.O)(),[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),h=async e=>{let{plan:t,userId:n}=e;if(!t.stripeCheckoutData){l.P.error("plan_missing_stripe_checkout_data",{plan:t});return}if(i.ZP.capture("credit_plan_checkout_clicked"),!n){l.P.error("user_id_not_found");return}try{var a;d(t.id);let e=new URL(window.location.href),n=new URL("".concat(window.location.origin,"/purchase-success"));"/profile/plans"===window.location.pathname?n.searchParams.set("redirect","".concat(window.location.origin,"/")):n.searchParams.set("redirect",e.href);let r={product_id:t.stripeCheckoutData.stripeProductId,quantity:t.stripeCheckoutData.quantity,cancel_url:e.href,client_reference_id:null===(a=window.Rewardful)||void 0===a?void 0:a.referral},l=await s.post("/stripe/checkout",r);window.location.assign(l.url)}catch(e){l.P.error("error_creating_checkout_session",{error:e})}finally{d(!1)}},p=async()=>{try{m(!0);let e={return_url:window.location.href},t=await s.post("/stripe/create-portal-session",e);window.location.assign(t.url)}catch(e){l.P.error("error_creating_portal_session",{error:e})}finally{m(!1)}};return(0,n.jsx)(o.Provider,{value:{checkoutLoading:c,isCreatePortalSessionLoading:u,toCheckout:h,createPortalSession:p},children:t})}},67150:function(e,t,s){"use strict";s.d(t,{EA:function(){return I},o9:function(){return P},qZ:function(){return S},K:function(){return k},dv:function(){return c},D:function(){return A},ZN:function(){return u}});var n=s(57437);let a={CREDITS:{PRODUCT_ID:"prod_PBz7dgcoojSzVk"},OLD_PRO:{PRODUCT_ID:"prod_OtayqnnNbMxjpg"},STARTER:{PRODUCT_ID:"prod_RATAhoODy1Kbsn"},LAUNCH:{PRODUCT_ID:"prod_RAT9OebuvgB9ur"},SCALE_1:{PRODUCT_ID:"prod_RM6vrOL5DeHYgr"},SCALE:{PRODUCT_ID:"prod_RATAg5DUEdbkr4"},SCALE_3:{PRODUCT_ID:"prod_RM6wsb37tx0R2i"},SCALE_4:{PRODUCT_ID:"prod_RM6wsXmA4a0acz"},SCALE_5:{PRODUCT_ID:"prod_RM6wwDaeC6NikJ"},SCALE_6:{PRODUCT_ID:"prod_RM6xlLog0ySaSu"},SCALE_7:{PRODUCT_ID:"prod_RM6x95NN4Uw4Ne"}};if(!Object.values(a).every(e=>e.PRODUCT_ID))throw Error("All stripe products must have a product id");var r=s(73400),l=s(57346),i=s(57054),o=s(27648);let c=30,d=e=>{let{label:t,tooltip:s}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{children:t}),(0,n.jsxs)(i.J2,{children:[(0,n.jsx)(i.xo,{asChild:!0,children:(0,n.jsx)("button",{children:(0,n.jsx)(l.Z,{name:"info",size:"small"})})}),(0,n.jsx)(i.yk,{className:"w-fit p-4",children:"string"==typeof s?(0,n.jsx)("p",{children:s}):s})]})]})},u=e=>{switch(e){case r.n.plan.FREE:return"Free";case r.n.plan.PRO:return"Pro";case r.n.plan.STARTER:return"Starter";case r.n.plan.LAUNCH:return"Launch";case"bonus":return"Bonus";case r.n.plan.ENTERPRISE:return"Enterprise & Teams";case r.n.plan.PARTNER:return"Partner";case r.n.plan.SCALE:return"Scale 2";case r.n.plan.SCALE_1:case r.n.plan.SCALE_3:case r.n.plan.SCALE_4:case r.n.plan.SCALE_5:case r.n.plan.SCALE_6:case r.n.plan.SCALE_7:return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}},m=e=>{let{priceAlternatives:t}=e;return(0,n.jsxs)("div",{className:"grid w-fit grid-cols-2 gap-x-4 gap-y-2",children:[(0,n.jsx)("span",{children:(0,n.jsx)("strong",{children:"Limit/mo"})}),(0,n.jsx)("span",{children:(0,n.jsx)("strong",{children:"Price/mo"})}),t.map(e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:e.limit}),(0,n.jsxs)("span",{children:["$",e.price]})]}))]})};r.n.plan.FREE,u(r.n.plan.FREE);let h={id:r.n.plan.PRO,price:19,limit:100,canManagePlan:!0,stripeCheckoutData:{stripeProductId:a.OLD_PRO.PRODUCT_ID,quantity:1},name:u(r.n.plan.PRO)},p={id:r.n.plan.STARTER,price:20,limit:100,canManagePlan:!0,stripeCheckoutData:{stripeProductId:a.STARTER.PRODUCT_ID,quantity:1},name:u(r.n.plan.STARTER)},x={id:r.n.plan.LAUNCH,price:50,limit:250,canManagePlan:!0,stripeCheckoutData:{stripeProductId:a.LAUNCH.PRODUCT_ID,quantity:1},name:u(r.n.plan.LAUNCH)},f={id:r.n.plan.SCALE_1,price:100,limit:500,canManagePlan:!0,name:u(r.n.plan.SCALE_1),stripeCheckoutData:{stripeProductId:a.SCALE_1.PRODUCT_ID,quantity:1},dropdownLabel:"5x monthly limits"},j={id:r.n.plan.SCALE,price:200,limit:1e3,canManagePlan:!0,name:u(r.n.plan.SCALE),stripeCheckoutData:{stripeProductId:a.SCALE.PRODUCT_ID,quantity:1},dropdownLabel:"10x monthly limits"},g={id:r.n.plan.SCALE_3,price:294,limit:1500,canManagePlan:!0,name:u(r.n.plan.SCALE_3),stripeCheckoutData:{stripeProductId:a.SCALE_3.PRODUCT_ID,quantity:1},dropdownLabel:"15x monthly limits"},v={id:r.n.plan.SCALE_4,price:384,limit:2e3,canManagePlan:!0,name:u(r.n.plan.SCALE_4),stripeCheckoutData:{stripeProductId:a.SCALE_4.PRODUCT_ID,quantity:1},dropdownLabel:"20x monthly limits"},b=[f,j,g,v,{id:r.n.plan.SCALE_5,price:564,limit:3e3,canManagePlan:!0,name:u(r.n.plan.SCALE_5),stripeCheckoutData:{stripeProductId:a.SCALE_5.PRODUCT_ID,quantity:1},dropdownLabel:"30x monthly limits"},{id:r.n.plan.SCALE_6,price:736,limit:4e3,canManagePlan:!0,name:u(r.n.plan.SCALE_6),stripeCheckoutData:{stripeProductId:a.SCALE_6.PRODUCT_ID,quantity:1},dropdownLabel:"40x monthly limits"},{id:r.n.plan.SCALE_7,price:900,limit:5e3,canManagePlan:!0,name:u(r.n.plan.SCALE_7),stripeCheckoutData:{stripeProductId:a.SCALE_7.PRODUCT_ID,quantity:1},dropdownLabel:"50x monthly limits"}];r.n.plan.FREE,n.Fragment;let y={id:r.n.plan.PRO,priceSuffix:"/ month",description:"Everything in Free, plus:",features:["Private projects","> 10x higher rate limits","Pay as you go, if daily AI messages run out","Early access to AI-powered backend generation via Supabase","Early access to other new features"],icon:"bolt_fill",planOptions:h},N={id:r.n.plan.STARTER,priceSuffix:"/ month",description:"Perfect for hobby and occasional use:",features:["Everything in Free, plus:",(0,n.jsx)(d,{label:"Go beyond daily limits with a monthly limit",tooltip:(0,n.jsx)(m,{priceAlternatives:[{price:p.price,limit:100}]},"100-monthly-edits")},"100-monthly-edits"),"Unlimited private projects"],icon:"construction",planOptions:p},w={id:r.n.plan.LAUNCH,priceSuffix:"/ month",description:"For individuals working on small projects:",features:["Everything in Starter, plus:",(0,n.jsx)(d,{label:"2.5x monthly limits",tooltip:(0,n.jsx)(m,{priceAlternatives:[{price:x.price,limit:250}]},"250-monthly-edits")},"250-monthly-edits")],icon:"rocket_launch",planOptions:x},_={id:"scale",priceSuffix:"/ month",description:"For individuals working on larger projects:",features:["Everything in Launch, plus:",(0,n.jsx)(d,{label:"Larger message limits",tooltip:(0,n.jsx)(m,{priceAlternatives:b.map(e=>({price:e.price,limit:e.limit}))},"1000-monthly-edits")},"1000-monthly-edits"),"Early access to new features","VIP events"],icon:"open_in_full",planOptions:b},C={id:r.n.plan.ENTERPRISE,description:(0,n.jsxs)("span",{children:[(0,n.jsx)(o.default,{href:"https://antonosika.typeform.com/to/pT3rZYw0",target:"_blank",className:"underline",children:"Contact us"})," ","for:"]}),features:["Custom messaging limits","A dedicated product specialist","Custom integrations","Dedicated support & account management","Expert architecture & debugging support"],planOptions:{id:r.n.plan.ENTERPRISE,name:"Teams",price:0,limit:0,canManagePlan:!1},icon:"enterprise"},E={id:"bonus",priceSuffix:"(one-time payment)",description:"100 bonus messages",icon:null,features:["Does not reset at midnight","Used after daily allowances"],planOptions:{id:"bonus",price:10,limit:100,name:"Bonus Messages",canManagePlan:!1,ctaOverride:"Buy bonus messages",stripeCheckoutData:{stripeProductId:a.CREDITS.PRODUCT_ID,quantity:100}}},S={[r.n.plan.FREE]:0,[r.n.plan.STARTER]:1,[r.n.plan.LAUNCH]:2,[r.n.plan.SCALE_1]:3,[r.n.plan.SCALE]:4,[r.n.plan.SCALE_3]:5,[r.n.plan.SCALE_4]:6,[r.n.plan.SCALE_5]:7,[r.n.plan.SCALE_6]:8,[r.n.plan.SCALE_7]:9,[r.n.plan.ENTERPRISE]:10},k=[y,C],P=[N,w,_,C],A=[N,w,_],I=[E]},16831:function(e,t,s){"use strict";s.d(t,{F$:function(){return o},Q5:function(){return c},qE:function(){return i}});var n=s(57437),a=s(2265),r=s(70650),l=s(94508);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.fC,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});i.displayName=r.fC.displayName;let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.Ee,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",s),...a})});o.displayName=r.Ee.displayName;let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.NY,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})});c.displayName=r.NY.displayName},19060:function(e,t,s){"use strict";s.d(t,{X:function(){return o}});var n=s(57437),a=s(2265),r=s(9270),l=s(94508),i=s(57346);let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.fC,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,n.jsx)(r.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(i.Z,{name:"check",className:"h-4 w-4"})})})});o.displayName=r.fC.displayName},85238:function(e,t,s){"use strict";s.d(t,{OX:function(){return x},Qz:function(){return d},dy:function(){return c},iI:function(){return f},sc:function(){return p},u6:function(){return j}});var n=s(57437),a=s(2265),r=s(4216),l=s(62869),i=s(94508),o=s(32489);let c=e=>{let{shouldScaleBackground:t=!1,...s}=e;return(0,n.jsx)(r.dy.Root,{shouldScaleBackground:t,...s})};c.displayName="Drawer";let d=r.dy.Trigger,u=r.dy.Portal,m=r.dy.Close,h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.dy.Overlay,{ref:t,className:(0,i.cn)("fixed inset-0 z-[2000] bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a})});h.displayName=r.dy.Overlay.displayName;let p=a.forwardRef((e,t)=>{let{className:s,children:a,showCloseButton:c=!0,overlayProps:d,...p}=e;return(0,n.jsxs)(u,{children:[(0,n.jsx)(h,{...d}),(0,n.jsxs)(r.dy.Content,{ref:t,className:(0,i.cn)("fixed inset-y-0 right-0 z-[2001] flex h-dvh flex-nowrap border-l bg-popover",s),...p,children:[(0,n.jsx)("div",{className:"flex w-[80vw] flex-col gap-4 sm:w-96 sm:min-w-96",children:a}),c&&(0,n.jsx)("div",{className:"absolute right-4 top-6",children:(0,n.jsx)(m,{asChild:!0,children:(0,n.jsx)(l.z,{variant:"ghost",size:"icon-sm",children:(0,n.jsx)(o.Z,{size:"1.2em"})})})})]})]})});p.displayName="DrawerContent";let x=e=>{let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,i.cn)("grid gap-1.5 text-left",t),...s})};x.displayName="DrawerHeader";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.dy.Title,{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none",s),...a})});f.displayName=r.dy.Title.displayName;let j=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.dy.Description,{ref:t,className:(0,i.cn)("text-base text-muted-foreground",s),...a})});j.displayName=r.dy.Description.displayName},93022:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});var n=s(57437),a=s(94508);function r(e){let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",t),...s})}},1828:function(e,t,s){"use strict";s.d(t,{r:function(){return i}});var n=s(57437),a=s(2265),r=s(50721),l=s(94508);let i=a.forwardRef((e,t)=>{let{className:s,thumbClassName:a,...i}=e;return(0,n.jsx)(r.fC,{className:(0,l.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",s),...i,ref:t,children:(0,n.jsx)(r.bU,{className:(0,l.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0",a)})})});i.displayName=r.fC.displayName},61563:function(e,t,s){"use strict";s.d(t,{G:function(){return d},t:function(){return c}});var n=s(57437),a=s(2265),r=s(46465),l=s(94508),i=s(63611);let o=a.createContext({size:"default",variant:"default"}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,children:c,...d}=e;return(0,n.jsx)(r.fC,{ref:t,className:(0,l.cn)("flex items-center justify-center gap-1",s),...d,children:(0,n.jsx)(o.Provider,{value:{variant:a,size:i},children:c})})});c.displayName=r.fC.displayName;let d=a.forwardRef((e,t)=>{let{className:s,children:c,variant:d,size:u,...m}=e,h=a.useContext(o);return(0,n.jsx)(r.ck,{ref:t,className:(0,l.cn)((0,i.E)({variant:h.variant||d,size:h.size||u}),s),...m,children:c})});d.displayName=r.ck.displayName},44895:function(e,t,s){"use strict";s.d(t,{Mw:function(){return i},Oq:function(){return r},mA:function(){return o},yA:function(){return c}});var n=s(51948),a=s(21288);let r=()=>"https://github.com/login/oauth/authorize?client_id=".concat(n.l),l=()=>"https://github.com/apps/".concat(n.F,"/installations/new"),i=e=>(null==e?void 0:e.id)?"https://github.com/apps/".concat(n.F,"/installations/new/permissions?target_id=").concat(e.id,"&target_type=").concat(e.type):l(),o=()=>({openConnectToGithubPopup:(e,t)=>{c(e&&!t?r():l())}}),c=e=>{let t=window.open(e,"_blank","width=600,height=700,left=100,top=100");if(!t){a.P.error("Failed to open GitHub OAuth popup");return}t.focus()}},33910:function(e,t,s){"use strict";s.d(t,{D:function(){return o}});var n=s(25134),a=s(16593),r=s(2265),l=s(36710),i=s(49340);let o=()=>{var e,t,s,o;let c=(0,l.O)(),[d,u]=(0,i.a)(),{userData:m,isInitialized:h}=(0,n.v)(),p=null==m?void 0:null===(e=m.github)||void 0===e?void 0:e.encrypted_access_token,x=(0,r.useRef)(p),f=(0,a.a)({queryKey:["github-installations"],queryFn:()=>c.get("/github-installations")});return(0,r.useEffect)(()=>{x.current!==p&&(f.refetch(),x.current=p)},[p,f]),{installations:null===(t=f.data)||void 0===t?void 0:t.installations,hasAccessToken:null===(s=f.data)||void 0===s?void 0:s.has_access_token,hasValidAccessToken:null===(o=f.data)||void 0===o?void 0:o.has_valid_access_token,installationsQuery:f}}},51948:function(e,t,s){"use strict";s.d(t,{F:function(){return n},l:function(){return a}});let n="lovable-dev",a="Iv1.365d6a195dbca85b"},74225:function(e,t,s){"use strict";s.d(t,{P:function(){return n}});let n=e=>e.replace(/(^\w+:|^)\/\//,"")},73400:function(e,t,s){"use strict";var n,a,r;s.d(t,{n:function(){return n}}),(r=(a=n||(n={})).plan||(a.plan={})).FREE="free",r.PRO="pro",r.PARTNER="partner",r.STARTER="starter",r.LAUNCH="launch",r.SCALE_1="scale_1",r.SCALE="scale",r.SCALE_3="scale_3",r.SCALE_4="scale_4",r.SCALE_5="scale_5",r.SCALE_6="scale_6",r.SCALE_7="scale_7",r.ENTERPRISE="enterprise"},15345:function(e){e.exports={editor:"CodeEditor_editor__SnrZP"}}},function(e){e.O(0,[1609,5972,4358,1413,8310,5878,5002,6401,6693,2972,3450,9013,5658,7277,8841,9291,8173,4438,6008,9027,1262,6873,6593,9228,3590,1395,85,8863,9965,835,6652,509,7313,3039,4436,1607,991,2971,1370,1744],function(){return e(e.s=49383)}),_N_E=e.O()}]);