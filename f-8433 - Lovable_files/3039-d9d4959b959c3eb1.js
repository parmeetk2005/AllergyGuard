!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f9c6cf4a-d7bd-40b7-8a35-913b9d4b236a",e._sentryDebugIdIdentifier="sentry-dbid-f9c6cf4a-d7bd-40b7-8a35-913b9d4b236a")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3039,9377],{25134:function(e,t,r){r.d(t,{d:function(){return d},v:function(){return i}});var n=r(52558),a=r(78099),s=r(5978),o=r(2265);let i=()=>{let[e,t]=(0,o.useState)(void 0),{isInitialized:r,authUser:i}=(0,n.E)();return(0,o.useEffect)(()=>{var e,n;if(!r)return;let o=null!==(n=null==i?void 0:i.uid)&&void 0!==n?n:null===(e=a.I.currentUser)||void 0===e?void 0:e.uid;if(!o)return;let d=(0,s.JU)(a.db,"users",o);return(0,s.cf)(d,e=>{t(e.data())})},[i,r]),{userData:e,isInitialized:r}},d=()=>{let{userData:e}=i();if(e)return e.is_admin||"free"!==e.plan}},52558:function(e,t,r){r.d(t,{E:function(){return f},H:function(){return p}});var n=r(57437),a=r(78099),s=r(21288),o=r(99376),i=r(2265),d=r(28667);let l=()=>{let[e,t,r]=(0,d.F_)(a.I);return[e,t,r]},c=(0,i.createContext)(void 0),u=null,f=()=>{let e=(0,i.useContext)(c);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e},p=e=>{let{user:t,children:r}=e,[f,p]=(0,i.useState)(!1),[g]=l(),[m,h,v]=(0,d.QJ)(a.I),y=(0,o.useRouter)();return(0,i.useEffect)(()=>((async function(){if(!t){p(!1),u&&(clearInterval(u),u=null);return}await (0,a.j)(t.customToken,!0),p(!0),u||(u=setInterval(async()=>{let e=a.I.currentUser;if(!e){await (0,a.j)(t.customToken,!0);return}try{await e.getIdToken(!0)}catch(e){var r;s.P.error("AuthProvider: Failed to refresh Firebase token",{error:e,userId:null===a.I||void 0===a.I?void 0:null===(r=a.I.currentUser)||void 0===r?void 0:r.uid})}y.replace("?should-refresh-credentials=1"),y.refresh()},18e5))})(),()=>{!t&&u&&(clearInterval(u),u=null)}),[t,y]),(0,i.useEffect)(()=>{!t&&g&&(s.P.info("Setting user cookie based on IndexDB and deleting IndexDB"),g.getIdToken().then(async e=>{try{if((await fetch("/api/login",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).ok){y.replace("?should-refresh-credentials=1"),s.P.info("Successfully set auth cookies");let e=new URLSearchParams(window.location.search).get("redirect");e&&y.push(e),y.refresh()}else s.P.info("Failed to set auth cookies. Did not remove IndexedDB.")}catch(e){s.P.warn("Unknown error when trying to set auth cookies. Did not remove IndexedDB.",{error:e})}}))},[g,y,m,t]),(0,n.jsx)(c.Provider,{value:{authUser:t,isInitialized:f},children:r})}},35974:function(e,t,r){r.d(t,{C:function(){return i}});var n=r(57437);r(2265);var a=r(77712),s=r(94508);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",success:"border-transparent bg-success text-success-foreground hover:bg-success/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)(o({variant:r}),t),...a})}},62869:function(e,t,r){r.d(t,{d:function(){return l},z:function(){return c}});var n=r(57437),a=r(2265),s=r(37053),o=r(77712),i=r(94508),d=r(57346);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",success:"bg-success text-sm font-medium text-primary hover:opacity-90 [&>*]:text-shadow-sm shadow-black/50",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-muted shadow-sm hover:bg-accent hover:border-accent hover:text-accent-foreground",muted:"bg-background text-sm font-medium hover:bg-primary/20 border border-border",accent:"bg-accent text-primary hover:opacity-80 [&>*]:text-shadow-sm shadow-black/50",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hotkey:"hover:bg-background text-primary"},size:{default:"h-8 rounded-md px-2 py-2",sm:"h-7 rounded-md px-2 py-2 gap-1.5",lg:"h-11 rounded-md px-8",xl:"h-16 rounded-md px-12 text-lg",icon:"h-10 w-10","icon-sm":"h-7 px-1 rounded-md py-1 aspect-square"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:c=!1,children:u,loading:f,disabled:p,...g}=e,m=c?s.g7:"button";return(0,n.jsx)(m,{className:(0,i.cn)(l({variant:a,size:o,className:r})),ref:t,...g,disabled:p||f,children:f?(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(d.Z,{name:"progress_activity",className:"h-4 w-4 animate-spin"}),u]}):u})});c.displayName="Button"},66070:function(e,t,r){r.d(t,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return o},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var n=r(57437),a=r(2265),s=r(94508);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col gap-6 rounded-lg border bg-card p-6 text-primary shadow-sm",r),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5",r),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});l.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("gap-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center pt-0",r),...a})});u.displayName="CardFooter"},26110:function(e,t,r){r.d(t,{$N:function(){return y},Be:function(){return b},GG:function(){return p},MJ:function(){return l},Vq:function(){return c},cN:function(){return v},cZ:function(){return m},fK:function(){return h},hg:function(){return u}});var n=r(57437),a=r(94508),s=r(49027),o=r(20653),i=r(22048),d=r(2265);let l=(0,d.createContext)({allowNestedDialog:!0}),c=e=>{let{...t}=e;if(!(0,d.useContext)(l).allowNestedDialog){let e=Error("Dialogs must not be used inside of dropdowns or context menus. Look at RootDialog.tsx for a way to render a dialog using a hook or render the dialog above the dropdown or context menu");i.Tb(e)}return(0,d.useEffect)(()=>()=>{document.body.style.pointerEvents=""},[]),(0,n.jsx)(s.fC,{...t,onOpenChange:e=>{var r;e||setTimeout(()=>{document.body.style.pointerEvents=""},250),null===(r=t.onOpenChange)||void 0===r||r.call(t,e)}})},u=s.xz,f=s.h_,p=s.x8,g=d.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(s.aV,{ref:t,className:(0,a.cn)("fixed inset-0 z-[50] bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...o})});g.displayName=s.aV.displayName;let m=d.forwardRef((e,t)=>{let{className:r,children:i,hideCloseButton:d,blurOverlay:l,...c}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(g,{className:(0,a.cn)("",l&&"backdrop-blur-sm")}),(0,n.jsxs)(s.VY,{ref:t,className:(0,a.cn)("fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...c,children:[i,!d&&(0,n.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,n.jsx)(o.Pxu,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=s.VY.displayName;let h=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,a.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};h.displayName="DialogHeader";let v=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,a.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};v.displayName="DialogFooter";let y=d.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(s.Dx,{ref:t,className:(0,a.cn)("text-lg font-semibold leading-none tracking-tight",r),...o})});y.displayName=s.Dx.displayName;let b=d.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(s.dk,{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...o})});b.displayName=s.dk.displayName},95186:function(e,t,r){r.d(t,{I:function(){return o}});var n=r(57437),a=r(2265),s=r(94508);let o=a.forwardRef((e,t)=>{let{className:r,type:a,...o}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},57054:function(e,t,r){r.d(t,{J2:function(){return i},xo:function(){return d},yk:function(){return l}});var n=r(57437),a=r(2265),s=r(27312),o=r(94508);let i=s.fC,d=s.xz;s.ee;let l=a.forwardRef((e,t)=>{let{className:r,align:a="center",sideOffset:i=4,...d}=e;return(0,n.jsx)(s.h_,{children:(0,n.jsx)(s.VY,{ref:t,align:a,sideOffset:i,className:(0,o.cn)("z-[10000] w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...d})})});l.displayName=s.VY.displayName},53647:function(e,t,r){r.d(t,{Bw:function(){return g},DI:function(){return l},Ph:function(){return d},Ql:function(){return h},i4:function(){return u},ki:function(){return c},n5:function(){return m}});var n=r(57437),a=r(2265),s=r(56873),o=r(94508),i=r(20653);let d=s.fC,l=s.ZA,c=s.B4,u=a.forwardRef((e,t)=>{let{className:r,children:a,...d}=e;return(0,n.jsxs)(s.xz,{ref:t,className:(0,o.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...d,children:[a,(0,n.jsx)(s.JO,{asChild:!0,children:(0,n.jsx)(i.v4q,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=s.xz.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.u_,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(i.g8U,{className:"h-4 w-4"})})});f.displayName=s.u_.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.$G,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(i.v4q,{className:"h-4 w-4"})})});p.displayName=s.$G.displayName;let g=a.forwardRef((e,t)=>{let{className:r,children:a,position:i="popper",...d}=e;return(0,n.jsx)(s.h_,{children:(0,n.jsxs)(s.VY,{ref:t,className:(0,o.cn)("relative z-[10000] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-card text-card-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...d,children:[(0,n.jsx)(f,{}),(0,n.jsx)(s.l_,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,n.jsx)(p,{})]})})});g.displayName=s.VY.displayName;let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.__,{ref:t,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",r),...a})});m.displayName=s.__.displayName;let h=a.forwardRef((e,t)=>{let{className:r,children:a,...d}=e;return(0,n.jsxs)(s.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",r),...d,children:[(0,n.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(s.wU,{children:(0,n.jsx)(i.nQG,{className:"h-4 w-4"})})}),(0,n.jsx)(s.eT,{children:a})]})});h.displayName=s.ck.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=s.Z0.displayName},76818:function(e,t,r){r.d(t,{g:function(){return o}});var n=r(57437),a=r(2265),s=r(94508);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("textarea",{className:(0,s.cn)("flex w-full rounded-md bg-muted px-2 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});o.displayName="Textarea"},49340:function(e,t,r){r.d(t,{a:function(){return a},e:function(){return s}});var n=r(52558);let a=()=>{let{authUser:e}=(0,n.E)();return[e,!1,null]},s=()=>{let[e,t,r]=a();return null==e?void 0:e.email}},29388:function(e,t,r){r.d(t,{og:function(){return m},Oq:function(){return p},LC:function(){return g}});var n=r(83464),a=r(21288),s=r(71856),o=r(88132);class i{get(e){return this.cacheMap[e]?this.cacheMap[e]:e}set(e,t){this.cacheMap={[e]:t}}constructor(){this.cacheMap={}}}let d=new i;async function l(e){var t;let{serverIdToken:r,refreshTokenUrl:n,checkRevoked:a}=e;if(!r)return null;let i=d.get(r),l=(0,o.t)(i),c=null!==(t=null==l?void 0:l.exp)&&void 0!==t?t:0;if(!a&&c>Date.now()/1e3)return i;let u=await f(n);if(!(null==u?void 0:u.idToken))throw new s.AuthError(s.AuthErrorCode.INTERNAL_ERROR,"Refresh token endpoint returned invalid response. This URL should point to endpoint exposed by the middleware and configured using refreshTokenPath option");return d.set(r,u.idToken),u.idToken}async function c(e,t,r){var n;let a=await u(e);return new s.AuthError(s.AuthErrorCode.INTERNAL_ERROR,"next-firebase-auth-edge: Internal request to ".concat(null!==(n=null==r?void 0:r.method)&&void 0!==n?n:"GET"," ").concat(t.toString()," has failed: ").concat(a))}function u(e){let t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")?e.json():e.text()}async function f(e,t){let r=await fetch(e,{...t,headers:{...null==t?void 0:t.headers,Accept:"application/json","Content-Type":"application/json"}});if(!r.ok)throw await c(r,e,t);return u(r)}class p extends Error{constructor(e,t,r,n){super(e),this.status=t,this.statusText=r,this.response=n}}function g(e,t){return n.default.create({baseURL:t,headers:e?{Authorization:"Bearer ".concat(e)}:void 0,withCredentials:!0})}class m{async getApi(){let e=g(this.idToken?await l({serverIdToken:this.idToken,refreshTokenUrl:"/api/refresh-token"}):null,this.baseURL);return e.interceptors.response.use(e=>e.data,e=>{var t;if((null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===401){let e;e=this.redirect?"/signup?redirect="+this.redirect:"/"===this.pathname?"/signup":"/signup?redirect="+encodeURIComponent(this.pathname),this.router.push(e)}return e.response&&e.response.data?Promise.reject(e.response):Promise.reject(e)}),e}async get(e,t){return(await this.getApi()).get(e,t)}async delete(e,t){return(await this.getApi()).delete(e,t)}async post(e,t,r){return(await this.getApi()).post(e,t,r)}async put(e,t,r){return(await this.getApi()).put(e,t,r)}async patch(e,t,r){return(await this.getApi()).patch(e,t,r)}async head(e,t){return(await this.getApi()).head(e,t)}async postWithStreaming(e,t,r,n){var s;let o=null===(s=(await this.getApi()).defaults.headers.Authorization)||void 0===s?void 0:s.split(" ")[1],i=await fetch("".concat(this.baseURL).concat(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o),Accept:"text/event-stream",Connection:"keep-alive","Cache-Control":"no-cache"},body:JSON.stringify(t),signal:n});if(!i.ok){let e;try{let t=await i.text(),r=i.headers.get("Content-Type")||"";if(r.includes("application/json"))try{e=JSON.parse(t)}catch(n){a.P.error("failed_to_parse_json_response",{error:n,responseText:t,contentType:r}),e=t}else a.P.debug("non_json_error_response",{contentType:r,responseText:t}),e=t}catch(e){a.P.error("failed_to_parse_response_body",{error:e,status:i.status,contentType:i.headers.get("Content-Type")})}if(429===i.status)throw new p("We are currently under heavy load, please try again later.",429,"RATE_LIMIT_EXCEEDED",e);throw new p("Request failed",i.status,i.statusText,e)}let d=i.body.getReader(),l=new TextDecoder,c="";try{for(;;){let{value:e,done:t}=await d.read();if(t){if(c){for(let e of c.split(/\n+/))if(e.startsWith("data: "))try{let t=JSON.parse(e.slice(6));r(t)}catch(t){a.P.error("failed_to_parse_json",{error:t,message:e.slice(6)})}}break}let n=(c+=l.decode(e,{stream:!0})).split(/\n+/);for(let e of(c=n.pop()||"",n))if(e.startsWith("data: "))try{let t=JSON.parse(e.slice(6)),n=r(t);if("stop"===n||"done"===t.status){d.cancel();return}}catch(t){a.P.error("failed_to_parse_json",{error:t,message:e.slice(6)})}else if(e.startsWith("event: error")){let t=n.indexOf(e),r=n[t+1];if(null==r?void 0:r.startsWith("data: ")){let e;try{e=JSON.parse(r.slice(6))}catch(e){throw a.P.error("failed_to_parse_error_json",{error:e,message:r.slice(6)}),new p("Unknown streaming error",500,"UNKNOWN_ERROR",r.slice(6))}throw await d.cancel(),new p(e.message,500,e.type,e)}}}}catch(e){if((null==e?void 0:e.name)==="AbortError")await d.cancel();else{if(a.P.error("error_reading_stream",{error:JSON.stringify(e),isStreamedFetchError:e instanceof p}),e instanceof p)throw e;throw new p("Stream interrupted",0,"ERR_INCOMPLETE_CHUNKED_ENCODING",e)}}finally{try{await d.cancel()}catch(e){throw e}}}constructor(e,t,r,n,a){this.baseURL=e,this.idToken=t,this.router=r,this.pathname=n,this.redirect=a}}},25057:function(e,t,r){r.d(t,{t:function(){return a},u:function(){return n}});let n=()=>localStorage.API_BASE_URL?localStorage.API_BASE_URL:"https://api.lovable.dev",a=()=>"https://lovable-api.com"},36710:function(e,t,r){r.d(t,{O:function(){return d}});var n=r(99376),a=r(52558),s=r(2265),o=r(29388),i=r(25057);let d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=(0,n.useRouter)(),r=(0,n.usePathname)(),{authUser:d}=(0,a.E)(),[l,c]=(0,s.useState)(()=>new o.og((0,i.u)(),null==d?void 0:d.idToken,t,r,e));return(0,s.useEffect)(()=>{c(new o.og((0,i.u)(),null==d?void 0:d.idToken,t,r,e))},[t,r,e,d]),l}},54257:function(e,t,r){r.d(t,{q:function(){return n}});let n="production"===(r(25566).env.NEXT_PUBLIC_NODE_ENV||"production")?{apiKey:"AIzaSyBQNjlw9Vp4tP4VVeANzyPJnqbG2wLbYPw",authDomain:"auth.gptengineer.app",projectId:"gpt-engineer-390607",storageBucket:"gpt-engineer-390607.appspot.com",messagingSenderId:"288002387414",appId:"1:288002387414:web:231da37c38c486ca814877",measurementId:"G-EFZ8TB5QLN",clientEmail:"firebase-adminsdk-thfj5@gpt-engineer-390607.iam.gserviceaccount.com"}:{apiKey:"AIzaSyC8MAnZTLUBttWHlEIMl0u8gGI0R5oGnXU",authDomain:"gpt-engineer-dev.firebaseapp.com",projectId:"gpt-engineer-dev",storageBucket:"gpt-engineer-dev.appspot.com",messagingSenderId:"435422046193",appId:"1:435422046193:web:36e2c4049799e14110c650",clientEmail:"firebase-adminsdk-tg5bc@gpt-engineer-dev.iam.gserviceaccount.com"}},78099:function(e,t,r){r.d(t,{I:function(){return c},db:function(){return l},j:function(){return f}});var n=r(738),a=r(44752),s=r(5978),o=r(54257),i=r(46886),d=r(21288);let{db:l,auth:c}=(()=>{let e=(0,n.ZF)(o.q),t=(0,s.LV)(e,{experimentalForceLongPolling:!0}),r=(0,a.v0)(e);return{app:e,db:t,auth:r}})(),u=!1,f=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!u&&t&&e){u=!0;let t=await (0,i.Q9)({serverCustomToken:e,refreshTokenUrl:"/api/refresh-token"});if(!t)return u=!1,d.P.error("No custom token found in initialize()"),{db:l,auth:c};try{await (0,a._p)(c,t)}catch(e){d.P.error("Unable to sign-in with custom-token in firebase initialization: ".concat(e)),u=!1}}return{db:l,auth:c}}},21288:function(e,t,r){r.d(t,{G:function(){return c},P:function(){return p}});var n,a,s=r(59625),o=r(49360),i=r(25566);(n=a||(a={})).LOG="LOG",n.TRACE="TRACE",n.DEBUG="DEBUG",n.INFO="INFO",n.WARN="WARN",n.ERROR="ERROR";class d{static generateSessionId(){return(0,o.Z)()}setSession(e){this._session={session_id:d.generateSessionId(),previous_session:this._session.session_id,project_id:e}}setUser(e){this._user=e}get session(){return this._session}get user(){return this._user}sessionForLogging(){let{session_id:e,...t}=this._session;return{session_id:e,...Object.fromEntries(Object.entries(t).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return["session_attrs_".concat(t),r]}))}}userForLogging(){return Object.fromEntries(Object.entries(this._user||{}).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return["user_".concat(t),r]}))}getForLogging(){return Object.fromEntries(Object.entries({...this.sessionForLogging(),...this.userForLogging()}).filter(e=>{let[t,r]=e;return void 0!==r}))}constructor(){this._session={session_id:d.generateSessionId()}}}let l=new d,c=(0,s.Ue)(e=>({metadata:l,setMetadata:t=>e({metadata:t})})),u=async(e,t)=>{let r=t[0],n=t[1]?Object.fromEntries(Object.entries(t[1]).map(e=>{let[t,r]=e;return[t,r instanceof Error?r.toString():r instanceof Date?r.toISOString():"object"==typeof r&&null!==r?JSON.stringify(r):(null==r?void 0:r.toString())||null]})):{},a=(1e9*Math.floor(Date.now()/1e3)).toString(),s=Object.entries({msg:r,...n,...l.getForLogging(),level:e}).map(e=>{let[t,r]=e;return"".concat(t,"=").concat(JSON.stringify(r))}).join(" "),o={streams:[{stream:{service_name:"gptengineer-app",name:"gptengineer-app",version:i.env.NEXT_PUBLIC_VERSION||"1.0.0",environment:"production",commit_sha:"4ee7fab5ab65943174f26e0d230c9b16601c7dd0",level:e},values:[[a,s]]}]},d="https://us-central1-gpt-engineer-390607.cloudfunctions.net/pushLogsToGrafana";if(d)try{await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}catch(e){}},f=(e,t)=>{u(e,t)},p={info:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];f("INFO",t)},debug:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];f("DEBUG",t)},trace:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];f("TRACE",t)},warn:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];f("WARN",t)},error:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];f("ERROR",t)}}},13673:function(e,t,r){var n=r(59625),a=r(4391);let s={sortedMessageIds:[],messages:{},edits:{},selectedImageUrl:void 0,scrollToTarget:null,collaborators:{},imageUrlCache:{},isOutOfCreditsDialogOpen:!1,collaboratorsInitialized:!1},o=(e,t)=>e.number!==t.number||e.commit_message!==t.commit_message||e.reverted!==t.reverted||e.status!==t.status||e.previewBuildStatus!==t.previewBuildStatus,i=(e,t)=>{let{edits:r}=t;Object.entries(r).forEach(t=>{let[r,n]=t;(!e.edits[r]||o(n,e.edits[r]))&&(e.edits[r]=n)})},d=(e,t)=>!t||e.handled_at!==t.handled_at||e.type!==t.type||e.error_message!==t.error_message||e.handled_in_message!==t.handled_in_message,l=(e,t)=>{if((null==t?void 0:t.type)!==e.type)return!0;if("aiMessage"===e.type&&"aiMessage"===t.type){var r,n,a,s,o;return!!(e.status!==t.status||e.persisted&&!t.persisted||(null!==(s=null===(r=e.errors)||void 0===r?void 0:r.length)&&void 0!==s?s:0)!==(null!==(o=null===(n=t.errors)||void 0===n?void 0:n.length)&&void 0!==o?o:0)||(null===(a=e.errors)||void 0===a?void 0:a.some((e,r)=>{var n;return d(e,null===(n=t.errors)||void 0===n?void 0:n[r])})))||e.editId!==t.editId||e.stopped!==t.stopped||e.sqlRunState!==t.sqlRunState}return!1},c=(e,t)=>{let{messages:r}=t;Object.entries(r).forEach(t=>{let[r,n]=t;l(n,e.messages[r])&&(e.messages[r]=n)});let n=Array.from(new Set([...e.sortedMessageIds,...Object.keys(r)])).map(t=>({id:t,createdAt:e.messages[t].createdAt})).sort((e,t)=>e.createdAt||t.createdAt?e.createdAt?t.createdAt?e.createdAt.getTime()-t.createdAt.getTime():-1:1:0);e.sortedMessageIds=n.map(e=>e.id)},u=(e,t)=>{var r;return t&&null!==(r=Object.values(e.edits).find(e=>e.commit_sha.startsWith(t)))&&void 0!==r?r:null},f=(e,t)=>{var r;return null!==(r=Object.values(e.messages).find(e=>"userCommit"===e.type&&e.shortCommitHash===t))&&void 0!==r?r:null},p=(e,t)=>{var r;return t&&null!==(r=e.edits[t])&&void 0!==r?r:null},g=(e,t)=>{var r;return null!==(r=Object.values(e.messages).find(e=>("aiMessage"===e.type||"revertSuccessv2"===e.type)&&e.editId===t))&&void 0!==r?r:null},m=(e,t)=>{e.collaborators=t.reduce((e,t)=>(t.id&&(e[t.id]=t),e),{})},h=(e,t)=>{var r;return t&&null!==(r=e.collaborators[t])&&void 0!==r?r:null},v=(0,n.Ue)()((0,a.n)((e,t)=>({...s,mergeEdits:t=>e(e=>i(e,t)),mergeMessages:t=>e(e=>c(e,t)),reset:()=>e(e=>({state:e,...s})),getEdit:e=>p(t(),e),getEditByShortCommitHash:e=>u(t(),e),setSelectedImageUrl:t=>e({selectedImageUrl:t}),getMessage:e=>{var r;return e&&null!==(r=t().messages[e])&&void 0!==r?r:null},removeMessage:t=>e(e=>{delete e.messages[t],e.sortedMessageIds=e.sortedMessageIds.filter(e=>e!==t)}),setMessage:(t,r,n)=>e(e=>{!function(e,t,r,n){let a=e.messages[t];a&&n?a.content=r.content:e.messages[t]=r,e.sortedMessageIds.includes(t)||e.sortedMessageIds.push(t)}(e,t,r,n)}),getMessageByEditId:e=>g(t(),e),getUserCommitMessageByShortCommitHash:e=>f(t(),e),setScrollToTarget:t=>e({scrollToTarget:t}),setCollaborators:t=>e(e=>m(e,t)),getCollaborator:e=>h(t(),e),cacheImageUrl:(t,r)=>e(e=>({imageUrlCache:{...e.imageUrlCache,[t]:r}})),setIsOutOfCreditsDialogOpen:t=>e(e=>{e.isOutOfCreditsDialogOpen=t}),isMostRecentMessage:e=>{let r=t().sortedMessageIds;return r[r.length-1]===e},setCollaboratorsInitialized:t=>e(e=>{e.collaboratorsInitialized=t}),addMessage:t=>{e(e=>({messages:{...e.messages,[t.id]:t}}))},updateMessage:(t,r,n)=>{e(e=>({messages:{...e.messages,[t]:{...e.messages[t],...r}}}))},updateEdit:(t,r)=>e(e=>{e.edits[t]&&(e.edits[t]={...e.edits[t],...r})})})));t.ZP=v}}]);