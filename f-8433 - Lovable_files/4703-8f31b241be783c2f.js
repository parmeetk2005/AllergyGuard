!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6fa76610-c605-4654-96d1-35da2f2d8830",e._sentryDebugIdIdentifier="sentry-dbid-6fa76610-c605-4654-96d1-35da2f2d8830")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4703],{4703:function(e,t,a){Promise.resolve().then(a.bind(a,23570))},97822:function(e,t,a){"use strict";a.d(t,{s:function(){return n}});var s=a(57437),l=a(35974);let n=e=>{let{className:t}=e;return(0,s.jsx)(l.C,{variant:"outline",className:t,children:"ADMIN"})}},23570:function(e,t,a){"use strict";a.d(t,{ChatPanelV2:function(){return sJ}});var s,l,n,r,i,o,c=a(57437),d=a(99376),u=a(2265),p=a(12339),m=a(94508),h=a(1188);(s=r||(r={})).Chat="",s.History="history";let g=[{name:"Chat",icon:"chat",path:""},{name:"History",icon:"history",path:"history"}];function f(){let{tab:e="",project_id:t}=(0,d.useParams)();g.map(e=>e.path).includes(e)||(e="");let a=(0,d.useRouter)();return(0,c.jsx)(p.mQ,{value:e,onValueChange:e=>a.replace("/projects/".concat(t,"/").concat(e)),className:"shrink-0 pb-1 pr-2 md:pr-0",children:(0,c.jsx)(p.dr,{className:(0,m.cn)("grid h-auto w-full border border-border bg-secondary p-0.5 shadow-sm",{"grid-cols-3":3===g.length,"grid-cols-2":2===g.length}),children:g.map(t=>(0,c.jsxs)(p.SP,{value:t.path,className:"relative flex items-center gap-2 data-[state=active]:bg-transparent",children:[(0,c.jsx)("span",{className:(0,m.cn)("relative z-20 inline truncate",t.path===e&&"text-foreground"),children:t.name}),t.path===e&&(0,c.jsx)(h.E.span,{className:"absolute inset-0 z-10 rounded-md bg-muted-active shadow-lg",layoutId:"left-tab-background",layout:!0,transition:{bounce:0,duration:.15}})]},t.path))})})}var v=a(22529),x=a(11536),b=a(46366),y=a(62449),j=a(62869),w=a(55721),E=a(57346),N=a(27648);let k=e=>{let{className:t}=e;return(0,c.jsxs)(N.default,{href:"/settings/account#labs",className:(0,m.cn)("flex items-center gap-1 text-xs text-muted-foreground hover:underline",t),children:[(0,c.jsx)(E.Z,{name:"experiment_fill",size:"small"}),"Labs"]})},C={[y.jE.DEFAULT]:{icon:"chat_paste_go",title:"Default",description:"Chat and make edits to your project."},[y.jE.CHAT_ONLY]:{icon:"forum",title:"Chat only",description:"Chat without making edits to your project.",triggerClassName:"text-accent"},[y.jE.AGENT]:{icon:"smart_toy",title:"Agent",description:"AGENT MODE LETS GO"}};function _(){let e=(0,y.Nk)(e=>e.experimentalFeatures.chatModes),t=(0,b.c)(),a=(0,y.Eh)(e=>e.chatMode),s=(0,y.Eh)(e=>e.setChatMode),[l,n]=(0,u.useState)(null);return e?(0,c.jsxs)(w.h_,{children:[(0,c.jsx)(w.$F,{asChild:!0,children:(0,c.jsxs)(j.z,{variant:"ghost",size:"sm",className:(0,m.cn)("h-fit gap-1 px-1.5 py-0.5 font-normal focus-visible:ring-0",C[a].triggerClassName),children:[(0,c.jsx)(E.Z,{name:"page_info",size:"small"}),C[a].title,(0,c.jsx)(E.Z,{name:"keyboard_arrow_down",size:"small",className:"-mx-0.5"})]})}),(0,c.jsxs)(w.AW,{className:"w-[248px] border border-border p-3",side:"top",align:"start",sideOffset:8,children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("span",{className:"text-sm font-medium",children:"Chat mode"}),(0,c.jsx)(k,{})]}),(0,c.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,c.jsx)(w._x,{value:a,onValueChange:e=>s(e),className:"w-1/2",children:Object.entries(C).filter(e=>{let[a]=e;return a!==y.jE.AGENT||t}).map(e=>{let[t,{icon:s,title:l,description:r}]=e;return(0,c.jsx)(S,{mode:t,description:r,title:l,icon:s,onMouseEnter:n,onMouseLeave:()=>n(null),isSelected:a===t},t)})}),(0,c.jsxs)("div",{className:"w-1/2 text-xs",children:[l||C[a].description,(0,c.jsx)("p",{className:"pt-1 text-xs text-muted-foreground",children:"Cost: 1 message"})]})]})]})]}):null}let S=e=>{let{mode:t,onMouseEnter:a,onMouseLeave:s,description:l,title:n,icon:r,isSelected:i}=e,o=(0,u.useCallback)(()=>a(l),[l,a]),d=(0,u.useCallback)(()=>s(),[s]);return(0,c.jsxs)(w.qB,{className:(0,m.cn)("flex items-center px-1 py-1 text-xs text-muted-foreground focus:bg-muted focus:text-primary",{"text-primary":i}),value:t,onMouseEnter:o,onMouseLeave:d,selectedIndicatorClassName:"text-accent",children:[(0,c.jsx)(E.Z,{name:r,size:"small"}),(0,c.jsx)("span",{children:n})]})};var T=a(70122),A=a(29162),P=a(27410),I=a(86445),M=a(75023),L=a(22060),D=a(18207),R=a(6033);let z={text:M.Z,img:L.Z,button:I.Z,link:D.default,div:R.Z},O=e=>z[["p","span","h1","h2","h3","h4","h5","h6"].includes(e)?"text":"img"===e?"img":"button"===e?"button":"a"===e?"link":"div"],K=e=>["p","span","h1","h2","h3","h4","h5","h6"].includes(e.elementType)?"text":"img"===e.elementType?"img":"button"===e.elementType?"button":"a"===e.elementType?"link":"div";var Z=a(48614);let U=e=>{let{elementType:t}=e,a=O(t);return a?(0,c.jsx)(a,{fill:"white",className:"size-4"}):null},F=(0,u.memo)(()=>{let e=(0,y.Eh)(e=>e.selectedElements),t=(0,y.Eh)(e=>e.removeSelectedElement),a=e=>{var t,a;return"Line ".concat(e.lineNumber," in ").concat(null===(a=e.filePath)||void 0===a?void 0:null===(t=a.split)||void 0===t?void 0:t.call(a,"/").pop())},[s,l]=(0,u.useState)(null),n=(0,u.useCallback)(()=>{s&&t(s)},[s,t]);return(null==e?void 0:e.length)?(0,c.jsx)("div",{className:"bg-transparent",children:(0,c.jsx)("ul",{className:"flex flex-wrap gap-2",children:(0,c.jsx)(Z.M,{mode:"popLayout",children:e.map(e=>(0,c.jsx)(h.E.li,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6,transition:{duration:.15}},transition:{duration:.1,ease:[.5,1,.89,1],opacity:{duration:.1}},layoutId:"".concat(e.filePath,"-").concat(e.lineNumber),children:(0,c.jsx)(P.Z,{label:a(e),side:"top",children:(0,c.jsxs)("button",{className:"flex h-full w-full cursor-pointer items-center gap-0.5 rounded-md p-1 pr-2 hover:bg-background",onMouseEnter:()=>l(e),onMouseLeave:()=>l(null),onClick:n,children:[(0,c.jsx)(Z.M,{mode:"wait",children:(0,c.jsx)(h.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-shrink-0",children:s!==e?(0,c.jsx)(U,{elementType:e.elementType}):(0,c.jsx)(E.Z,{name:"close",size:"small"})},s===e?"close":"element")}),(0,c.jsx)("span",{className:"flex-grow select-none truncate text-left text-xs",children:"".concat(e.elementType)})]})})},"".concat(e.filePath,"-").concat(e.lineNumber)))})})}):null});F.displayName="ChatInputSelectElementsRow",(0,u.memo)(e=>{var t,a;let{element:s,onRemoveElement:l}=e,[n,r]=(0,u.useState)(!1);return(0,c.jsx)(P.Z,{label:"Line ".concat(s.lineNumber," in ").concat(null===(a=s.filePath)||void 0===a?void 0:null===(t=a.split)||void 0===t?void 0:t.call(a,"/").pop()),side:"top",children:(0,c.jsxs)("button",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:"group/select-element flex h-full w-full cursor-pointer items-center gap-0.5 rounded-md p-1 pr-2 hover:bg-background",onClick:()=>l(s),children:[(0,c.jsx)(Z.M,{mode:"wait",children:(0,c.jsx)(h.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-shrink-0",children:n?(0,c.jsx)(E.Z,{name:"close",size:"small"}):(0,c.jsx)(U,{elementType:s.elementType})},n?"close":"element")}),(0,c.jsx)("span",{className:"flex-grow select-none truncate text-left text-xs",children:"".concat(s.elementType)})]})})}).displayName="ChatInputSelectElement";var B=a(14438),W=a(21288),H=a(44481);function G(){return(0,u.useCallback)(e=>{let t=document.querySelector("iframe");(null==t?void 0:t.contentWindow)&&t.contentWindow.postMessage(e,"*")},[])}(l=i||(i={})).ELEMENT_CLICKED="ELEMENT_CLICKED",l.TOGGLE_SELECTOR="TOGGLE_SELECTOR",l.UPDATE_SELECTED_ELEMENTS="UPDATE_SELECTED_ELEMENTS",l.SELECTOR_STATE_RESPONSE="SELECTOR_STATE_RESPONSE",l.TOGGLE_PICK_AND_EDIT_REQUESTED="TOGGLE_PICK_AND_EDIT_REQUESTED",l.REQUEST_PICKER_STATE="REQUEST_PICKER_STATE",l.SELECTOR_SCRIPT_LOADED="SELECTOR_SCRIPT_LOADED",l.GET_SELECTOR_STATE="GET_SELECTOR_STATE",l.REQUEST_SELECTED_ELEMENTS="REQUEST_SELECTED_ELEMENTS",l.SET_ELEMENT_CONTENT="SET_ELEMENT_CONTENT",l.SET_ELEMENT_ATTRS="SET_ELEMENT_ATTRS",l.SET_STYLESHEET="SET_STYLESHEET",l.EDIT_TEXT_REQUESTED="EDIT_TEXT_REQUESTED",l.ELEMENT_DOUBLE_CLICKED="ELEMENT_DOUBLE_CLICKED",l.ELEMENT_TEXT_UPDATED="ELEMENT_TEXT_UPDATED",l.COMPONENT_TREE="COMPONENT_TREE",l.REQUEST_COMPONENT_TREE="REQUEST_COMPONENT_TREE",l.HOVER_ELEMENT_REQUESTED="HOVER_ELEMENT_REQUESTED",l.UNHOVER_ELEMENT_REQUESTED="UNHOVER_ELEMENT_REQUESTED",l.KEYBIND="KEYBIND",l.DUPLICATE_ELEMENT_REQUESTED="DUPLICATE_ELEMENT_REQUESTED",l.GET_PARENT_ELEMENT="GET_PARENT_ELEMENT",l.PARENT_ELEMENT="PARENT_ELEMENT",a(63611);var V=a(81103),X=a(62475),q=a(4586),Q=a(58135);let Y=e=>{let t=(0,u.useMemo)(()=>{var e,t;return(null===(t=navigator)||void 0===t?void 0:null===(e=t.userAgentData)||void 0===e?void 0:e.platform)==="macOS"||navigator.platform.toLowerCase().includes("mac")},[]),a=e=>{let a={mod:t?"⌥":"Alt",cmd:t?"⌘":"Ctrl",meta:t?"⌘":"Ctrl",shift:t?"⇧":"Shift",alt:t?"⌥":"Alt",ctrl:t?"⌃":"Ctrl",return:t?"↵":"Enter",left:"←",right:"→",up:"↑",down:"↓"},s=e.toLowerCase();return s in a?a[s]:e.toUpperCase()},s=e=>e.split("+").map(e=>e.trim()).map(a).join("-");return"string"==typeof e?s(e):e.map(e=>s(e)).join("+")},J=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let s=Y(t[0]);return(0,H.y1)(...t),s};var $=a(48349),ee=function(){let e=navigator.userAgent.toLowerCase();return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e)},et=a(5810),ea=a(13673),es=a(46214);let el=e=>{try{if(null==e)return!1;let t=e.toDate();if(new Date().getTime()-t.getTime()>3e5)return!1;return!0}catch(e){return!1}},en=()=>{let e=(0,y.Eh)(e=>e.project),t=null==e?void 0:e.locked_at,[a,s]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{if(!t||!el(t)){s(!1);return}let e=setInterval(()=>{let a=el(t);s(a),a||clearInterval(e)},250);return()=>clearInterval(e)},[t]),a};var er=a(63420),ei=a(52552),eo=a(81004),ec=a(26110),ed=a(6827),eu=a(49027),ep=a(27413),em=a(32489),eh=a(74212),eg=a(32582),ef=a(9078),ev=a(76624);let ex=()=>{let{ast:e}=(0,er.v)(),t=(0,ed.W)(e=>e.addPendingChange);return(0,u.useCallback)((a,s)=>{var l,n;let r=e.find(e=>e.filePath===a.filePath);if(!r){W.P.error("Node not found",{element:a}),B.Am.error("Node not found",{description:"Node not found"});return}let i=!1;if((0,ev.default)(r.ast,{JSXElement(e){var t;(null===(t=e.node.loc)||void 0===t?void 0:t.start.line)===a.lineNumber&&(s(e.node,e),i=!0,e.stop())}}),!i)return;let o=(l=r.ast,n={sourceMaps:!0,sourceFileName:r.filePath},(0,ef.default)(l,n,void 0).code);t(r.filePath,o)},[t,e,B.Am])};(n=o||(o={})).TEXT_CHANGE="TEXT_CHANGE",n.IMAGE_CHANGE="IMAGE_CHANGE",n.REMOVE_NODE="REMOVE_NODE",n.CLASS_NAME_UPDATE="CLASS_NAME_UPDATE",n.CLASS_NAME_SET="CLASS_NAME_SET",n.DUPLICATE_NODE="DUPLICATE_NODE";let eb={current:!1};function ey(){let{isLocked:e}=(0,eh.mp)(),{ast:t,setHistory:a}=(0,er.v)(),s=(0,y.Eh)(e=>e.isPickAndEditActive),l=(0,y.Eh)(e=>e.setIsPickAndEditActive),n=(0,y.Eh)(e=>e.selectedElements),r=(0,y.Eh)(e=>e.setSelectedElements),c=G(),d=(0,u.useCallback)((e,t)=>{c({type:i.TOGGLE_SELECTOR,payload:e}),c({type:i.UPDATE_SELECTED_ELEMENTS,payload:t})},[c]),p=(0,u.useCallback)(()=>{d(s,n)},[s,n,d]),m=(0,u.useCallback)(()=>{l(!0),d(!0,n)},[l,d,n]),h=(0,u.useCallback)(()=>{l(!1),d(!1,n)},[l,d,n]),g=(0,u.useCallback)(()=>{s?h():m()},[s,m,h]),f=ex();(0,u.useEffect)(()=>{c({type:i.TOGGLE_SELECTOR,payload:s})},[c,s]);let v=(0,u.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,a=e.data.lineNumber.toString();t&&a&&c({type:i.HOVER_ELEMENT_REQUESTED,payload:{id:{path:t,line:a}}})},[c]),x=(0,u.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,a=e.data.lineNumber.toString();t&&a&&c({type:i.UNHOVER_ELEMENT_REQUESTED,payload:{id:{path:t,line:a}}})},[c]),b=(0,u.useCallback)(e=>{if(!e){B.Am.error("Failed to select element");return}es.ZP.capture("visual_edits:element_selected",{type:e.elementType});try{var t;let a=e=>e?JSON.parse(decodeURIComponent(e.toString())):null,s={...e,content:a(e.content),children:null===(t=e.children)||void 0===t?void 0:t.map(e=>({...e,content:a(e.content)}))};r([s]),c({type:i.UPDATE_SELECTED_ELEMENTS,payload:[s]})}catch(t){B.Am.error("Error processing element data",{description:t instanceof Error?t.message:"Unknown error"}),W.P.error("Error in handleElementClick",{error:t,elementData:e})}},[r,c]),j=(0,u.useRef)();return(0,u.useEffect)(()=>{j.current=d=>{switch(d.data.type){case"ELEMENT_CLICKED":{let a=d.data.payload;!e&&"button"!==a.elementType&&(0,eg.H2)({...a,content:null},t)&&c({type:i.EDIT_TEXT_REQUESTED,payload:{id:{path:a.filePath,line:"".concat(a.lineNumber)}}}),b(d.data.payload)}break;case"TOGGLE_PICK_AND_EDIT_REQUESTED":case"ELEMENT_DOUBLE_CLICKED":break;case"REQUEST_PICKER_STATE":case"REQUEST_SELECTED_ELEMENTS":c({type:i.UPDATE_SELECTED_ELEMENTS,payload:n});break;case"SELECTOR_SCRIPT_LOADED":p();break;case"GET_SELECTOR_STATE":c({type:i.SELECTOR_STATE_RESPONSE,payload:{isActive:s}});break;case"ELEMENT_TEXT_UPDATED":{es.ZP.capture("visual_edits:element_text_updated");let e=d.data.payload,t=n.find(t=>t.filePath===e.id.path&&t.lineNumber.toString()===e.id.line);if(!t)return;let s={...t,textContent:e.content};r([s,...n.filter(e=>e.filePath!==t.filePath||e.lineNumber!==t.lineNumber)]),f(s,t=>(0,eg.Rw)(t,e.content)),a(a=>[...a,{type:o.TEXT_CHANGE,element:s,oldText:t.textContent||"",newText:e.content}]);break}case"SELECTOR_SCRIPT_LOADED":c({type:i.TOGGLE_SELECTOR,payload:!0}),l(!0);break;case"PARENT_ELEMENT":{es.ZP.capture("visual_edits:get_parent_element");let e=d.data.payload;console.log(e),e&&b(e)}}}},[t,b,p,e,s,f,n,c,a,l,r]),(0,u.useEffect)(()=>{if(!eb.current){let e=e=>{var t;null===(t=j.current)||void 0===t||t.call(j,e)};return window.addEventListener("message",e),eb.current=!0,()=>{window.removeEventListener("message",e),eb.current=!1}}},[]),(0,H.y1)("esc",e=>{e.preventDefault(),e.stopPropagation()},{enableOnFormTags:!0},[]),(0,u.useEffect)(()=>{c({type:i.UPDATE_SELECTED_ELEMENTS,payload:n}),p()},[n,s,c,p]),{isPickAndEditActive:s,togglePickAndEdit:g,handleDeactivatePickAndEdit:h,selectedElements:n,hoverElement:v,unhoverElement:x,canEdit:!e}}var ej=a(35974),ew=a(76818),eE=a(61312),eN=a(84900),ek=a(11594);let eC=e=>{let{size:t=.666,lightColor:a="#fff",darkColor:s="#ddd",...l}=e,n=t/2,r=(0,u.useId)();return(0,c.jsxs)("svg",{width:"100%",height:"100%",...l,children:[(0,c.jsx)("defs",{children:(0,c.jsxs)("pattern",{id:"".concat(r,"-transparent-pattern"),width:"".concat(t,"rem"),height:"".concat(t,"rem"),patternUnits:"userSpaceOnUse",children:[(0,c.jsx)("rect",{width:"".concat(t,"rem"),height:"".concat(t,"rem"),fill:a}),(0,c.jsx)("rect",{x:"0",width:"".concat(n,"rem"),height:"".concat(n,"rem"),y:"0",fill:s}),(0,c.jsx)("rect",{x:"".concat(n,"rem"),width:"".concat(n,"rem"),height:"".concat(n,"rem"),y:"".concat(n,"rem"),fill:s})]})}),(0,c.jsx)("rect",{width:"100%",height:"100%",fill:"url(#".concat(r,"-transparent-pattern)")})]})};var e_=a(95186),eS=a(26815),eT=a(57054),eA=a(38846);function eP(e){if(!e)return null;try{e=e.replace("#",""),(3===e.length||4===e.length)&&(e=e.split("").map(e=>e+e).join(""));let t=8===e.length,a=parseInt(e.slice(0,2),16),s=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16),n=t?parseInt(e.slice(6,8),16)/255:1;return{r:isNaN(a)?0:a,g:isNaN(s)?0:s,b:isNaN(l)?0:l,a:isNaN(n)?1:n}}catch(e){return null}}function eI(e,t,a,s){let l=e=>Math.round(e).toString(16).padStart(2,"0"),n=Math.round(255*s);return"#".concat(l(e)).concat(l(t)).concat(l(a)).concat(n<255?l(n):"")}function eM(e,t,a,s){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=Math.max(e/=255,t/=255,a/=255),r=Math.min(e,t,a),i=n-r,o=0,c=0===n?0:i/n;if(n===r)return{h:l,s:100*c,v:100*n,a:s};switch(n){case e:o=(t-a)/i+(t<a?6:0);break;case t:o=(a-e)/i+2;break;case a:o=(e-t)/i+4}return{h:360*(o/=6),s:100*c,v:100*n,a:s}}function eL(e,t,a,s){let l=0,n=0,r=0,i=Math.floor(6*(e/=360)),o=6*e-i,c=(a/=100)*(1-(t/=100)),d=a*(1-o*t),u=a*(1-(1-o)*t);switch(i%6){case 0:l=a,n=u,r=c;break;case 1:l=d,n=a,r=c;break;case 2:l=c,n=a,r=u;break;case 3:l=c,n=d,r=a;break;case 4:l=u,n=c,r=a;break;case 5:l=a,n=c,r=d}return{r:Math.round(255*l),g:Math.round(255*n),b:Math.round(255*r),a:s}}let eD=e=>{if(!e)return{singles:[],groups:[]};let t=[],a=[];for(let[s,l]of Object.entries(e))if("string"!=typeof l){let e=[];for(let[t,a]of Object.entries(l))"string"!=typeof a||a.includes("--")||e.push(["".concat(s,"-").concat(t),a]);e.length>0&&a.push([s,e])}else{if(l.includes("--"))continue;t.push([s,l])}return{singles:t.filter(e=>{let[t]=e;return["black","white"].includes(t)}),groups:a}},eR=u.createContext(null);function ez(e){let{children:t}=e,[a,s]=u.useState(null),l=u.useRef(null),n=u.useCallback(e=>{s(e),l.current=e},[]),r=u.useRef(null),i=u.useCallback(()=>{s(null)},[]);return(0,c.jsxs)(eR.Provider,{value:{showTooltip:n,hideTooltip:i},children:[t,(0,c.jsx)("div",{ref:r,className:(0,m.cn)("pointer-events-none fixed h-fit w-fit rounded-md border bg-muted px-2 py-1 text-sm text-foreground shadow-sm transition-opacity duration-100 ease-out","bottom-4 right-4 whitespace-nowrap capitalize",a?"opacity-100":"opacity-0"),children:l.current})]})}let eO=e=>{let{color:t,onClick:a,name:s}=e,l=u.useContext(eR),n="transparent"===t?(0,c.jsx)(eC,{size:.666,lightColor:"#fff",darkColor:"#ddd"}):(0,c.jsx)("div",{className:"h-full w-full rounded-sm",style:{backgroundColor:t,boxShadow:"0px 0px 0px 1px hsl(0deg 0% 98% / 10%) inset"}});return(0,c.jsx)(j.z,{className:"h-8 w-8 overflow-hidden rounded-sm border-none bg-transparent p-0 ring-white hover:ring-[1px]",onClick:a,onMouseOver:e=>{e.currentTarget.getBoundingClientRect(),null==l||l.showTooltip(s)},onMouseLeave:()=>null==l?void 0:l.hideTooltip(),children:n})},eK=e=>{let{colors:t,onChange:a}=e,s=u.useMemo(()=>eD(t),[t]);return(0,c.jsx)(ez,{children:(0,c.jsxs)("div",{className:"flex flex-col gap-4",children:[s.groups.map(e=>{let[t,s]=e;return(0,c.jsxs)("div",{children:[(0,c.jsx)(eS._,{className:"block pb-2 text-sm capitalize",children:t}),(0,c.jsx)("div",{className:"flex flex-row flex-wrap gap-1.5",children:s.map(e=>{let[t,s]=e;return(0,c.jsx)(eO,{color:s,onClick:()=>a(t),name:t},t)})})]},t)}),(0,c.jsxs)("div",{children:[(0,c.jsx)(eS._,{className:"block pb-4 text-sm capitalize",children:"Other Colors"}),(0,c.jsxs)("div",{className:"flex flex-row flex-wrap gap-1.5",children:[s.singles.map(e=>{let[t,s]=e;return(0,c.jsx)(eO,{color:s,onClick:()=>a(t),name:t},t)}),(0,c.jsx)(eO,{color:"transparent",onClick:()=>a("transparent"),name:"transparent"}),(0,c.jsx)(eO,{color:"black",onClick:()=>a("inherit"),name:"inherit"})]})]})]})})};function eZ(e){let{color:t,onChange:a,presetColors:s,children:l,disabled:n=!1}=e,[r,i]=u.useState(()=>eP(t)||{r:0,g:0,b:0,a:1}),[o,d]=u.useState(()=>eM(r.r,r.g,r.b,r.a,0)),[m,h]=u.useState(t),[g,f]=u.useState(!1);u.useEffect(()=>{if(t===m)return;let e=eP(t)||{r:0,g:0,b:0,a:1},a=eM(e.r,e.g,e.b,e.a,o.h);i(e),d(a),h(t)},[t,m,o.h]);let v=u.useRef(null),[x,b]=u.useState(!1),y=u.useCallback(e=>{var t;let s=null===(t=v.current)||void 0===t?void 0:t.getBoundingClientRect();if(!s)return;let l=Math.min(Math.max(0,e.clientX-s.left),s.width),n=Math.min(Math.max(0,e.clientY-s.top),s.height),r=l/s.width*100,c=100-n/s.height*100,u=eL(o.h,r,c,o.a);i(u),d({...o,s:r,v:c,a:o.a}),a(eI(u.r,u.g,u.b,u.a))},[o,a]);u.useEffect(()=>{let e=e=>{x&&y(e)},t=()=>{b(!1),document.body.classList.remove("select-none")};return x&&(document.body.classList.add("select-none"),window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{document.body.classList.remove("select-none"),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[x,y]);let j=u.useCallback(e=>{let[t]=e;d({...o,h:t});let s=eL(t,o.s,o.v,o.a);i(s),a(eI(s.r,s.g,s.b,s.a))},[o,a]),w=u.useCallback(e=>{let[t]=e;d({...o,a:t});let s=eL(o.h,o.s,o.v,t);i(s),a(eI(s.r,s.g,s.b,s.a))},[o,a]);return(0,c.jsxs)(eT.J2,{open:g,onOpenChange:n?void 0:f,children:[(0,c.jsx)(eT.xo,{disabled:n,asChild:!0,children:l}),(0,c.jsx)(eT.yk,{className:"mb-0 flex w-[285px] flex-col overflow-y-hidden rounded-lg border border-muted-border bg-popover px-0 pb-0 pt-0 shadow-lg",style:{maxHeight:"var(--radix-popover-content-available-height)"},collisionPadding:5,onKeyDown:e=>{"Escape"===e.key&&(f(!1),e.preventDefault(),e.stopPropagation())},children:(0,c.jsxs)(p.mQ,{defaultValue:"styles",className:"flex min-h-0 flex-1 flex-col",children:[(0,c.jsxs)(p.dr,{className:"my-1 w-full px-4",children:[(0,c.jsx)(p.SP,{disabled:n,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"styles",children:"Styles"}),(0,c.jsx)(p.SP,{disabled:n,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"custom",children:"Custom"})]}),(0,c.jsx)(p.nU,{value:"styles",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,c.jsx)(ez,{children:!!s&&(0,c.jsx)(eK,{colors:s,onChange:a})})}),(0,c.jsx)(p.nU,{value:"custom",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,c.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{ref:v,className:"relative h-56 w-full rounded-md ".concat(n?"cursor-not-allowed opacity-50":"cursor-default"),style:{backgroundColor:"hsl(".concat(o.h,", 100%, 50%)"),backgroundImage:"linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)"},onMouseDown:e=>{n||(b(!0),y(e))},children:(0,c.jsx)("div",{className:"absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white shadow-md shadow-muted/50",style:{left:"".concat(o.s,"%"),top:"".concat(100-o.v,"%"),backgroundColor:"rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b)}})}),(0,c.jsxs)(eA.fC,{disabled:n,min:0,max:360,step:1,value:[o.h],onValueChange:j,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",children:[(0,c.jsx)(eA.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full bg-primary/20",style:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},children:(0,c.jsx)(eA.e6,{className:"absolute h-full bg-primary opacity-0"})}),(0,c.jsx)(eA.bU,{className:"block h-4 w-4 rounded-full border-2 border-primary bg-background shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",style:{backgroundColor:"hsl(".concat(o.h,", 100%, 50%)")}})]}),(0,c.jsxs)(eA.fC,{disabled:n,min:0,max:1,step:.01,value:[o.a],onValueChange:w,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",style:{"--value":eI(r.r,r.g,r.b,1)},children:[(0,c.jsxs)(eA.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full",children:[(0,c.jsx)("div",{className:"absolute inset-0",children:(0,c.jsx)(eC,{size:.666,lightColor:"#fff",darkColor:"#ddd"})}),(0,c.jsx)("div",{className:"absolute inset-0",children:(0,c.jsx)("div",{className:"h-full w-full",style:{background:"linear-gradient(to right, transparent 0%, ".concat(eI(r.r,r.g,r.b,1)," 100%)")}})})]}),(0,c.jsx)(eA.bU,{className:"relative block h-4 w-4 rounded-full border-2 border-primary bg-white shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",children:(0,c.jsx)("span",{className:"absolute inset-0 rounded-full",style:{backgroundColor:eI(r.r,r.g,r.b,o.a)}})})]})]}),(0,c.jsx)("div",{className:"grid gap-2",children:(0,c.jsx)("div",{className:"grid grid-cols-2 gap-2",children:(0,c.jsxs)("div",{children:[(0,c.jsx)(eS._,{className:"text-xs",htmlFor:"hex",children:"Hex"}),(0,c.jsx)(e_.I,{id:"hex",disabled:n,value:m,onChange:e=>{if(n)return;let t=e.target.value;h(t);let s=eP(t);s&&(i(s),d(eM(s.r,s.g,s.b,s.a,0)),a(t))},className:"h-8 bg-input"})]})})})]})})]})})]})}var eU=a(9259),eF=a(53647);let eB=new Uint8Array(256);function eW(e,t){let a=0,s=[],l=0,n=e.length,r=t.charCodeAt(0);for(let t=0;t<n;t++){let i=e.charCodeAt(t);if(0===a&&i===r){s.push(e.slice(l,t)),l=t+1;continue}switch(i){case 92:t+=1;break;case 39:case 34:for(;++t<n;){let a=e.charCodeAt(t);if(92===a){t+=1;continue}if(a===i)break}break;case 40:eB[a]=41,a++;break;case 91:eB[a]=93,a++;break;case 123:eB[a]=125,a++;break;case 93:case 125:case 41:a>0&&i===eB[a-1]&&a--}}return s.push(e.slice(l)),s}let eH=new Map([["w",[{scaleKey:"width",ns:"width",class:["width"],type:"length"}]],["min-w",[{scaleKey:"minWidth",ns:"minWidth",class:["min-width"],type:"length"}]],["max-w",[{scaleKey:"maxWidth",ns:"maxWidth",class:["max-width"],type:"length"}]],["h",[{scaleKey:"height",ns:"height",class:["height"],type:"length"}]],["min-h",[{scaleKey:"minHeight",ns:"minHeight",class:["min-height"],type:"length"}]],["max-h",[{scaleKey:"maxHeight",ns:"maxHeight",class:["max-height"],type:"length"}]],["size",[{scaleKey:"size",ns:"size",class:["width","height"],type:"length"}]],["m",[{scaleKey:"margin",ns:"margin",class:["margin"],type:"length",supportNegative:!0}]],["mx",[{scaleKey:"margin",ns:"marginX",class:["margin-left","margin-right"],type:"length",supportNegative:!0}]],["my",[{scaleKey:"margin",ns:"marginY",class:["margin-top","margin-bottom"],type:"length",supportNegative:!0}]],["mt",[{scaleKey:"margin",ns:"marginTop",class:["margin-top"],type:"length",supportNegative:!0}]],["mr",[{scaleKey:"margin",ns:"marginRight",class:["margin-right"],type:"length",supportNegative:!0}]],["mb",[{scaleKey:"margin",ns:"marginBottom",class:["margin-bottom"],type:"length",supportNegative:!0}]],["ml",[{scaleKey:"margin",ns:"marginLeft",class:["margin-left"],type:"length",supportNegative:!0}]],["p",[{scaleKey:"padding",ns:"padding",class:["padding"],type:"length"}]],["px",[{scaleKey:"padding",ns:"paddingX",class:["padding-left","padding-right"],type:"length"}]],["py",[{scaleKey:"padding",ns:"paddingY",class:["padding-top","padding-bottom"],type:"length"}]],["pt",[{scaleKey:"padding",ns:"paddingTop",class:["padding-top"],type:"length"}]],["pr",[{scaleKey:"padding",ns:"paddingRight",class:["padding-right"],type:"length"}]],["pb",[{scaleKey:"padding",ns:"paddingBottom",class:["padding-bottom"],type:"length"}]],["pl",[{scaleKey:"padding",ns:"paddingLeft",class:["padding-left"],type:"length"}]],["text",[{scaleKey:"fontSize",ns:"fontSize",class:["font-size"],type:"length"},{scaleKey:"textColor",ns:"textColor",class:["color"],type:"color"}]],["indent",[{scaleKey:"textIndent",ns:"textIndent",class:["text-indent"],type:"length",supportNegative:!0}]],["underline-offset",[{scaleKey:"textUnderlineOffset",ns:"textUnderlineOffset",class:["text-underline-offset"],type:"number"}]],["decoration",[{scaleKey:"textDecorationThickness",ns:"textDecorationThickness",class:["text-decoration-thickness"],type:"number"},{scaleKey:"textDecorationColor",ns:"textDecorationColor",class:["text-decoration-color"],type:"color"}]],["font",[{scaleKey:"fontWeight",ns:"fontWeight",class:["font-weight"],type:"number"},{scaleKey:"fontFamily",ns:"fontFamily",class:["font-family"],type:"family-name"}]],["leading",[{scaleKey:"lineHeight",ns:"lineHeight",class:["line-height"],type:"number"}]],["tracking",[{scaleKey:"letterSpacing",ns:"letterSpacing",class:["letter-spacing"],type:"length",supportNegative:!0}]],["bg",[{scaleKey:"backgroundImage",ns:"backgroundImage",class:["background-image"],type:"image"},{scaleKey:"backgroundPosition",ns:"backgroundPosition",class:["background-position"],type:"position"},{scaleKey:"backgroundSize",ns:"backgroundSize",class:["background-size"],type:"bg-size"},{scaleKey:"backgroundColor",ns:"backgroundColor",class:["background-color"],type:"color"}]],["from",[{scaleKey:"gradientColorStops",ns:"gradientStopsFrom",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsFromPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["to",[{scaleKey:"gradientColorStops",ns:"gradientStopsTo",class:["--tw-gradient-to","--tw-gradient-to-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsToPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["via",[{scaleKey:"gradientColorStops",ns:"gradientStopsVia",class:["--tw-gradient-from"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsViaPositions",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["fill",[{scaleKey:"fill",ns:"fillColor",class:["fill"],type:"color"}]],["stroke",[{scaleKey:"strokeWidth",ns:"strokeWidth",class:["stroke-width"],type:"line-width"},{scaleKey:"stroke",ns:"strokeColor",class:["border-color"],type:"color"}]],["border",[{scaleKey:"borderWidth",ns:"borderWidth",class:["border-width"],type:"line-width"},{scaleKey:"borderColor",ns:"borderColor",class:["border-color"],type:"color"}]],["ring",[{scaleKey:"ringWidth",ns:"ringWidth",class:["box-shadow"],type:"line-width"},{scaleKey:"ringColor",ns:"ringColor",class:["--tw-ring-color"],type:"color"}]],["ring-offset",[{scaleKey:"ringOffsetWidth",ns:"ringOffsetWidth",class:["--tw-ring-offset-width"],type:"line-width"},{scaleKey:"ringOffsetColor",ns:"ringOffsetColor",class:["--tw-ring-offset-color"],type:"color"}]],["rounded",[{scaleKey:"borderRadius",ns:"borderRadius",class:["border-radius"],type:"length"}]],["rounded-tl",[{scaleKey:"borderRadius",ns:"borderTopLeftRadius",class:["border-top-left-radius"],type:"length"}]],["rounded-tr",[{scaleKey:"borderRadius",ns:"borderTopRightRadius",class:["border-top-right-radius"],type:"length"}]],["rounded-br",[{scaleKey:"borderRadius",ns:"borderBottomRightRadius",class:["border-bottom-right-radius"],type:"length"}]],["rounded-bl",[{scaleKey:"borderRadius",ns:"borderBottomLeftRadius",class:["border-bottom-left-radius"],type:"length"}]],["flex",[{scaleKey:"flex",ns:"flex",class:["flex"],type:"number"}]],["basis",[{scaleKey:"flexBasis",ns:"flexBasis",class:["flex-basis"],type:"length"}]],["grid-cols",[{scaleKey:"gridTemplateColumns",ns:"gridTemplateColumns",class:["grid-template-columns"],type:"number"}]],["grid-rows",[{scaleKey:"gridTemplateRows",ns:"gridTemplateRows",class:["grid-template-rows"],type:"number"}]],["gap",[{scaleKey:"gap",ns:"gap",class:["gap"],type:"length"}]],["gap-x",[{scaleKey:"gap",ns:"gapX",class:["gap"],type:"length"}]],["gap-y",[{scaleKey:"gap",ns:"gapY",class:["gap"],type:"length"}]],["divide-x",[{scaleKey:"divideWidth",ns:"divideX",class:["border-left-width","border-right-width"],type:"length"}]],["divide-y",[{scaleKey:"divideWidth",ns:"divideY",class:["border-top-width","border-bottom-width"],type:"length"}]],["divide",[{scaleKey:"divideColor",ns:"divideColor",class:["--tw-divide-color"],type:"color"}]],["divide-opacity",[{scaleKey:"divideOpacity",ns:"divideOpacity",class:["--tw-divide-opacity"],type:"number"}]],["col",[{scaleKey:"gridColumn",ns:"gridColumn",class:["grid-column"],type:"number"}]],["row",[{scaleKey:"gridRow",ns:"gridRow",class:["grid-row"],type:"number"}]],["space-x",[{scaleKey:"spacing",ns:"spaceX",class:["margin-left"],type:"number",supportNegative:!0}]],["space-y",[{scaleKey:"spacing",ns:"spaceY",class:["margin-top"],type:"number",supportNegative:!0}]],["opacity",[{scaleKey:"opacity",ns:"opacity",class:["opacity"],type:"number"}]],["shadow",[{scaleKey:"boxShadow",ns:"boxShadow",class:["box-shadow"],type:"length"},{scaleKey:"boxShadowColor",ns:"boxShadowColor",class:["box-shadow"],type:"color"}]],["transition",[{scaleKey:"transitionProperty",ns:"transitionProperty",class:["transition-property"],type:"named"}]],["duration",[{scaleKey:"transitionDuration",ns:"transitionDuration",class:["transition-duration"],type:"number"}]],["delay",[{scaleKey:"transitionDelay",ns:"transitionDelay",class:["transition-delay"],type:"number"}]],["scale",[{scaleKey:"scale",ns:"scale",class:["scale"],type:"number",supportNegative:!0}]],["rotate",[{scaleKey:"rotate",ns:"rotate",class:["rotate"],type:"angle",supportNegative:!0}]],["translate",[{scaleKey:"translate",ns:"translate",class:["transform"],type:"length",supportNegative:!0}]],["translate-y",[{scaleKey:"translate",ns:"translateY",class:["transform"],type:"length",supportNegative:!0}]],["translate-x",[{scaleKey:"translate",ns:"translateX",class:["transform"],type:"length",supportNegative:!0}]],["skew",[{scaleKey:"skew",ns:"skew",class:["skew"],type:"angle",supportNegative:!0}]],["z",[{scaleKey:"zIndex",ns:"zIndex",class:["z-index"],type:"number",supportNegative:!0}]],["inset",[{scaleKey:"inset",ns:"inset",class:["inset"],type:"length",supportNegative:!0}]],["inset-x",[{scaleKey:"inset",ns:"insetX",class:["left","right"],type:"length",supportNegative:!0}]],["inset-y",[{scaleKey:"inset",ns:"insetY",class:["top","bottom"],type:"length",supportNegative:!0}]],["top",[{scaleKey:"inset",ns:"positionTop",class:["top"],type:"length",supportNegative:!0}]],["right",[{scaleKey:"inset",ns:"positionRight",class:["right"],type:"length",supportNegative:!0}]],["bottom",[{scaleKey:"inset",ns:"positionBottom",class:["bottom"],type:"length",supportNegative:!0}]],["left",[{scaleKey:"inset",ns:"positionLeft",class:["left"],type:"length",supportNegative:!0}]],["start",[{scaleKey:"inset",ns:"insetInlineStart",class:["inset-inline-start"],type:"length",supportNegative:!0}]],["end",[{scaleKey:"inset",ns:"insetInlineEnd",class:["inset-inline-end"],type:"length",supportNegative:!0}]],["order",[{scaleKey:"order",ns:"order",class:["order"],type:"length",supportNegative:!0}]],["blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["brightness",[{scaleKey:"brightness",ns:"brightness",class:["filter"],type:"number"}]],["contrast",[{scaleKey:"contrast",ns:"contrast",class:["filter"],type:"number"}]],["drop-shadow",[{scaleKey:"dropShadow",ns:"dropShadow",class:["filter"],type:"number"}]],["hue-rotate",[{scaleKey:"hueRotate",ns:"hueRotate",class:["filter"],type:"number"}]],["saturate",[{scaleKey:"saturate",ns:"saturate",class:["filter"],type:"number"}]],["backdrop-blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["backdrop-brightness",[{scaleKey:"backdropBrightness",ns:"backdropBrightness",class:["backdrop-filter"],type:"number"}]],["backdrop-contrast",[{scaleKey:"backdropContrast",ns:"backdropContrast",class:["backdrop-filter"],type:"number"}]],["backdrop-drop-shadow",[{scaleKey:"backdropDropShadow",ns:"backdropDropShadow",class:["backdrop-filter"],type:"number"}]],["backdrop-hue-rotate",[{scaleKey:"backdropHueRotate",ns:"backdropHueRotate",class:["backdrop-filter"],type:"number"}]],["backdrop-saturate",[{scaleKey:"backdropSaturate",ns:"backdropSaturate",class:["backdrop-filter"],type:"number"}]]]),eG=new Map([["border-solid",{class:["border-style"],value:"solid",ns:"borderStyle"}],["border-dashed",{class:["border-style"],value:"dashed",ns:"borderStyle"}],["border-dotted",{class:["border-style"],value:"dotted",ns:"borderStyle"}],["border-double",{class:["border-style"],value:"double",ns:"borderStyle"}],["border-none",{class:["border-style"],value:"none",ns:"borderStyle"}],["ring-inset",{class:["--tw-ring-inset"],value:"inset",ns:"ring"}],["divide-solid",{class:["divide-style"],value:"solid",ns:"divideStyle"}],["divide-dashed",{class:["divide-style"],value:"dashed",ns:"divideStyle"}],["divide-dotted",{class:["divide-style"],value:"dotted",ns:"divideStyle"}],["divide-double",{class:["divide-style"],value:"double",ns:"divideStyle"}],["divide-none",{class:["divide-style"],value:"none",ns:"divideStyle"}],["block",{class:["display"],value:"block",ns:"display"}],["inline-block",{class:["display"],value:"inline-block",ns:"display"}],["inline",{class:["display"],value:"inline",ns:"display"}],["flex",{class:["display"],value:"flex",ns:"display"}],["grid",{class:["display"],value:"grid",ns:"display"}],["hidden",{class:["display"],value:"none",ns:"display"}],["table",{class:["display"],value:"table",ns:"display"}],["table-row",{class:["display"],value:"table-row",ns:"display"}],["table-cell",{class:["display"],value:"table-cell",ns:"display"}],["contents",{class:["display"],value:"contents",ns:"display"}],["list-item",{class:["display"],value:"list-item",ns:"display"}],["flow-root",{class:["display"],value:"flow-root",ns:"display"}],["visible",{class:["visibility"],value:"visible",ns:"visibility"}],["invisible",{class:["visibility"],value:"hidden",ns:"visibility"}],["hyphens-none",{class:["hyphens"],value:"none",ns:"hyphens"}],["hyphens-manual",{class:["hyphens"],value:"manual",ns:"hyphens"}],["hyphens-auto",{class:["hyphens"],value:"auto",ns:"hyphens"}],["break-normal",{class:["word-break","overflow-wrap"],value:"normal",ns:"wordBreak"}],["break-words",{class:["overflow-wrap"],value:"break-word",ns:"wordBreak"}],["break-all",{class:["word-break"],value:"break-all",ns:"wordBreak"}],["break-keep",{class:["word-break"],value:"keep-all",ns:"wordBreak"}],["whitespace-normal",{class:["white-space"],value:"normal",ns:"whitespace"}],["whitespace-nowrap",{class:["white-space"],value:"nowrap",ns:"whitespace"}],["whitespace-pre",{class:["white-space"],value:"pre",ns:"whitespace"}],["whitespace-pre-line",{class:["white-space"],value:"pre-line",ns:"whitespace"}],["whitespace-pre-wrap",{class:["white-space"],value:"pre-wrap",ns:"whitespace"}],["whitespace-break-spaces",{class:["white-space"],value:"break-spaces",ns:"whitespace"}],["static",{class:["position"],value:"static",ns:"position"}],["fixed",{class:["position"],value:"fixed",ns:"position"}],["absolute",{class:["position"],value:"absolute",ns:"position"}],["relative",{class:["position"],value:"relative",ns:"position"}],["sticky",{class:["position"],value:"sticky",ns:"position"}],["overflow-auto",{class:["overflow"],value:"auto",ns:"overflow"}],["overflow-hidden",{class:["overflow"],value:"hidden",ns:"overflow"}],["overflow-visible",{class:["overflow"],value:"visible",ns:"overflow"}],["overflow-scroll",{class:["overflow"],value:"scroll",ns:"overflow"}],["overflow-x-auto",{class:["overflow-x"],value:"auto",ns:"overflowX"}],["overflow-x-hidden",{class:["overflow-x"],value:"hidden",ns:"overflowX"}],["overflow-x-visible",{class:["overflow-x"],value:"visible",ns:"overflowX"}],["overflow-x-scroll",{class:["overflow-x"],value:"scroll",ns:"overflowX"}],["overflow-y-auto",{class:["overflow-y"],value:"auto",ns:"overflowY"}],["overflow-y-hidden",{class:["overflow-y"],value:"hidden",ns:"overflowY"}],["overflow-y-visible",{class:["overflow-y"],value:"visible",ns:"overflowY"}],["overflow-y-scroll",{class:["overflow-y"],value:"scroll",ns:"overflowY"}],["text-left",{class:["text-align"],value:"left",ns:"textAlign"}],["text-center",{class:["text-align"],value:"center",ns:"textAlign"}],["text-right",{class:["text-align"],value:"right",ns:"textAlign"}],["text-justify",{class:["text-align"],value:"justify",ns:"textAlign"}],["text-start",{class:["text-align"],value:"start",ns:"textAlign"}],["text-end",{class:["text-align"],value:"end",ns:"textAlign"}],["underline",{class:["text-decoration-line"],value:"underline",ns:"textDecoration"}],["line-through",{class:["text-decoration-line"],value:"line-through",ns:"textDecoration"}],["overline",{class:["text-decoration-line"],value:"overline",ns:"textDecoration"}],["no-underline",{class:["text-decoration-line"],value:"none",ns:"textDecoration"}],["text-wrap",{class:["text-wrap"],value:"wrap",ns:"textWrap"}],["text-nowrap",{class:["text-wrap"],value:"nowrap",ns:"textWrap"}],["text-balance",{class:["text-wrap"],value:"balance",ns:"textWrap"}],["text-pretty",{class:["text-wrap"],value:"pretty",ns:"textWrap"}],["truncate",{class:["overflow","text-overflow","white-space"],value:"",ns:"TextOverflow"}],["text-ellipsis",{class:["text-overflow"],value:"ellipsis",ns:"textWrap"}],["text-clip",{class:["text-overflow"],value:"clip",ns:"textWrap"}],["uppercase",{class:["text-transform"],value:"uppercase",ns:"textTransform"}],["lowercase",{class:["text-transform"],value:"lowercase",ns:"textTransform"}],["capitalize",{class:["text-transform"],value:"capitalize",ns:"textTransform"}],["normal-case",{class:["text-transform"],value:"none",ns:"textTransform"}],["italic",{class:["font-style"],value:"italic",ns:"fontStyle"}],["not-italic",{class:["font-style"],value:"normal",ns:"fontStyle"}],["bg-fixed",{class:["background-attachment"],value:"fixed",ns:"backgroundAttachment"}],["bg-local",{class:["background-attachment"],value:"local",ns:"backgroundAttachment"}],["bg-scroll",{class:["background-attachment"],value:"scroll",ns:"backgroundAttachment"}],["bg-repeat",{class:["background-repeat"],value:"repeat",ns:"backgroundRepeat"}],["bg-no-repeat",{class:["background-repeat"],value:"no-repeat",ns:"backgroundRepeat"}],["bg-repeat-x",{class:["background-repeat"],value:"repeat-x",ns:"backgroundRepeat"}],["bg-repeat-y",{class:["background-repeat"],value:"repeat-y",ns:"backgroundRepeat"}],["bg-repeat-round",{class:["background-repeat"],value:"round",ns:"backgroundRepeat"}],["bg-repeat-space",{class:["background-repeat"],value:"space",ns:"backgroundRepeat"}],["bg-origin-border",{class:["background-origin"],value:"border",ns:"backgroundOrigin"}],["bg-origin-padding",{class:["background-origin"],value:"padding",ns:"backgroundOrigin"}],["bg-origin-content",{class:["background-origin"],value:"content",ns:"backgroundOrigin"}],["flex-row",{class:["flex-direction"],value:"row",ns:"flexDirection"}],["flex-row-reverse",{class:["flex-direction"],value:"row-reverse",ns:"flexDirection"}],["flex-col",{class:["flex-direction"],value:"column",ns:"flexDirection"}],["flex-col-reverse",{class:["flex-direction"],value:"column-reverse",ns:"flexDirection"}],["flex-wrap",{class:["flex-wrap"],value:"wrap",ns:"flexWrap"}],["flex-wrap-reverse",{class:["flex-wrap"],value:"wrap-reverse",ns:"flexWrap"}],["flex-nowrap",{class:["flex-wrap"],value:"nowrap",ns:"flexWrap"}],["items-start",{class:["align-items"],value:"flex-start",ns:"alignItems"}],["items-end",{class:["align-items"],value:"flex-end",ns:"alignItems"}],["items-center",{class:["align-items"],value:"center",ns:"alignItems"}],["items-baseline",{class:["align-items"],value:"baseline",ns:"alignItems"}],["items-stretch",{class:["align-items"],value:"stretch",ns:"alignItems"}],["justify-start",{class:["justify-content"],value:"flex-start",ns:"justifyContent"}],["justify-end",{class:["justify-content"],value:"flex-end",ns:"justifyContent"}],["justify-center",{class:["justify-content"],value:"center",ns:"justifyContent"}],["justify-between",{class:["justify-content"],value:"space-between",ns:"justifyContent"}],["justify-around",{class:["justify-content"],value:"space-around",ns:"justifyContent"}],["justify-evenly",{class:["justify-content"],value:"space-evenly",ns:"justifyContent"}],["grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["flex-grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["flex-grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["flex-shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["flex-shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["basis-auto",{class:["flex-basis"],value:"auto",ns:"flexBasis"}],["basis-full",{class:["flex-basis"],value:"100%",ns:"flexBasis"}],["grayscale",{class:["filter"],value:"grayscale(100%)",ns:"grayScale"}],["grayscale-0",{class:["filter"],value:"grayscale(0)",ns:"grayScale"}],["invert",{class:["filter"],value:"invert(100%)",ns:"invert"}],["invert-0",{class:["filter"],value:"invert(0)",ns:"invert"}],["sepia",{class:["filter"],value:"sepia(100%)",ns:"sepia"}],["sepia-0",{class:["filter"],value:"sepia(0)",ns:"sepia"}],["backdrop-grayscale",{class:["backdrop-filter"],value:"backdrop-grayscale(100%)",ns:"backdropGrayScale"}],["backdrop-grayscale-0",{class:["backdrop-filter"],value:"backdrop-grayscale(0)",ns:"backdropGrayScale"}],["backdrop-invert",{class:["backdrop-filter"],value:"backdrop-invert(100%)",ns:"backdrop-invert"}],["backdrop-invert-0",{class:["backdrop-filter"],value:"backdrop-invert(0)",ns:"backdrop-invert"}],["backdrop-sepia",{class:["backdrop-filter"],value:"backdrop-sepia(100%)",ns:"backdrop-sepia"}],["backdrop-sepia-0",{class:["backdrop-filter"],value:"backdrop-sepia(0)",ns:"backdrop-sepia"}],["ease-linear",{class:["transition-timing-function"],value:"linear",ns:"transitionTiming"}],["ease-in",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 1, 1)",ns:"transitionTiming"}],["ease-out",{class:["transition-timing-function"],value:"cubic-bezier(0, 0, 0.2, 1)",ns:"transitionTiming"}],["ease-in-out",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 0.2, 1)",ns:"transitionTiming"}],["object-contain",{class:["object"],value:"contain",ns:"objectFit"}],["object-cover",{class:["object"],value:"cover",ns:"objectFit"}],["object-fill",{class:["object"],value:"fill",ns:"objectFit"}],["object-none",{class:["object"],value:"none",ns:"objectFit"}],["object-scale-down",{class:["object"],value:"scale-down",ns:"objectFit"}]]),eV=new Map([["first","pseudo"],["last","pseudo"],["only","pseudo"],["odd","pseudo"],["even","pseudo"],["first-of-type","pseudo"],["last-of-type","pseudo"],["only-of-type","pseudo"],["visited","state"],["target","state"],["open","state"],["default","form"],["checked","form"],["indeterminate","form"],["placeholder-shown","form"],["autofill","form"],["optional","form"],["required","form"],["valid","form"],["invalid","form"],["in-range","form"],["out-of-range","form"],["read-only","form"],["empty","content"],["focus-within","interaction"],["hover","interaction"],["group-hover","interaction"],["focus","interaction"],["focus-visible","interaction"],["active","interaction"],["enabled","interaction"],["disabled","interaction"],["dark","system"]]),eX=["calc","min","max","clamp","mod","rem","sin","cos","tan","asin","acos","atan","atan2","pow","sqrt","hypot","log","exp","round"];function eq(e){return -1!==e.indexOf("(")&&eX.some(t=>e.includes("".concat(t,"(")))}function eQ(e){return e.startsWith("url(")?e:e=function(e){if(-1===e.indexOf("(")||!eX.some(t=>e.includes(t)))return e;let t="",a=[];for(let s=0;s<e.length;s++){let l=e[s];if("("===l){t+=l;let n=s;for(let t=s-1;t>=0;t--){let a=e.charCodeAt(t);if(a>=48&&a<=57)n=t;else if(a>=97&&a<=122)n=t;else break}let r=e.slice(n,s);if(eX.includes(r)||a[0]&&""===r){a.unshift(!0);continue}a.unshift(!1);continue}if(")"===l)t+=l,a.shift();else if(","===l&&a[0]){t+=", ";continue}else if(" "===l&&a[0]&&" "===t[t.length-1])continue;else if(("+"===l||"*"===l||"/"===l||"-"===l)&&a[0]){let a=t.trimEnd(),n=a[a.length-1];if("+"===n||"*"===n||"/"===n||"-"===n||"("===n||","===n){t+=l;continue}" "===e[s-1]?t+="".concat(l," "):t+=" ".concat(l," ")}else if(a[0]&&e.startsWith("to-zero",s)){let a=s;s+=7,t+=e.slice(a,s+1)}else t+=l}return t}(e=function(e){let t="";for(let a=0;a<e.length;a++){let s=e[a];"\\"===s&&"_"===e[a+1]?(t+="_",a+=1):"_"===s?t+=" ":t+=s}return t}(e))}var eY=a(13735),eJ=a.n(eY);let e$=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent","currentcolor","canvas","canvastext","linktext","visitedtext","activetext","buttonface","buttontext","buttonborder","field","fieldtext","highlight","highlighttext","selecteditem","selecteditemtext","mark","marktext","graytext","accentcolor","accentcolortext"]),e0=/^(rgba?|hsla?|hwb|color|(ok)?(lab|lch)|light-dark|color-mix)\(/i;function e1(e,t){if(!e)return!1;let a=!1;if(t){let[s]=eW(e,"/");a=!!eJ()(t.colors,s.split("-").join("."))}return 35===e.charCodeAt(0)||e0.test(e)||e$.has(e.toLowerCase())||a}let e2={color:e1,length:ta,percentage:te,number:function(e){return e8.test(e)||eq(e)},url:e5,position:function(e){let t=0;for(let a of eW(e," ")){if("center"===a||"top"===a||"right"===a||"bottom"===a||"left"===a){t+=1;continue}if(!a.startsWith("var(")){if(ta(a)||te(a)){t+=1;continue}return!1}}return t>0},"bg-size":function(e){let t=0;for(let a of eW(e,",")){if("cover"===a||"contain"===a){t+=1;continue}let e=eW(a," ");if(1!==e.length&&2!==e.length)return!1;e.every(e=>"auto"===e||ta(e)||te(e))&&(t+=1)}return t>0},"line-width":function(e){return"thin"===e||"medium"===e||"thick"===e},image:function(e){let t=0;for(let a of eW(e,","))if(!a.startsWith("var(")){if(e5(a)||e3.test(a)||e6.test(a)){t+=1;continue}return!1}return t>0},"family-name":function(e){let t=0;for(let a of eW(e,",")){let e=a.charCodeAt(0);if(e>=48&&e<=57)return!1;a.startsWith("var(")||(t+=1)}return t>0},"generic-name":function(e){return"serif"===e||"sans-serif"===e||"monospace"===e||"cursive"===e||"fantasy"===e||"system-ui"===e||"ui-serif"===e||"ui-sans-serif"===e||"ui-monospace"===e||"ui-rounded"===e||"math"===e||"emoji"===e||"fangsong"===e},"absolute-size":function(e){return"xx-small"===e||"x-small"===e||"small"===e||"medium"===e||"large"===e||"x-large"===e||"xx-large"===e||"xxx-large"===e},"relative-size":function(e){return"larger"===e||"smaller"===e},angle:function(e){return ts.test(e)},vector:function(e){return tl.test(e)},named:()=>!0},e4=/^url\(.*\)$/;function e5(e){return e4.test(e)}let e6=/^(?:element|image|cross-fade|image-set)\(/,e3=/^(repeating-)?(conic|linear|radial)-gradient\(/,e9=/[+-]?\d*\.?\d+(?:[eE][+-]?\d+)?/,e8=new RegExp("^".concat(e9.source,"$")),e7=new RegExp("^".concat(e9.source,"%$"));function te(e){return e7.test(e)||eq(e)}let tt=new RegExp("^".concat(e9.source,"(").concat("cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cqw|cqh|cqi|cqb|cqmin|cqmax",")$"));function ta(e){return tt.test(e)||eq(e)}let ts=new RegExp("^".concat(e9.source,"(").concat("deg|rad|grad|turn",")$")),tl=new RegExp("^".concat(e9.source," +").concat(e9.source," +").concat(e9.source,"$"));class tn extends Error{constructor(e,t){super("Found a matched plugin `".concat(e,"`, but the value `").concat(t,"` could not matched. This could be due to a misspelling or the given value is not covered by tailwind.config file.")),this.name="PluginNotFoundException"}}let tr=(e,t,a)=>{if("color"===t.type){let s=eJ()(a,e.split("-").join("."));if(!s)throw new tn(t.ns,e);return"object"==typeof s&&s.DEFAULT&&(s=s.DEFAULT),{value:s,kind:t.type,class:t.class,raw:e}}let s=a[e];if(!s)throw new tn(t.ns,e);return{value:s,class:t.class,raw:e,kind:t.type}};var ti=a(88108),to=a.n(ti),tc=a(50967);let td=a.n(tc)()(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return to()(e||{}).theme});var tu=a(88430);let tp=e=>{let t=(0,tu.Vi)(e),a=t.alpha();if(t.isValid())return{hex:t.alpha(1).toHex(),alpha:1!==a?a.toString():void 0}},tm=(e,t)=>{if(!e)return!1;for(let[a,s]of Object.entries(t)){if(("#fff"===s||"#000"===s)&&(0,tu.Vi)(e).isEqual(s))return a;for(let[t,l]of Object.entries(s))if(l===e)return"".concat(a,"-").concat(t)}return!1};class th{addRoot(e){return this._classRoot=e,this}addValue(e){return this._classValue=e,this}appendModifier(e){return e&&(this._modifier="/"+e),this}appendVariants(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];for(let e of t)this._variants.push(e);return this}makeImportant(){return this.important=!0,this}makeNegative(){return this.negative=!0,this}toString(){let e=["media","system","interaction","pseudo","content","form","state","misc"],t=this._variants.sort((t,a)=>e.indexOf(t.type)-e.indexOf(a.type));return(t.length>0?t.map(e=>e.value).join(":")+":":"")+(this.important?"!":"")+(this.negative?"-":"")+this._classRoot+(this._classValue?"-"+this._classValue:"")+this._modifier}static makeInputArbitraryFormat(e){return e.replace(/\s/g,"_")}static makeArbitrary(e){return"["+th.makeInputArbitraryFormat(e)+"]"}constructor(){this._classRoot="",this._classValue="",this._modifier="",this._variants=[],this.important=!1,this.negative=!1}}let tg=(e,t)=>{if(!e)return"";if("["===e[0]&&"]"===e[e.length-1]&&(e=e.slice(1,-1)),"%"===e[e.length-1])return th.makeArbitrary(e);for(let[a,s]of Object.entries(t))if(a==e||s==e)return a;return(0===Number(e)||Number(e)>=1)&&100>=Number(e)?th.makeArbitrary(e+"%"):Number(e)>=0&&1>=Number(e)?th.makeArbitrary(e):""},tf=(e,t)=>{if(!e)return{root:"",kind:"error",message:"Empty input"};let a=td(t),s={important:!1,negative:!1},l=eW(e,":"),n=l.pop(),r=[];for(let e=l.length-1;e>=0;--e){let t=function(e,t){if("["===e[0]&&"]"===e[e.length-1]){let t=e.slice(1,-1);return{kind:"arbitrary",type:"misc",value:t="-"===t[0]&&"-"===t[1]?"var(".concat(t,")"):eQ(t)}}return Object.keys(t).includes(e)?{kind:"named",type:"media",value:e}:{kind:"named",type:eV.get(e)||"misc",value:e}}(l[e],a.screens);null!==t&&r.push(t)}"!"===n[0]&&(s.important=!0,n=n.slice(1)),"-"===n[0]&&(s.negative=!0,n=n.slice(1));let i=eG.get(n);if(i)return{root:n,kind:"named",property:i.ns,value:i.value,valueDef:{class:i.class,raw:n,kind:"named",value:i.value},variants:r,modifier:null,important:s.important,negative:s.negative,arbitrary:!1};let[o,c]=function(e,t){if(t.has(e))return[e,null];let a=e.lastIndexOf("-");if(-1===a)return"@"===e[0]&&t.has("@")?["@",e.slice(1)]:[null,null];do{let s=e.slice(0,a);if(t.has(s))return[s,e.slice(a+1)];a=e.lastIndexOf("-",a-1)}while(a>0);return[null,null]}(n,eH);if(!o)return{root:n,kind:"error",message:"Tailwindcss core plugin not found"};let d=eH.get(o),u=null,[p,m=null]=eW(c||"","/");if(m&&e1(p.replace(/[\[\]]/g,""),a)&&(u=tg(m,a.opacity)),p&&"["===p[0]&&"]"===p[p.length-1]){let e=p.slice(1,-1),t=function(e,t){if(e.startsWith("var("))return null;for(let s of t){var a;if(null===(a=e2[s])||void 0===a?void 0:a.call(e2,e))return s}return null}(e,Array.from(d.values()).map(e=>{let{type:t}=e;return t})),l=d.find(e=>e.type===t);if("color"===t){let t=tp(e);if(!t)return{root:n,kind:"error",message:"Color is not correct"};p=tm(t.hex,a[(null==l?void 0:l.scaleKey)||"colors"])||t.hex}else d.length>0&&(l=d.find(e=>e.type===t)||d.find(e=>"color"!==e.type));return e=eQ(e),{root:o,kind:"functional",property:l.ns,value:e,valueDef:{value:e,class:l.class,raw:p,kind:t||"named"},variants:r,modifier:u,arbitrary:!0,important:s.important,negative:s.negative}}c||(c="DEFAULT");let h=d.find(e=>{let{scaleKey:t}=e;return c.split("-")[0]in a[t]||p in a[t]});if(!h)return{root:n,kind:"error",message:'found "'.concat(d.map(e=>e.ns).join(", "),'" plugins but unable to determine which one is matched to given value "').concat(c,'".')};let g=tr("color"===h.type?p:c,h,a[h.scaleKey]);return{root:o,kind:"functional",property:h.ns,value:g.value,valueDef:g,variants:r,modifier:u,important:s.important,negative:s.negative,arbitrary:!1}};class tv extends Error{constructor(e){super("Unable to identify the plugin based on ".concat(e,". This could be due to a misspelling, an invalid plugin, or the plugin is not yet included in the supported plugins list.")),this.name="PluginNotFoundException"}}let tx=(e,t)=>{let a=td(t),s=new th,l=e.negative||!1;s.appendVariants(...e.variants||[]),e.important&&s.makeImportant(),"-"===e.value[0]&&(e.value=e.value.slice(1),l=!0);let[n]=Array.from(eG.entries()).filter(t=>{let[,a]=t;return a.ns===e.property}).find(t=>{let[,a]=t;return a.value===e.value})||[];if(n)return s.addRoot(n).toString();let[r,i=[]]=Array.from(eH.entries()).find(t=>{let[,a]=t;return a.some(t=>t.ns===e.property)})||[];if(!r)throw new tv(e.property);if(s.addRoot(r),e1(e.value,a)){let t=i.find(e=>"color"===e.type);if(!t)throw new tv(e.property);let l=eJ()(a[t.scaleKey||"colors"],e.value.split("-").join("."));if(l&&"object"!=typeof l)return s.appendModifier(tg(e.modifier,a.opacity)).addValue(e.value).toString();let n=tp(e.value);return n?s.appendModifier(tg(n.alpha||e.modifier,a.opacity)).addValue(tm(n.hex,a[t.scaleKey||"colors"])||th.makeArbitrary(n.hex)).toString():""}let o=i.find(t=>t.ns===e.property);if(!o)throw new tv(e.property);let c=tb(e.value,a[o.scaleKey]);return c&&(s.addValue(c),o.supportNegative&&l&&s.makeNegative()),s.toString()},tb=(e,t)=>{if(e){for(let[a,s]of Object.entries(t))if(Array.isArray(s)&&(a===e||s.includes(e))||a===e||s===e)return"DEFAULT"!==a?a:void 0;return th.makeArbitrary(e)}};var ty=a(50676);let tj=e=>{var t;return Object.entries((null==e?void 0:null===(t=e.theme)||void 0===t?void 0:t.screens)||{}).sort((e,t)=>parseInt(t[1])-parseInt(e[1])).concat([["default","0px"]])},tw=(e,t)=>e.findIndex(e=>{let[a]=e;return a===t}),tE=(e,t)=>e>=t,tN=(e,t,a,s)=>{var l,n;let r=Array.isArray(t)?t:[t],i=tj(a),o=r.map(e=>tf(e,a));if(o.some(e=>"error"===e.kind))return e;let c=e.split(/\s+/).filter(Boolean),d=c.filter(e=>{try{var t,l;let n=tf(e.trim(),a);if("error"===n.kind)return!0;return o.some(e=>"error"!==e.kind&&e.property===n.property)&&tE(tw(i,(null===(l=n.variants)||void 0===l?void 0:null===(t=l.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default"),tw(i,s||"default"))}catch(e){return!1}}),u=d.reduce((e,t)=>{var s,l,n,r;let o=tf(t.trim(),a),c=tf(e.trim(),a);return"error"===o.kind||"error"===c.kind?e:tw(i,(null===(l=o.variants)||void 0===l?void 0:null===(s=l.find(e=>"media"===e.type))||void 0===s?void 0:s.value)||"default")<tw(i,(null===(r=c.variants)||void 0===r?void 0:null===(n=r.find(e=>"media"===e.type))||void 0===n?void 0:n.value)||"default")?t:e},d[0])||"default",p=tf(u.trim(),a),m="error"!==p.kind&&(null===(n=p.variants)||void 0===n?void 0:null===(l=n.find(e=>"media"===e.type))||void 0===l?void 0:l.value)||"default";return[...c.filter(e=>{try{var t,s;let l=tf(e.trim(),a);if("error"===l.kind||!o.some(e=>"error"!==e.kind&&e.property===l.property))return!0;return((null===(s=l.variants)||void 0===s?void 0:null===(t=s.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default")!==(m||"default")}catch(e){return!0}}),m&&"default"!==m?r.map(e=>"".concat(m,":").concat(e)).join(" "):r.join(" ")].join(" ")},tk=(e,t,a,s)=>{let l=tj(a),n=e.split(/\s+/g).map(e=>{try{var n;let r=tf(e.trim(),a);if("error"===r.kind||r.property!==t)return null;let i=null===(n=r.variants)||void 0===n?void 0:n.find(e=>"media"===e.type);if(i&&s){let e=tw(l,i.value),t=tw(l,s);if(-1===t&&(t=l.length),e<t)return null}return{parsed:r,breakpoint:(null==i?void 0:i.value)||"default"}}catch(e){return null}}).filter(e=>null!==e);if(0===n.length)return null;if(!s)return n.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:tw(l,t.breakpoint)<tw(l,e.breakpoint)?t:e,n[0]).parsed;let r=tw(l,s),i=n.filter(e=>"default"===e.breakpoint||tE(tw(l,e.breakpoint),r));return 0===i.length?null:i.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:tw(l,t.breakpoint)<tw(l,e.breakpoint)?t:e,i[0]).parsed},tC=(e,t)=>{let a=tj(e);if(!a)return"default";let s=t.getBoundingClientRect().width;for(let[e,t]of a){let a="string"==typeof t?parseInt(t):"number"==typeof t?t:null;if(null!==a&&s>=a)return e}return"default"},t_=e=>{if(void 0!==e)try{return JSON.parse(e)}catch(e){return}},tS=()=>{let{code:e}=(0,er.v)(),t=(0,u.useMemo)(()=>{var t;return null===(t=e.find(e=>{let[t,a]=e;return(null==t?void 0:t.split("/").pop())==="tailwind.config.lov.json"}))||void 0===t?void 0:t[1]},[e]);return(0,u.useMemo)(()=>t_(t)||to()({content:[]}),[t])},tT=()=>{let e=tS(),{twi:t}=(0,ty.XM)({config:e,options:{merge:!0}}),a=(0,u.useCallback)((t,a)=>{let s=document.querySelector("iframe");if(!s)return t;let l=tC(e,s);return tN(t,a,e,l)},[e]),s=(0,u.useCallback)((t,a)=>{if(!t)return null;let s=document.querySelector("iframe");if(!s)return null;let l=tC(e,s);return tk(t,a,e,l)},[e]);return{theme:null==e?void 0:e.theme,parse:t=>tf(t,e),classname:t=>tx(t,e),updateTwClassname:a,classNameToStyle:t,getRelevantTwClass:s}};var tA=a(49340),tP=a(92259),tI=a(82959),tM=a(18081),tL=a(93673),tD=a(40756),tR=a(27339),tz=a(64266),tO=a(36254),tK=a(74991),tZ=a(89651),tU=a(36710),tF=a(26034),tB=a(1346),tW=a(49360);let tH=e=>{let{disabled:t,onImagesUploaded:a,onUrlSubmitted:s,maxSize:l=20971520,className:n}=e,r=(0,tU.O)(),[i]=(0,tA.a)(),o=(0,u.useCallback)(async e=>{let t=e.map(e=>({file:e,url:URL.createObjectURL(e),id:(0,tW.Z)(),type:e.type}));return await Promise.all(t.map(async e=>{await (0,tF.c)(r,e.id,e.file);let{url:t}=await (0,tF.S)(r,{dir_name:i.uid,file_name:e.id});return{downloadUrl:t,name:"".concat(e.id,".").concat({"image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","image/webp":"webp"}[e.type]||"png"),type:e.type,id:e.id}}))},[r,i]),{getInputProps:d,open:p,getRootProps:h,isDragActive:g}=(0,tB.uI)({onDrop:async e=>{a(await o(e))},noClick:!0,noKeyboard:!0,maxSize:l,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]}});(0,u.useEffect)(()=>{let e=async e=>{var t;let s=Array.from((null===(t=e.clipboardData)||void 0===t?void 0:t.items)||[]).filter(e=>e.type.startsWith("image/")).map(e=>e.getAsFile()).filter(e=>null!==e);s.length&&a(await o(s))};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[r,a,o,i]);let[f,v]=(0,u.useState)("");return(0,c.jsxs)("div",{className:(0,m.cn)("group relative rounded-lg bg-input [&:has(:focus)]:border-accent",{"pointer-events-none":t},n),children:[g&&(0,c.jsx)("div",{className:"absolute inset-0 z-30 flex items-center justify-center rounded-lg bg-background/80",children:(0,c.jsxs)("div",{className:"rounded-lg bg-muted p-4 text-center",children:[(0,c.jsx)("p",{children:"Drop images here"}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Accepts PNG, JPG files up to ",l/1048576,"MB"]})]})}),(0,c.jsxs)("div",{...h(),children:[(0,c.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 border-none py-8 pt-10 text-sm disabled:cursor-not-allowed disabled:opacity-50",onClick:p,disabled:t,children:[(0,c.jsx)(E.Z,{name:"add_photo_alternate"}),"Attach image"]}),(0,c.jsx)("input",{...d()})]}),(0,c.jsx)("form",{className:"flex gap-1 p-2",onSubmit:e=>{e.preventDefault(),s(e.target.elements.namedItem("image-url").value)},children:(0,c.jsxs)("div",{className:"relative w-full",children:[(0,c.jsx)(e_.I,{name:"image-url",placeholder:"Image URL",className:"w-full bg-muted pr-16",disabled:t,onChange:e=>{v(e.target.value)},value:f}),(0,c.jsx)("div",{className:"absolute right-0 top-0 flex h-full items-center justify-center pr-1",children:(0,c.jsx)(j.z,{variant:"muted",type:"submit",size:"sm",className:(0,m.cn)("opacity-0 transition-opacity",f?"opacity-100":"opacity-0"),disabled:t,children:"Add"})})]})})]})},tG=e=>{let{title:t,children:a,disabled:s}=e;return(0,c.jsxs)("div",{className:(0,m.cn)("grid grid-cols-[100px_1fr]",{hidden:s}),children:[(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"py-2 text-sm font-semibold text-muted-foreground",children:t})}),(0,c.jsx)("div",{className:"flex flex-col gap-2",children:a})]})},tV=e=>{let{children:t,disabled:a}=e;return(0,c.jsx)("div",{className:(0,m.cn)("border-px flex flex-col gap-2",{hidden:a}),children:t})},tX=()=>{let e=G(),{selectedElements:t}=ey(),{history:a,setHistory:s,currentClassName:l,setCurrentClassName:n}=(0,er.v)(),r=(0,y.Eh)(e=>e.setSelectedElements),c=ex(),{updateTwClassname:d,classNameToStyle:p,classname:m}=tT(),h=(0,u.useCallback)(e=>{s(t=>[...t,e].slice(-100))},[s]),g=(0,u.useCallback)(e=>{switch(e.type){case o.TEXT_CHANGE:c(e.element,t=>(0,eg.Rw)(t,e.newText));break;case o.IMAGE_CHANGE:c(e.element,t=>(0,eg.R5)(t,{src:e.newUrl}));break;case o.REMOVE_NODE:c(e.element,(e,t)=>{t.remove()});break;case o.CLASS_NAME_UPDATE:case o.CLASS_NAME_SET:c(e.element,t=>(0,eg.R5)(t,{className:e.newClassName}));break;case o.DUPLICATE_NODE:c(e.element,(e,t)=>{t.insertAfter(e)})}h(e)},[c,h]),f=(0,u.useCallback)(a=>{switch(a.type){case o.TEXT_CHANGE:c(a.element,e=>(0,eg.Rw)(e,a.oldText)),e({type:i.SET_ELEMENT_CONTENT,payload:{id:{path:a.element.filePath,line:a.element.lineNumber.toString()},content:a.oldText}}),r(t.map(e=>e.filePath===a.element.filePath&&e.lineNumber===a.element.lineNumber?{...e,textContent:a.oldText}:e));break;case o.IMAGE_CHANGE:c(a.element,e=>(0,eg.R5)(e,{src:a.oldUrl})),e({type:i.SET_ELEMENT_ATTRS,payload:{id:{path:a.element.filePath,line:a.element.lineNumber.toString()},attrs:{src:a.oldUrl}}});break;case o.REMOVE_NODE:c(a.element,(e,t)=>{try{let e=JSON.parse(a.node);t.insertBefore(e)}catch(e){console.error("Failed to parse node",{item:a},e)}}),e({type:i.SET_ELEMENT_ATTRS,payload:{id:{path:a.element.filePath,line:a.element.lineNumber.toString()},attrs:{style:""}}});break;case o.CLASS_NAME_UPDATE:case o.CLASS_NAME_SET:c(a.element,e=>(0,eg.R5)(e,{className:a.oldClassName})),e({type:i.SET_ELEMENT_ATTRS,payload:{id:{path:a.element.filePath,line:a.element.lineNumber.toString()},attrs:{style:p(a.oldClassName)}}}),t.some(e=>e.filePath===a.element.filePath&&e.lineNumber===a.element.lineNumber)&&n(a.oldClassName);break;case o.DUPLICATE_NODE:c(a.element,(e,t)=>{let a=t.getNextSibling();a&&a.remove()})}},[c,e,r,t,p,n]),v=(0,u.useCallback)(()=>{let e=a[a.length-1];e&&(f(e),s(e=>e.slice(0,-1)))},[a,s,f]),x=(0,u.useCallback)((a,s)=>{let l=String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),n="";c(a,e=>{var t;n=(null===(t=e.children[0])||void 0===t?void 0:t.value)||""}),n!==l&&(g({type:o.TEXT_CHANGE,element:a,oldText:n,newText:l}),e({type:i.SET_ELEMENT_CONTENT,payload:{id:{path:a.filePath,line:a.lineNumber.toString()},content:l}}),r(t.map(e=>e.filePath===a.filePath&&e.lineNumber===a.lineNumber?{...e,textContent:l}:e)))},[g,e,t,r,c]),b=(0,u.useCallback)(function(t,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,l="";c(t,e=>{var t,a;l=(null===(a=e.openingElement.attributes.find(e=>"JSXAttribute"===e.type&&"src"===e.name.name))||void 0===a?void 0:null===(t=a.value)||void 0===t?void 0:t.value)||""}),g({type:o.IMAGE_CHANGE,element:t,oldUrl:l,newUrl:a}),e({type:i.SET_ELEMENT_ATTRS,payload:{id:{path:t.filePath,line:t.lineNumber.toString()},attrs:{src:s}}})},[g,c,e]),j=(0,u.useCallback)(t=>{es.ZP.capture("visual_edits:element_deleted");let a="";c(t,e=>{a=(0,ef.default)(e).code}),g({type:o.REMOVE_NODE,element:t,node:a}),e({type:i.SET_ELEMENT_ATTRS,payload:{id:{path:t.filePath,line:t.lineNumber.toString()},attrs:{style:"display: none;"}}}),r([])},[g,c,e,r]),w=(0,u.useCallback)(function(t,a){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=null;c(t,e=>{l=(0,eg.Xu)(e)}),g({type:o.CLASS_NAME_SET,element:t,oldClassName:l||"",newClassName:a}),e({type:i.SET_ELEMENT_ATTRS,payload:{id:{path:t.filePath,line:t.lineNumber.toString()},attrs:{style:p(a),...s?{class:a}:{}}}})},[p,g,c,e]),E=(0,u.useCallback)(function(t,a){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=null,r=null;return(c(t,e=>{null!==(n=(0,eg.Xu)(e))&&(r=d(n,a))}),null===n||null===r)?l:(s||g({type:o.CLASS_NAME_UPDATE,element:t,oldClassName:n,newClassName:r}),e({type:i.SET_ELEMENT_ATTRS,payload:{id:{path:t.filePath,line:t.lineNumber.toString()},attrs:{"data-lov-dirty":"true",style:p(r)+";"+p(a)}}}),r)},[p,l,g,c,e,d]),N=(0,u.useCallback)(e=>{g({type:o.DUPLICATE_NODE,element:e})},[g]),k=(0,u.useCallback)((e,t)=>{n((0,eg.EE)(e,t))},[n]),C=(0,u.useCallback)(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let s=Array.isArray(t)?t.map(e=>m(e)):[m(t)],l=E(e,s,a);return a||n(l),l}catch(e){return l}},[m,E,n,l]),_=(0,u.useCallback)(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];w(e,t,a),n(t)},[w,n]);return{handleTextChange:x,handleImageChange:b,handleRemoveNode:j,updateElementClassName:E,setElementClassName:w,handleDuplicateNode:N,undoLastOperation:v,initializeClassName:k,handleUpdateClassName:C,handleUpdateClassNameAdvanced:_}},tq=e=>{let t,a;if(!e)return;let s=1;if(e.modifier){var l,n;s=(null===(l=e.modifier)||void 0===l?void 0:l.startsWith("["))&&(null===(n=e.modifier)||void 0===n?void 0:n.endsWith("]"))?parseFloat(e.modifier.replace(/[\[\]]/g,"")):parseInt(e.modifier)/100}if("inherit"===e.valueDef.raw)return;"transparent"===e.valueDef.raw&&(s=0),e.valueDef.raw.startsWith("#")?a=e.valueDef.raw:(t=e.valueDef.raw,a=e.value);let r=eP(a);if(!r)return{name:t,hex:void 0};let i=eI(r.r,r.g,r.b,s);return{name:t||i,hex:i,hexWithoutAlpha:eI(r.r,r.g,r.b,1)}},tQ={fontSize:{xs:"XS",base:"Body",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL","4xl":"4XL","5xl":"5XL","6xl":"6XL","7xl":"7XL","8xl":"8XL","9xl":"9XL"},borderRadius:{none:"None",DEFAULT:"Default",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL",full:"Full"}},tY=e=>{var t,a,s,l,n,r,i,o,d;let{element:p,disabled:g}=e,[f]=(0,tA.a)(),{currentClassName:v,ast:x}=(0,er.v)(),b=K(p),{handleImageChange:y,initializeClassName:w,handleUpdateClassName:N,handleUpdateClassNameAdvanced:k}=tX();(0,u.useEffect)(()=>{w(p,x)},[p,x,w]);let C=(0,ed.W)(e=>e.addUpload),{theme:_,getRelevantTwClass:S,parse:T,classname:A}=tT(),P=(0,u.useMemo)(()=>{var e,t,a,s,l,n,r,i,o,c,d,u;if(!v)return;let p=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},m=S(v,"padding"),h=S(v,"paddingY"),g=S(v,"paddingX");return{paddingTop:null!==(n=null!==(l=p(null===(e=S(v,"paddingTop"))||void 0===e?void 0:e.value))&&void 0!==l?l:p(null==h?void 0:h.value))&&void 0!==n?n:p(null==m?void 0:m.value),paddingBottom:null!==(i=null!==(r=p(null===(t=S(v,"paddingBottom"))||void 0===t?void 0:t.value))&&void 0!==r?r:p(null==h?void 0:h.value))&&void 0!==i?i:p(null==m?void 0:m.value),paddingLeft:null!==(c=null!==(o=p(null===(a=S(v,"paddingLeft"))||void 0===a?void 0:a.value))&&void 0!==o?o:p(null==g?void 0:g.value))&&void 0!==c?c:p(null==m?void 0:m.value),paddingRight:null!==(u=null!==(d=p(null===(s=S(v,"paddingRight"))||void 0===s?void 0:s.value))&&void 0!==d?d:p(null==g?void 0:g.value))&&void 0!==u?u:p(null==m?void 0:m.value)}},[S,v]),I=(0,u.useMemo)(()=>{var e,t,a,s,l,n,r,i,o,c,d,u;if(!v)return;let p=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},m=S(v,"margin"),h=S(v,"marginY"),g=S(v,"marginX");return{marginTop:null!==(n=null!==(l=p(null===(e=S(v,"marginTop"))||void 0===e?void 0:e.value))&&void 0!==l?l:p(null==h?void 0:h.value))&&void 0!==n?n:p(null==m?void 0:m.value),marginBottom:null!==(i=null!==(r=p(null===(t=S(v,"marginBottom"))||void 0===t?void 0:t.value))&&void 0!==r?r:p(null==h?void 0:h.value))&&void 0!==i?i:p(null==m?void 0:m.value),marginLeft:null!==(c=null!==(o=p(null===(a=S(v,"marginLeft"))||void 0===a?void 0:a.value))&&void 0!==o?o:p(null==g?void 0:g.value))&&void 0!==c?c:p(null==m?void 0:m.value),marginRight:null!==(u=null!==(d=p(null===(s=S(v,"marginRight"))||void 0===s?void 0:s.value))&&void 0!==d?d:p(null==g?void 0:g.value))&&void 0!==u?u:p(null==m?void 0:m.value)}},[S,v]),M=tq(S(v,"textColor")),L=tq(S(v,"backgroundColor")),[D,R]=(0,tZ.Z)("lov_vis_advancedOpen",{defaultValue:!1}),z=(0,u.useRef)({}),[O,Z]=(0,u.useState)({}),U=(0,u.useCallback)(e=>{var t;let a=e.property,s=Date.now();Z(t=>({...t,[a]:e.value})),z.current[a]&&cancelAnimationFrame(z.current[a].rafId);let l=()=>{let e=z.current[a];if(e){let t=T(A(e.immediateValue));if("error"===t.kind)return;let l=t.valueDef.raw,n=[e.immediateValue];if("backgroundColor"===e.immediateValue.property&&"button"===b&&l.split("-").length>1){let[e,t]=l.split("-"),a=parseInt(t)-100;if((a=100*Math.floor(a/100))>0){let t="".concat(e,"-").concat(a);n.push({property:"backgroundColor",value:t,variants:[{kind:"named",type:"interaction",value:"hover"}]})}}N(p,n),z.current[a].lastUpdateTime=s,delete z.current[a]}};z.current[a]={rafId:0,lastValue:e,immediateValue:e,lastUpdateTime:(null===(t=z.current[a])||void 0===t?void 0:t.lastUpdateTime)||0},z.current[a].rafId=requestAnimationFrame(()=>{l()})},[A,p,N,T]),F=(0,u.useCallback)((e,t)=>{var a;return null!==(a=O[e])&&void 0!==a?a:t},[O]),B=null===(t=S(v,"textAlign"))||void 0===t?void 0:t.value;return(0,c.jsxs)("div",{children:[null===v?(0,c.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,c.jsx)("p",{className:"text-sm",children:"This element can't be styled. You can edit it by resetting the styling or chatting."}),(0,c.jsx)(j.z,{onClick:()=>k(p,"",!0),variant:"secondary",children:"Reset styling"})]}):(0,c.jsxs)("div",{className:"flex flex-grow flex-col gap-4",children:[(0,c.jsxs)(tV,{disabled:"img"===b,children:[(0,c.jsx)(tG,{title:"Margin",children:(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(eU.R,{max:240,className:"flex-grow rounded-md bg-input",value:null!==(r=null==I?void 0:I.marginLeft)&&void 0!==r?r:0,placeholder:"X margin",disabled:g,onChange:e=>(null==I?void 0:I.marginLeft)!==e&&U({property:"marginX",value:"".concat(e,"px")}),leftIcon:(0,c.jsx)(tI.Z,{className:"size-4 fill-muted-foreground"})}),(0,c.jsx)(eU.R,{max:240,value:null!==(i=null==I?void 0:I.marginTop)&&void 0!==i?i:0,className:"flex-grow rounded-md bg-input",placeholder:"Y margin",disabled:g,onChange:e=>(null==I?void 0:I.marginTop)!==e&&U({property:"marginY",value:"".concat(e,"px")}),leftIcon:(0,c.jsx)(tP.Z,{className:"size-4 fill-muted-foreground"})})]})}),(0,c.jsx)(tG,{title:"Padding",children:(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(eU.R,{max:240,className:"flex-grow rounded-md bg-input",value:null!==(o=null==P?void 0:P.paddingLeft)&&void 0!==o?o:0,placeholder:"X padding",disabled:g,onChange:e=>(null==P?void 0:P.paddingLeft)!==e&&U({property:"paddingX",value:"".concat(e,"px")}),leftIcon:(0,c.jsx)(tM.Z,{className:"size-4 fill-muted-foreground"})}),(0,c.jsx)(eU.R,{max:240,value:null!==(d=null==P?void 0:P.paddingTop)&&void 0!==d?d:0,className:"flex-grow rounded-md bg-input",placeholder:"Y padding",disabled:g,onChange:e=>(null==P?void 0:P.paddingTop)!==e&&U({property:"paddingY",value:"".concat(e,"px")}),leftIcon:(0,c.jsx)(tL.Z,{className:"size-4 fill-muted-foreground"})})]})})]}),(0,c.jsxs)(tV,{disabled:"text"!==b&&"button"!==b,children:[(0,c.jsx)(tG,{title:"Font size",children:(0,c.jsxs)(eF.Ph,{disabled:g,onValueChange:e=>{e&&(console.log("font size changed"),es.ZP.capture("visual_edits:font_size_changed"),U({property:"fontSize",value:e}))},onOpenChange:e=>{if(!e){var t;N(p,[{property:"fontSize",value:(null===(t=S(v,"fontSize"))||void 0===t?void 0:t.valueDef.raw)||"base"}])}},value:(null===(a=S(v,"fontSize"))||void 0===a?void 0:a.valueDef.raw)||"base",children:[(0,c.jsx)(eF.i4,{className:"bg-input",children:(0,c.jsx)(eF.ki,{placeholder:"Select font size"})}),(0,c.jsx)(eF.Bw,{children:Object.entries((null==_?void 0:_.fontSize)||{}).map(e=>{var t;let[a,s]=e;return(0,c.jsx)(eF.Ql,{onFocus:e=>{let t=e.target.getAttribute("data-value");t&&requestAnimationFrame(()=>{N(p,{property:"fontSize",value:t},!0)})},value:a,"data-value":a,children:null!==(t=tQ.fontSize[a])&&void 0!==t?t:a},a)})})]})}),(0,c.jsx)(tG,{title:"Font weight",children:(0,c.jsxs)(eF.Ph,{disabled:g,onValueChange:e=>{e&&(es.ZP.capture("visual_edits:font_weight_changed"),U({property:"fontWeight",value:e}))},onOpenChange:e=>{if(!e){var t;N(p,[{property:"fontWeight",value:(null===(t=S(v,"fontWeight"))||void 0===t?void 0:t.valueDef.raw)||"normal"}])}},value:null===(s=S(v,"fontWeight"))||void 0===s?void 0:s.valueDef.raw,children:[(0,c.jsx)(eF.i4,{className:"bg-input",children:(0,c.jsx)(eF.ki,{placeholder:"Select weight"})}),(0,c.jsx)(eF.Bw,{children:Object.entries((null==_?void 0:_.fontWeight)||{}).filter(e=>"black"!==e[0]).map(e=>{let[t,a]=e;return(0,c.jsx)(eF.Ql,{"data-value":t,value:t,onFocus:e=>{let t=e.target.getAttribute("data-value");t&&requestAnimationFrame(()=>{N(p,{property:"fontWeight",value:t},!0)})},children:(0,c.jsx)("span",{className:"capitalize",children:t})},t)})})]})}),(0,c.jsx)(tG,{title:"Color",children:(0,c.jsx)(eZ,{disabled:g,presetColors:null==_?void 0:_.colors,color:F("textColor",null==M?void 0:M.hex)||"transparent",onChange:e=>{e&&(es.ZP.capture("visual_edits:text_color_changed"),U({property:"textColor",value:e||"inherit"}))},children:(0,c.jsxs)(j.z,{variant:"outline",disabled:g,className:"flex h-9 w-full justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,c.jsxs)("div",{className:"relative mr-2 h-4 w-4 overflow-hidden rounded-full",children:[(0,c.jsx)("div",{className:"absolute inset-0",children:(0,c.jsx)(eC,{})}),(0,c.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==M?void 0:M.hexWithoutAlpha}}),(0,c.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==M?void 0:M.hex}})]}),(0,c.jsx)("span",{className:"truncate",children:(null==M?void 0:M.name)||"Inherit"})]})},"".concat(p.filePath,":").concat(p.lineNumber))}),(0,c.jsx)(tG,{title:"Alignment",children:(0,c.jsxs)(tK.E,{className:"flex flex-row justify-end gap-2",value:B,onValueChange:e=>U({property:"textAlign",value:e}),children:[(0,c.jsxs)(eS._,{title:"Left",children:[(0,c.jsx)(tK.m,{value:"left",className:"peer rounded-full p-2",hidden:!0}),(0,c.jsx)(j.z,{variant:"outline",className:(0,m.cn)("bg-input p-2",{"bg-accent":"left"===B}),onClick:()=>U({property:"textAlign",value:"left"}),children:(0,c.jsx)(tz.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,c.jsxs)(eS._,{title:"Center",children:[(0,c.jsx)(tK.m,{value:"center",className:"peer rounded-full p-2",hidden:!0}),(0,c.jsx)(j.z,{variant:"outline",className:(0,m.cn)("bg-input p-2",{"bg-accent":"center"===B}),onClick:()=>U({property:"textAlign",value:"center"}),children:(0,c.jsx)(tD.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,c.jsxs)(eS._,{title:"Right",children:[(0,c.jsx)(tK.m,{value:"right",className:"peer rounded-full p-2",hidden:!0}),(0,c.jsx)(j.z,{variant:"outline",className:(0,m.cn)("bg-input p-2",{"bg-accent":"right"===B}),onClick:()=>U({property:"textAlign",value:"right"}),children:(0,c.jsx)(tO.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,c.jsxs)(eS._,{title:"Justify",children:[(0,c.jsx)(tK.m,{value:"justify",className:"peer rounded-full p-2",hidden:!0}),(0,c.jsx)(j.z,{variant:"outline",className:(0,m.cn)("bg-input p-2",{"bg-accent":"justify"===B}),onClick:()=>U({property:"textAlign",value:"justify"}),children:(0,c.jsx)(tR.Z,{className:"size-4 fill-muted-foreground"})})]})]})})]}),(0,c.jsxs)(tV,{disabled:"div"!==b&&"button"!==b,children:[(0,c.jsx)(tG,{title:"Background",children:(0,c.jsx)(eZ,{disabled:g,color:F("backgroundColor",null==L?void 0:L.hex)||"transparent",onChange:e=>{e&&(es.ZP.capture("visual_edits:background_color_changed"),U({property:"backgroundColor",value:e||"inherit"}))},presetColors:null==_?void 0:_.colors,children:(0,c.jsxs)(j.z,{variant:"outline",disabled:g,className:"flex h-9 w-full items-center justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,c.jsxs)("div",{className:"relative mr-2 h-4 w-4 overflow-hidden rounded-full",children:[(0,c.jsx)("div",{className:"absolute inset-0",children:(0,c.jsx)(eC,{})}),(0,c.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==L?void 0:L.hexWithoutAlpha}}),(0,c.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==L?void 0:L.hex}})]}),(0,c.jsx)("span",{className:"truncate",children:(null==L?void 0:L.name)||"Inherit"})]})},"".concat(p.filePath,":").concat(p.lineNumber))}),(0,c.jsx)(tG,{title:"Border radius",children:(0,c.jsxs)(eF.Ph,{disabled:g,onValueChange:e=>e&&U({property:"borderRadius",value:e}),value:(null===(l=S(v,"borderRadius"))||void 0===l?void 0:l.valueDef.raw)||"none",children:[(0,c.jsx)(eF.i4,{className:"bg-input hover:bg-input",children:(0,c.jsx)(eF.ki,{placeholder:"Select border radius"})}),(0,c.jsx)(eF.Bw,{children:Object.entries((null==_?void 0:_.borderRadius)||{}).map(e=>{var t;let[a,s]=e;return(0,c.jsx)(eF.Ql,{value:a,children:null!==(t=tQ.borderRadius[a])&&void 0!==t?t:"Default"},a)})})]})})]}),(0,c.jsxs)(tV,{disabled:"img"!==b,children:[(0,c.jsx)(tG,{title:"Image",children:(0,eg.cB)(p,x,"src")?(0,c.jsx)(tH,{disabled:g||!(0,eg.cB)(p,x,"src"),onUrlSubmitted:e=>y(p,e),onImagesUploaded:e=>{e.length>0&&(es.ZP.capture("visual_edits:image_uploaded"),C({dir_name:f.uid,file_name:e[0].name,type:e[0].type,id:e[0].id}),y(p,"/lovable-uploads/".concat(e[0].name),e[0].downloadUrl))}}):(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"This element contains dynamic elements and its image cannot be manually edited. Please use the chat to change the image."})}),(0,c.jsx)(tG,{title:"Resize",children:(0,c.jsxs)(eF.Ph,{disabled:g,onValueChange:e=>e&&U({property:"objectFit",value:e}),value:((null===(n=S(v,"objectFit"))||void 0===n?void 0:n.valueDef.raw)||"object-none").replace("object-",""),children:[(0,c.jsx)(eF.i4,{className:"bg-input",children:(0,c.jsx)(eF.ki,{placeholder:"Select border radius"})}),(0,c.jsxs)(eF.Bw,{className:"bg-popover",children:[(0,c.jsx)(eF.Ql,{value:"contain",children:"Contain"}),(0,c.jsx)(eF.Ql,{value:"cover",children:"Cover"}),(0,c.jsx)(eF.Ql,{value:"fill",children:"Fill"}),(0,c.jsx)(eF.Ql,{value:"none",children:"None"}),(0,c.jsx)(eF.Ql,{value:"scale-down",children:"Scale down"})]})]})})]})]}),(0,c.jsxs)("div",{className:"mt-4 flex flex-row justify-between pb-2",children:[(0,c.jsxs)(j.z,{variant:"ghost",size:"sm",className:(0,m.cn)("h-6 py-0.5 pl-0.5 text-xs transition duration-300 hover:bg-secondary",{"!opacity-0":null===v}),onClick:()=>{R(!D),es.ZP.capture("visual_edits:advanced_clicked")},disabled:null===v,children:[(0,c.jsx)(E.Z,{name:"chevron_right",size:"small",className:(0,m.cn)("transition-transform duration-150 ease-in-out",{"rotate-90":D})}),"Advanced"]}),(0,c.jsx)("div",{className:(0,m.cn)("flex flex-row gap-2",{"opacity-0":!D}),children:(0,c.jsxs)(V.u,{delayDuration:0,children:[(0,c.jsx)(V.aJ,{children:(0,c.jsx)(E.Z,{name:"help",size:"small",className:"text-muted-foreground"})}),(0,c.jsx)(V._v,{children:(0,c.jsx)("p",{children:"Enter custom Tailwind classes"})})]})})]}),(0,c.jsx)(h.E.div,{initial:{opacity:0,height:0},animate:{opacity:D?1:0,height:D?"auto":0},transition:{duration:.15,bounce:0},className:"flex flex-row gap-2",children:(0,c.jsx)("div",{className:"w-full pb-12 pt-2",children:(0,c.jsx)(ew.g,{disabled:g,value:v||"",className:"w-full bg-input outline-none ring-offset-background placeholder:text-muted-foreground focus-visible:ring-1 focus-visible:ring-offset-0",onChange:e=>k(p,e.target.value)})})})]})},tJ=e=>{var t,a;let{element:s,disabled:l=!1}=e,n=K(s),{handleTextChange:r,handleRemoveNode:o,handleDuplicateNode:d,undoLastOperation:p,initializeClassName:h}=tX(),{ast:g,currentClassName:f,hasInitialCode:v}=(0,er.v)(),x=(0,u.useMemo)(()=>(0,eg.H2)(s,g),[s,g]);(0,u.useEffect)(()=>{h(s,g)},[s,g,h]),(0,u.useEffect)(()=>{let e=e=>{if(e.data.type===i.KEYBIND){let{compositeKey:t}=e.data.payload}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s,d,o,p]);let b=null!==(a=z[K(s)])&&void 0!==a?a:null,{status:j}=(0,ek.N)(),w=(null==j?void 0:j.dev_server.state)!=="started",N=G(),k=(0,y.Eh)(e=>e.selectedElements[0]),C=(0,c.jsxs)(V.u,{delayDuration:0,children:[(0,c.jsx)(eE.aJ,{className:"w-fit",children:(0,c.jsxs)(ej.C,{variant:"outline",className:"group relative flex w-fit cursor-pointer flex-row items-center gap-2 px-3 py-1 text-base font-medium",onClick:()=>{N({type:i.GET_PARENT_ELEMENT,payload:{id:{path:k.filePath,line:k.lineNumber.toString()}}})},children:[(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(eN.Z,{className:"absolute left-0 top-0 size-4 opacity-0 transition-opacity duration-200 group-hover:opacity-100"}),(0,c.jsx)(b,{className:(0,m.cn)("size-4 fill-foreground","transition-opacity duration-200 group-hover:opacity-0")})]}),(null===(t=s.attrs)||void 0===t?void 0:t["data-component-name"])||s.elementType]})}),(0,c.jsx)(V._v,{children:(0,c.jsx)("p",{children:"Select parent"})})]});return w||!v?(0,c.jsx)("div",{className:"overflow-hidden px-1",children:(0,c.jsxs)("div",{className:"flex flex-grow flex-col gap-4",children:[C,(0,c.jsx)("div",{className:"flex items-center justify-center pb-16",children:(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Waiting for Sandbox to start..."})})]})}):(0,c.jsx)("div",{className:"overflow-hidden px-1",children:(0,c.jsxs)("div",{className:"flex flex-grow flex-col gap-4",children:[C,x?(0,c.jsxs)(tG,{title:"Content",disabled:"text"!==n&&"button"!==n,children:[(0,c.jsx)(ew.g,{value:String(s.textContent||"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),disabled:!x||l,className:(0,m.cn)("resize-none bg-inherit text-base leading-snug placeholder-shown:text-ellipsis placeholder-shown:whitespace-nowrap","focus-visible:ring-0 focus-visible:ring-offset-0","max-h-[200px] scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]","h-auto border bg-input focus:bg-input",!x&&"hidden"),placeholder:"Enter text here",onChange:e=>r(s,e.target.value)}),(0,c.jsx)("p",{className:(0,m.cn)("text-xs text-muted-foreground",{hidden:x}),children:"This element contains dynamic elements so its text cannot be manually edited. Use the chat to change the text."})]}):("text"===n||"button"===n)&&(0,c.jsx)(tG,{title:"Content",children:(0,c.jsxs)("div",{className:"my-auto flex items-center justify-between",children:[(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Can't edit dynamic content yet"}),(0,c.jsxs)(V.u,{delayDuration:0,children:[(0,c.jsx)(eE.aJ,{children:(0,c.jsx)(E.Z,{name:"help",size:"small",className:"inline-block-translate-y-[1px] ml-auto text-muted-foreground"})}),(0,c.jsx)(V._v,{children:"Content linked to backend or code. Ask AI to edit."})]})]})}),(0,c.jsx)(tY,{element:s,disabled:l||null===f})]})})};var t$=e=>{let{onChangeActive:t}=e,{selectedElements:a,canEdit:s}=ey(),l=(0,y.Eh)(e=>e.setSelectedElements),n=a[0],{syncCode:r,generateAst:o,hasUnsavedChanges:d,refreshPreview:p}=(0,er.v)(),{undoLastOperation:g,handleRemoveNode:f}=tX(),v=(0,ed.W)(e=>e.clearPendingChanges),x=(0,ed.W)(e=>e.clearUploads),[b,w]=(0,u.useState)(!1),N=(0,u.useCallback)(()=>(es.ZP.capture("visual_edits:save_clicked"),w(!0),r(ed.W.getState().pendingChanges).then(()=>{w(!1),l([]),t(!1)})),[l,r,t]);(0,H.y1)("meta+z",e=>{e.preventDefault(),s&&g()}),(0,H.y1)("meta+enter",e=>{e.preventDefault(),s&&N().finally(()=>{t(!1)})}),(0,H.y1)("escape",()=>{d?N().finally(()=>{t(!1)}):t(!1)}),(0,u.useEffect)(()=>{let e=e=>{if(e.data.type===i.KEYBIND){let{compositeKey:a}=e.data.payload;switch(a){case"Meta+z":s&&g();break;case"Meta+Enter":s&&N();break;case"Escape":null==t||t(!1)}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s,N,t,g]);let k=(0,u.useCallback)(()=>{es.ZP.capture("visual_edits:discard_clicked"),v(),x(),p(),l([]),o(),t(!1)},[v,x,o,t,p,l]),C=(0,u.useCallback)(()=>{es.ZP.capture("visual_edits:discard_clicked"),v(),x(),p(),o(),t(!1)},[v,x,o,t,p]);return(0,c.jsx)("div",{className:"pb-2",children:(0,c.jsxs)("div",{className:"relative flex h-full w-full flex-col rounded-xl border border-muted-border bg-muted p-2",children:[(0,c.jsxs)("div",{className:"pointer-events-none absolute left-0 right-0 top-0 flex flex-row justify-end gap-1 p-2",children:[(0,c.jsxs)(ec.Vq,{children:[(0,c.jsx)(ec.hg,{children:(0,c.jsxs)(V.u,{children:[(0,c.jsx)(V.aJ,{asChild:!0,children:(0,c.jsx)(j.z,{variant:"ghost",disabled:!s||b,className:(0,m.cn)("pointer-events-auto inline-flex items-center gap-2 hover:bg-secondary",{hidden:!n}),children:(0,c.jsx)(ep.Z,{className:"size-4 scale-[0.8]"})})}),(0,c.jsx)(V._v,{children:(0,c.jsx)("p",{children:"Delete element"})})]})}),(0,c.jsx)(ec.cZ,{className:"pointer-events-auto max-w-sm p-4",children:(0,c.jsxs)(ec.fK,{children:[(0,c.jsx)(ec.$N,{children:"Delete Element"}),(0,c.jsx)(ec.Be,{children:"Are you sure you want to delete this element?"}),(0,c.jsxs)(ec.cN,{className:"flex justify-end gap-2 pt-4",children:[(0,c.jsx)(eu.GG,{className:"text-sm",children:"Cancel"}),(0,c.jsx)(eu.GG,{asChild:!0,children:(0,c.jsx)(j.z,{variant:"destructive",onClick:()=>f(n),children:"Delete"})})]})]})})]}),(0,c.jsxs)(ec.Vq,{children:[(0,c.jsx)(ec.hg,{asChild:!0,children:(0,c.jsx)(j.z,{variant:"ghost",className:"duration-125 pointer-events-auto transition ease-out hover:bg-secondary",onClick:e=>{d||(e.preventDefault(),e.stopPropagation(),t(!1),l([]))},disabled:b,children:(0,c.jsx)(em.Z,{className:"size-4"})})}),(0,c.jsx)(ec.cZ,{className:"pointer-events-auto max-w-sm p-4",children:(0,c.jsxs)(ec.fK,{children:[(0,c.jsx)(ec.$N,{children:"Discard Changes"}),(0,c.jsx)(ec.Be,{children:"Are you sure you want to discard your changes?"}),(0,c.jsxs)(ec.cN,{className:"flex justify-end gap-2 pt-4",children:[(0,c.jsx)(eu.GG,{className:"text-sm",children:"Cancel"}),(0,c.jsx)(eu.GG,{asChild:!0,children:(0,c.jsx)(j.z,{variant:"destructive",onClick:k,children:"Discard"})})]})]})})]})]}),(0,c.jsx)(Z.M,{children:(0,c.jsx)(h.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},exit:{opacity:0,y:20},children:!!n&&(0,c.jsx)(tJ,{element:n,disabled:b||!s})})}),!n&&(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1",children:[(0,c.jsx)(E.Z,{name:"my_location",className:"h-4 w-4"})," Edit"]}),(0,c.jsx)("div",{className:"flex h-full flex-col items-center justify-center pb-14 text-muted-foreground opacity-80",children:(0,c.jsx)("p",{className:"pt-4 text-center text-sm",children:"Select to edit or ask Lovable to modify"})})]}),(0,c.jsx)("div",{className:"pointer-events-none absolute bottom-0 left-0 right-0 flex flex-row gap-4 p-3",children:(0,c.jsx)("div",{className:"flex w-full items-center justify-end gap-2 pt-2",children:(0,c.jsxs)("div",{className:"flex items-center gap-2 transition-all duration-300",children:[(0,c.jsx)(j.z,{variant:"ghost",onClick:C,disabled:!d||b,className:"pointer-events-auto hover:bg-secondary",children:"Discard"}),(0,c.jsx)(j.z,{onClick:N,loading:b,disabled:!d,className:"pointer-events-auto",variant:"accent",children:"Save"})]})})})]})})};let t0=()=>{let{handleDeactivatePickAndEdit:e}=ey(),{enableServer:t}=(0,er.v)(),a=(0,y.Eh)(e=>e.setIsPickAndEditActive);return(0,u.useEffect)(()=>(t(),a(!0),()=>{e()}),[t,e,a]),null},t1=e=>{let{isActive:t,onChangeActive:a}=e;return(0,c.jsxs)(c.Fragment,{children:[!!t&&(0,c.jsx)(t0,{}),(0,c.jsx)(Z.M,{children:t&&(0,c.jsx)(h.E.div,{initial:{height:0,opacity:0},animate:{height:t?"auto":0,opacity:t?1:0},transition:{type:"spring",duration:.5,bounce:0},exit:{height:0,opacity:0},children:(0,c.jsx)(t$,{onChangeActive:a})},"design-panel")})]})};var t2=a(54188);let t4=e=>{let{chatPanelRef:t,isDesignActive:a,setIsDesignActive:s}=e,l=(0,et.DZ)();(0,y.Eh)(e=>e.consoleContentType);let n=(0,y.Eh)(e=>e.activeEdit),{setRepoInaccessibleDialogOpen:r}=(0,er.v)(),i=en(),{tab:o="chat"}=(0,d.useParams)(),p=(0,t2.d)({projectId:l,finalRedirectUrl:window.location.href,onRepoInaccessible:()=>{r(!0)},localStorageKey:l}),m=(0,u.useCallback)(async e=>{var t,a;let{body:n,options:r}=e;s(!1),null==r||null===(t=r.clear)||void 0===t||t.call(r),es.ZP.capture("chat_message_sent",{project_id:l,selected_element:(null===(a=n.selected_elements)||void 0===a?void 0:a.length)||null}),await p.mutateAsync({body:n,restore:null==r?void 0:r.restore,clear:null==r?void 0:r.clear})},[l,p,s]);return(0,c.jsx)(A.x,{localStorageKey:l,onSendChatMessage:m,hasActiveLock:i,children:"history"===o?(0,c.jsx)(t3,{activeEdit:n}):(0,c.jsx)(t6,{chatPanelRef:t,isDesignActive:a,setIsDesignActive:s,tab:o})})},t5=e=>e.charAt(0).toUpperCase()+e.slice(1),t6=(0,u.memo)(e=>{let{chatPanelRef:t,isDesignActive:a,setIsDesignActive:s,tab:l}=e,n=(0,ea.ZP)(e=>e.setSelectedImageUrl),{hasUnsavedChanges:r}=(0,er.v)(),i=(0,et.vp)(),{dropzoneElement:o,openFileUpload:d,getInputProps:u}=(0,$.B)(t),p=a&&r,h=(0,y.Eh)(e=>{var t;return null===(t=e.selectedElements)||void 0===t?void 0:t[0]}),g=J("alt+s",()=>{p||s(e=>!e)},{enabled:!0}),f=ee();return(0,c.jsxs)("div",{className:"flex max-h-[calc(100%-37px)] shrink-0 flex-col overflow-auto",children:[(0,c.jsx)(t1,{isActive:a,onChangeActive:s}),(0,c.jsxs)(v.x,{className:"relative mb-2 mr-2 md:mr-0",children:[(0,c.jsx)(T.T,{setSelectedImageUrl:n}),!a&&(0,c.jsx)(F,{}),(0,c.jsx)(V.pn,{children:(0,c.jsxs)(V.u,{children:[(0,c.jsx)(V.aJ,{asChild:!0,children:(0,c.jsx)("div",{children:(0,c.jsx)(q.E,{autoSize:!0,rows:1,disabled:p,forceShowPlaceholder:!1,placeholder:h?"Ask Lovable to modify ".concat(t5(h.elementType),"..."):"Ask Lovable..."})})}),(0,c.jsx)(V._v,{hidden:!a||!r,children:(0,c.jsx)("p",{children:"Save to continue"})})]})}),(0,c.jsx)(Q.y,{}),(0,c.jsxs)(x.s,{children:[(0,c.jsx)("input",{id:"file-upload",className:"hidden",...u()}),o,(0,c.jsxs)(j.z,{variant:"ghost",size:"sm",onClick:d,type:"button",className:"h-fit px-1.5 py-0.5 font-normal",children:[(0,c.jsx)(E.Z,{name:"add_photo_alternate",className:"h-4 w-4"}),"Attach"]}),!f&&(0,c.jsx)(V.pn,{children:(0,c.jsxs)(V.u,{delayDuration:p?0:300,children:[(0,c.jsx)(V.aJ,{className:"flex py-0",type:"button",asChild:!0,children:(0,c.jsx)("div",{children:(0,c.jsxs)(j.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>{es.ZP.capture("visual_editor_toggled",{state:!a,project_id:i}),s(e=>!e)},disabled:p,className:(0,m.cn)("h-fit gap-1 px-1.5 py-0.5 font-normal",{"bg-accent":a}),children:[(0,c.jsx)(E.Z,{name:"my_location",className:"h-4 w-4"}),"Edit"]})})}),(0,c.jsx)(V._v,{children:(0,c.jsx)("p",{children:p?"Save or discard to exit":"Select to edit (".concat(g,")")})})]})}),(0,c.jsx)(_,{}),(0,c.jsx)(X.t,{className:"ml-auto",disabled:p})]})]})]})});t6.displayName="ChatInputV2NormalContent";let t3=(0,u.memo)(e=>{let{activeEdit:t}=e;return(0,c.jsxs)(v.x,{className:"relative mb-2 mr-2 mt-4 flex flex-row items-center justify-between md:mr-0",children:[(0,c.jsx)("span",{className:"text-sm font-medium",children:"Previewing"}),(0,c.jsxs)(x.s,{children:[(0,c.jsx)(ei.k,{size:"sm"}),(0,c.jsx)(eo.q,{activeEdit:t,size:"sm"})]})]})});t3.displayName="ChatInputV2HistoryContent";var t9=a(85460),t8=a(91576),t7=a(72116),ae=a(76906),at=a(95106),aa=a(21770),as=a(1787);let al=e=>{let t=(0,ea.ZP)(e=>e.updateEdit),a=(0,as.M)(),s=(0,aa.D)({mutationFn:async t=>{let{editId:s,bookmarked:l,previousValue:n}=t;try{if(!(await a.put("/projects/".concat(e,"/bookmark/").concat(s),{bookmarked:l})).success)throw Error("Failed to ".concat(l?"bookmark":"unbookmark"," edit"));return{editId:s,bookmarked:l}}catch(e){throw console.error("Error toggling bookmark:",e),e}},onError:(e,a)=>{console.error("Error toggling bookmark:",e),t(a.editId,{bookmarked:a.previousValue}),B.Am.error("Failed to ".concat(e.message.includes("bookmark")?"bookmark":"unbookmark"," edit"),{description:"Please try again"})},onSuccess:e=>{B.Am.success(e.bookmarked?"Saved in history":"Removed from history")}});return{toggleBookmark:(0,u.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=!a;t(e,{bookmarked:l}),s.mutate({editId:e,bookmarked:l,previousValue:a})},[s,t]),isToggling:s.isPending}},an=(0,u.memo)(e=>{let{messageId:t,edit:a,simplified:s=!1}=e,{commit_sha:l}=null!=a?a:{},n=(0,y.Eh)(e=>e.setActiveEdit),r=(0,y.Eh)(e=>e.activeEdit),i=(0,y.Eh)(e=>e.project),o=(0,y.Eh)(e=>e.setActiveMessageId),d=(0,y.Eh)(e=>e.setShowConsole),p=(0,y.Eh)(e=>e.consoleContentType),h=(0,y.Eh)(e=>e.setConsolePreviewContent),g=(0,y.Eh)(e=>e.exitConsole),f=!!l&&l===(null==i?void 0:i.latest_commit_sha),{toggleBookmark:v}=al((null==i?void 0:i.id)||""),x=(0,u.useMemo)(()=>{if(l&&i)return(0,ae.t)({projectId:null==i?void 0:i.id,sha:l})},[l,i]),b=a&&(null==r?void 0:r.id)===(null==a?void 0:a.id)&&"preview"===p||f&&!r&&!p,w=(0,u.useMemo)(()=>{if(!(null==a?void 0:a.created_at))return null;let e=at.ou.fromSeconds(a.created_at.seconds);return{relative:e.toRelative(),absolute:e.toLocaleString(at.ou.DATETIME_MED)}},[a]),N=(0,u.useCallback)(e=>{if(e.altKey){window.open(x,"_blank");return}if(b||f){g();return}d("preview"),o(t),h(x),n(null!=a?a:void 0)},[t,o,d,x,h,b,f,g,n,a]),k=(0,u.useCallback)(e=>{e.stopPropagation(),(null==a?void 0:a.id)&&v(a.id,!!a.bookmarked)},[a,v]),C=(0,u.useMemo)(()=>{if(a){let{commit_message:e,reverted:t}=null!=a?a:{};return(0,c.jsxs)("div",{className:"flex w-full flex-col gap-1 overflow-hidden",children:[(0,c.jsxs)("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1",children:[(0,c.jsx)("span",{className:"flex items-center gap-1 truncate",children:e}),(f||t)&&!s&&(0,c.jsx)(ej.C,{className:"border-0 py-0",variant:f?"default":"destructive",children:f?"Current":"Reverted"})]}),(0,c.jsx)("span",{className:"text-sm text-muted-foreground",children:w?(0,c.jsx)(c.Fragment,{children:w.absolute}):b?"Click to Exit Preview":"Click to Preview"})]})}return(0,c.jsxs)("div",{className:"flex w-full flex-col overflow-hidden",children:[(0,c.jsx)("span",{children:"No preview available"}),(0,c.jsx)("span",{className:"text-sm text-muted-foreground",children:"\xa0"})]})},[a,b,f,w,s]);return(0,c.jsxs)(j.z,{onClick:N,disabled:!a,className:(0,m.cn)("mb-2 flex h-auto w-full cursor-pointer items-start gap-2 rounded-lg p-3 text-left text-sm font-medium transition-colors duration-150 ease-in-out","border border-muted-border bg-muted text-foreground","hover:border-border hover:bg-muted-hover",{"border-border bg-muted-active":b},{"hover:cursor-auto hover:border-border hover:bg-muted-active":b&&f}),children:[(0,c.jsx)(j.z,{variant:"ghost",size:"icon",className:"mt-[3px] h-auto w-auto hover:bg-transparent",onClick:k,children:(0,c.jsx)(E.Z,{name:(null==a?void 0:a.bookmarked)?"bookmark_fill":"bookmark",className:(0,m.cn)((null==a?void 0:a.bookmarked)?"fill-yellow-500 text-yellow-500":"")})}),C]})});an.displayName="PreviewCard";var ar=a(59512);let ai={'pre[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'var(--font-roboto-mono), "Roboto Mono", Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",overflow:"auto",background:"var(--muted)"},'code[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'var(--font-roboto-mono), "Roboto Mono", Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'pre[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},':not(pre) > code[class*="language-"]':{padding:".1em .3em",borderRadius:".3em",color:"#db4c69",background:"#1e1e1e"},".namespace":{opacity:".7"},"doctype.doctype-tag":{color:"#569CD6"},"doctype.name":{color:"#9cdcfe"},comment:{color:"#6a9955"},prolog:{color:"#6a9955"},punctuation:{color:"#d4d4d4"},".language-html .language-css .token.punctuation":{color:"#d4d4d4"},".language-html .language-javascript .token.punctuation":{color:"#d4d4d4"},property:{color:"#9cdcfe"},tag:{color:"#569cd6"},boolean:{color:"#569cd6"},number:{color:"#b5cea8"},constant:{color:"#9cdcfe"},symbol:{color:"#b5cea8"},inserted:{color:"#b5cea8"},unit:{color:"#b5cea8"},selector:{color:"#d7ba7d"},"attr-name":{color:"#9cdcfe"},string:{color:"#ce9178"},char:{color:"#ce9178"},builtin:{color:"#ce9178"},deleted:{color:"#ce9178"},".language-css .token.string.url":{textDecoration:"underline"},operator:{color:"#d4d4d4"},entity:{color:"#569cd6"},"operator.arrow":{color:"#569CD6"},atrule:{color:"#ce9178"},"atrule.rule":{color:"#c586c0"},"atrule.url":{color:"#9cdcfe"},"atrule.url.function":{color:"#dcdcaa"},"atrule.url.punctuation":{color:"#d4d4d4"},keyword:{color:"#569CD6"},"keyword.module":{color:"#c586c0"},"keyword.control-flow":{color:"#c586c0"},function:{color:"#dcdcaa"},"function.maybe-class-name":{color:"#dcdcaa"},regex:{color:"#d16969"},important:{color:"#569cd6"},italic:{fontStyle:"italic"},"class-name":{color:"#4ec9b0"},"maybe-class-name":{color:"#4ec9b0"},console:{color:"#9cdcfe"},parameter:{color:"#9cdcfe"},interpolation:{color:"#9cdcfe"},"punctuation.interpolation-punctuation":{color:"#569cd6"},variable:{color:"#9cdcfe"},"imports.maybe-class-name":{color:"#9cdcfe"},"exports.maybe-class-name":{color:"#9cdcfe"},escape:{color:"#d7ba7d"},"tag.punctuation":{color:"#808080"},cdata:{color:"#808080"},"attr-value":{color:"#ce9178"},"attr-value.punctuation":{color:"#ce9178"},"attr-value.punctuation.attr-equals":{color:"#d4d4d4"},namespace:{color:"#4ec9b0"},'pre[class*="language-javascript"]':{color:"#9cdcfe"},'code[class*="language-javascript"]':{color:"#9cdcfe"},'pre[class*="language-jsx"]':{color:"#9cdcfe"},'code[class*="language-jsx"]':{color:"#9cdcfe"},'pre[class*="language-typescript"]':{color:"#9cdcfe"},'code[class*="language-typescript"]':{color:"#9cdcfe"},'pre[class*="language-tsx"]':{color:"#9cdcfe"},'code[class*="language-tsx"]':{color:"#9cdcfe"},'pre[class*="language-css"]':{color:"#ce9178"},'code[class*="language-css"]':{color:"#ce9178"},'pre[class*="language-html"]':{color:"#d4d4d4"},'code[class*="language-html"]':{color:"#d4d4d4"},".language-regex .token.anchor":{color:"#dcdcaa"},".language-html .token.punctuation":{color:"#808080"},'pre[class*="language-"] > code[class*="language-"]':{position:"relative",zIndex:"1"},".line-highlight.line-highlight":{background:"#f7ebc6",boxShadow:"inset 5px 0 0 #f7d87c",zIndex:"0"}},ao=e=>{let{codeContent:t}=e,[a,s]=(0,u.useState)(!1),l=async()=>{await navigator.clipboard.writeText(String(t)),s(!0),setTimeout(()=>s(!1),2e3)};return(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("button",{className:"hover:bg-card-hover absolute right-2 top-2 rounded-md bg-secondary p-1 transition-colors",onClick:l,children:(0,c.jsx)(E.Z,{name:a?"check":"content_copy",className:"h-4 w-4 text-foreground transition-all duration-300"})}),(0,c.jsx)("div",{className:"max-w-full overflow-x-auto",children:(0,c.jsx)(ar.Z,{children:String(t).replace(/\n$/,""),style:ai,language:"sql",wrapLongLines:!0,PreTag:"div"})})]})};var ac=a(50835),ad=a(55214),au=a.n(ad),ap=a(62809);let am=e=>{let{match:t,codeContent:a}=e,[s,l]=(0,u.useState)(!1),n=async()=>{await navigator.clipboard.writeText(String(a)),l(!0),setTimeout(()=>l(!1),2e3)};return(0,c.jsxs)("div",{className:"relative my-2 rounded-md bg-muted",children:[(0,c.jsx)("button",{className:"absolute right-2 top-2 rounded-md bg-secondary p-1 transition-colors hover:bg-muted-hover",onClick:n,children:(0,c.jsx)(E.Z,{name:s?"check":"content_copy",className:"h-4 w-4 text-primary transition-all duration-300"})}),(0,c.jsx)("div",{className:"max-w-full overflow-x-auto font-mono",children:(0,c.jsx)(ar.Z,{children:String(a).replace(/\n$/,""),style:ai,language:t[1],wrapLongLines:!0,PreTag:"div",customStyle:{background:"var(--muted)",padding:"1em",margin:0}})})]})},ah={code(e){let{node:t,className:a,children:s}=e,l=/language-(\w+)/.exec(a||"");return l?(0,c.jsx)(am,{match:l,codeContent:s}):(0,c.jsx)("span",{className:"rounded px-1.5 py-0.5 font-mono text-sm",children:s})}},ag=(0,u.memo)(e=>{let{children:t,displayCursor:a,persisted:s}=e,l=!(0,u.useRef)(s).current,n=(0,ap.C)(t);return(0,c.jsxs)(h.E.div,{initial:{opacity:l?0:1},animate:{opacity:1},transition:{duration:1,ease:"easeOut"},className:"relative max-w-full",children:[l&&(0,c.jsx)(ac.U,{className:(0,m.cn)("prose prose-zinc prose-markdown absolute inset-x-0 top-0 max-w-full dark:prose-invert prose-h1:mb-2 prose-h1:text-xl prose-h1:font-bold prose-h2:text-lg prose-h2:font-bold prose-h3:text-base prose-h3:font-bold prose-pre:my-2 prose-pre:whitespace-pre-wrap prose-pre:break-words prose-pre:bg-background prose-ol:my-2 prose-ul:my-2 prose-li:my-0",au().customProse,a&&au().cursor),components:ah,children:n}),(0,c.jsx)(ac.U,{className:(0,m.cn)("prose prose-zinc prose-markdown max-w-full dark:prose-invert prose-h1:mb-2 prose-h1:text-xl prose-h1:font-bold prose-h2:text-lg prose-h2:font-bold prose-h3:text-base prose-h3:font-bold prose-pre:my-2 prose-pre:whitespace-pre-wrap prose-pre:break-words prose-pre:bg-background prose-ol:my-2 prose-ul:my-2 prose-li:my-0",au().customProse,a&&au().cursor,l&&"pointer-events-none opacity-0"),components:ah,children:t})]})});ag.displayName="PromptBox";var af=a(82718),av=a(33145),ax=a(72384);let ab=e=>{let{messageId:t,runState:a}=e,s=(0,et.DZ)(),{mutateAsync:l,isPending:n}=(0,t2.d)({projectId:s,finalRedirectUrl:void 0}),r=async()=>{await l({body:{message:"I have reviewed the SQL and it looks good. Please run it.",id:(0,tW.Z)(),mode:ax.S.INSTANT,run_sql_in_message_with_id:t},projectId:s})};return(0,c.jsx)("div",{children:(0,c.jsx)(j.z,{variant:"default",size:"sm",className:"gap-2 py-2",onClick:r,disabled:void 0!==a&&"not_started"!==a||n,children:"not_started"===a||void 0===a?"Apply changes":"running"===a?"Applying changes...":"failed"===a?"Failed to apply changes":"SQL already executed"})})};var ay=a(72918),aj=a(15681),aw=a(13590),aE=a(29501),aN=a(31229);let ak=e=>{let t=e.reduce((e,t)=>(e[t.key]=aN.Z_().min(1,{message:"".concat(t.name," is required")}),e),{});return aN.Ry(t)},aC=e=>e.toLowerCase().split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ").replace(/api/i,"API"),a_=(0,u.memo)(e=>{let{secretFormActions:t,isMostRecentMessage:a}=e,[s,l]=(0,u.useState)(!1),n=(0,et.DZ)(),{mutate:r}=(0,t2.d)({projectId:n,finalRedirectUrl:void 0}),i=(0,tU.O)(),o=(0,u.useMemo)(()=>t.map(e=>({key:e.name,name:aC(e.name)})),[t]),d=(0,u.useMemo)(()=>ak(o),[o]),p=(0,aE.cI)({resolver:(0,aw.F)(d),defaultValues:t.reduce((e,t)=>(e[t.name]="",e),{})});(0,u.useEffect)(()=>{s&&p.reset()},[s,p]);let m=(0,aa.D)({mutationFn:async e=>{let t={secrets:Object.entries(e).map(e=>{let[t,a]=e;return{name:t,value:a}})};await i.post("/projects/".concat(n,"/supabase/secrets"),t)},onSuccess:()=>{B.Am.success("API Keys added successfully"),l(!1),r({body:{id:(0,tW.Z)(),message:"I have now added the API keys you asked for."}})},onError:e=>{var t;B.Am.error("Failed to add API Keys",{description:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.detail})}}),h=(0,u.useCallback)(async e=>{await m.mutateAsync(e)},[m]);return(0,c.jsxs)(ec.Vq,{open:s,onOpenChange:l,children:[(0,c.jsx)(ec.hg,{children:(0,c.jsxs)(j.z,{disabled:!a,variant:"outline",size:"sm",className:"flex items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",children:[(0,c.jsx)(E.Z,{name:"key",size:"small"}),"Add API Key",1===t.length?"":"s"]})}),(0,c.jsxs)(ec.cZ,{className:"sm:max-w-[425px]",children:[(0,c.jsxs)(ec.fK,{children:[(0,c.jsx)(ec.$N,{asChild:!0,children:(0,c.jsxs)("h1",{className:"text-2xl font-bold",children:["Add API Key",1===t.length?"":"s"]})}),(0,c.jsxs)(eu.Be,{className:"text-muted-foreground",children:["Enter your API Key",1===t.length?"":"s"," to continue. Manage this later from the Supabase menu."," ",(0,c.jsx)(N.default,{href:"https://docs.lovable.dev/integrations/supabase#storing-secrets-with-supabase",className:"text-primary underline hover:no-underline",target:"_blank",children:"Learn more"})]})]}),(0,c.jsx)(aj.l0,{...p,children:(0,c.jsxs)("form",{onSubmit:p.handleSubmit(h),className:"space-y-4",children:[o.map(e=>(0,c.jsx)(aj.Wi,{control:p.control,name:e.key,render:t=>{let{field:a}=t;return(0,c.jsxs)(aj.xJ,{children:[(0,c.jsx)(aj.lX,{children:e.name}),(0,c.jsx)(aj.NI,{children:(0,c.jsx)(e_.I,{placeholder:"Enter API Key",type:"password",...a})}),(0,c.jsx)(aj.zG,{})]})}},e.key)),(0,c.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,c.jsx)(eu.GG,{asChild:!0,children:(0,c.jsx)(j.z,{type:"button",disabled:m.isPending,variant:"outline",children:"Cancel"})}),(0,c.jsx)(j.z,{loading:m.isPending,type:"submit",children:"Submit"})]})]})})]})]})});a_.displayName="AddApiKeysButton";let aS=e=>e.startsWith("https://supabase.com/dashboard/project/")?(0,c.jsx)(av.default,{width:16,height:16,src:"/icons/supabase_logo.svg",alt:"Supabase"}):(0,c.jsx)(E.Z,{name:"open_in_new"});function aT(e){let{linkActions:t}=e;return t&&0!==t.length?(0,c.jsx)(c.Fragment,{children:null==t?void 0:t.map(e=>(0,c.jsx)(j.z,{asChild:!0,variant:"outline",size:"sm",className:"flex items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,c.jsxs)(N.default,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[aS(e.url),(0,c.jsx)("span",{className:"truncate",children:e.text})]})},e.url))}):null}function aA(e){let{messagePromptActions:t}=e,a=(0,y.Eh)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.id}),s=(0,y.Eh)(e=>e.chatMode),l=(0,y.Eh)(e=>e.setChatMode),{mutate:n,isPending:r}=(0,t2.d)({projectId:a,finalRedirectUrl:void 0});return t&&0!==t.length?(0,c.jsx)(c.Fragment,{children:null==t?void 0:t.map(e=>(0,c.jsx)(j.z,{asChild:!0,variant:"outline",size:"sm",disabled:r,onClick:()=>{s===y.jE.CHAT_ONLY&&l(y.jE.DEFAULT),n({body:{id:(0,tW.Z)(),message:e.message}})},className:"flex cursor-pointer items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,c.jsxs)("span",{className:"flex items-center gap-1",children:[(0,c.jsx)(af.Z,{size:16}),(0,c.jsx)("span",{className:"truncate",children:e.text})]})},e.message))}):null}let aP=e=>{var t;let{messageId:a,lovActions:s,sqlRunState:l,persisted:n}=e,r=(0,ea.ZP)(e=>e.isMostRecentMessage(a)),{migrateActions:i,linkActions:o,knowledgeAction:d,messagePromptActions:p,secretFormActions:m}=(0,u.useMemo)(()=>{let e=null==s?void 0:s.filter(e=>"lov_action__migrate"===e.type&&e.done),t=null==s?void 0:s.filter(e=>"lov_action__link"===e.type),a=null==s?void 0:s.filter(e=>"lov_action__message_prompt"===e.type),l=null==s?void 0:s.filter(e=>"lov_action__secret_form"===e.type);return{migrateActions:e,linkActions:t,knowledgeAction:null==s?void 0:s.find(e=>"lov_action__knowledge"===e.type),messagePromptActions:a,secretFormActions:l}},[s]);return(0,c.jsxs)(h.E.div,{className:"flex max-w-full flex-1 flex-wrap gap-2 overflow-hidden",initial:{opacity:n?1:0},animate:{opacity:1},transition:{ease:"easeOut",duration:1},children:[(null!==(t=null==i?void 0:i.length)&&void 0!==t?t:0)>0&&(0,c.jsx)(ab,{messageId:a,runState:l},"migrate"),(0,c.jsx)(aT,{linkActions:o}),(0,c.jsx)(aA,{messagePromptActions:p}),m&&m.length>0&&(0,c.jsx)(a_,{secretFormActions:m,isMostRecentMessage:r}),d&&(0,c.jsx)(ay.Z,{})]})};var aI=a(39484);let aM=e=>function(t){let{commitSha:a,previewBuildStatus:s}=t,l=(0,y.Eh)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.latest_commit_sha}),n=(0,y.Eh)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.name}),r=a===l,i=(0,u.useMemo)(()=>{if(a&&n)return(0,ae.t)({projectName:n,sha:r?void 0:a})},[a,n,r]),{isDisabled:o,disabledReason:d}=(0,u.useMemo)(()=>"pending"===s?{isDisabled:!0,disabledReason:"Preview is being built..."}:"failed"===s?{isDisabled:!0,disabledReason:"Failed to build preview"}:i?{isDisabled:!1,disabledReason:void 0}:{isDisabled:!0,disabledReason:"There is no preview available for this version"},[i,s]),p={...t,previewUrl:i,isLatestCommit:r,isDisabled:o,disabledReason:d};return(0,c.jsx)(e,{...p})},aL=aM(e=>{let{previewUrl:t,isDisabled:a,disabledReason:s}=e;if(a||!t){let e=(0,c.jsxs)(j.z,{size:"sm",className:"duration-125 hover:bg-card-hover h-5 gap-1 px-1.5 py-0.5 text-xs transition-all ease-in-out",variant:"ghost",disabled:!0,children:[(0,c.jsx)(E.Z,{name:"open_in_new",size:"small"}),(0,c.jsx)("span",{children:"Preview"})]});return s?(0,c.jsx)(V.pn,{children:(0,c.jsxs)(V.u,{children:[(0,c.jsx)(V.aJ,{asChild:!0,children:(0,c.jsx)("span",{className:"flex items-center",tabIndex:0,children:e})}),(0,c.jsx)(V._v,{children:(0,c.jsx)("p",{children:s})})]})}):e}return(0,c.jsx)(j.z,{size:"sm",className:"duration-125 h-5 gap-1 px-1.5 py-0.5 text-xs font-normal transition-all ease-in-out hover:bg-muted-hover",variant:"ghost",asChild:!0,children:(0,c.jsxs)(N.default,{href:t,target:"_blank",rel:"noreferrer",children:[(0,c.jsx)(E.Z,{name:"open_in_new",size:"small"}),(0,c.jsx)("span",{children:"Preview"})]})})});var aD=a(97459),aR=a(2925),az=a(92039),aO=a(5978);let aK=e=>function(t){let{editId:a,commitSha:s,projectId:l}=t,n=(0,az.I)(),r=(0,y.Eh)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.latest_commit_sha}),i=(0,aR.u)(e=>e.setCurrentPage),o=(0,aR.u)(e=>e.currentPage),d=(0,y.Eh)(e=>e.shouldBlockActions()),{edits:p}=(0,aD.U)({projectId:l,constraints:a?[(0,aO.ar)("id","==",a)]:[],disable:!a}),m=s===r,h=(0,u.useCallback)(()=>{if(a){if(0!==p.length){var e,t;(null===(t=p[0])||void 0===t?void 0:null===(e=t.pages)||void 0===e?void 0:e.find(e=>e.name===o))||i("index")}n.mutateAsync({edit:{id:a}})}},[a,n,i]),{isDisabled:g,disabledReason:f}=(0,u.useMemo)(()=>s?m?{isDisabled:!0,disabledReason:"Already active"}:n.isPending?{isDisabled:!0,disabledReason:"Restore is in progress"}:d?{isDisabled:!0,disabledReason:"Other changes are currently being applied"}:{isDisabled:d||n.isPending||m||!s,disabledReason:"Disabled"}:{isDisabled:!0,disabledReason:"Not a valid restore target"},[d,n.isPending,m,s]),v={...t,onRevert:a?h:void 0,isLatestCommit:m,isDisabled:g,isPending:n.isPending,disabledReason:f};return(0,c.jsx)(e,{...v})},aZ=aK(e=>{let{onRevert:t,isDisabled:a,isPending:s,disabledReason:l}=e,n=(0,c.jsxs)(j.z,{size:"sm",className:"transition-color duration-125 h-5 gap-1 px-1.5 py-0.5 text-xs font-normal ease-in-out hover:bg-muted-hover",variant:"ghost",onClick:t,disabled:a||s,children:[(0,c.jsx)(E.Z,{name:"restart_alt",size:"small",className:s?"animate-spin":""}),(0,c.jsx)("span",{children:"Restore"})]});return a&&l?(0,c.jsx)(V.pn,{children:(0,c.jsxs)(V.u,{children:[(0,c.jsx)(V.aJ,{asChild:!0,children:(0,c.jsx)("span",{className:"flex items-center",tabIndex:0,children:n})}),(0,c.jsx)(V._v,{children:(0,c.jsx)("p",{children:l})})]})}):n}),aU=(0,u.memo)(e=>{let{editId:t,commitSha:a,previewBuildStatus:s}=e,l=(0,et.vp)();return(0,c.jsx)("div",{className:"absolute -right-2 bottom-0",children:(0,c.jsxs)("div",{className:"flex translate-y-1/2 items-center gap-1 rounded-lg border border-muted-border bg-muted p-0.5",children:[(0,c.jsx)(aZ,{editId:t,commitSha:a,projectId:null!=l?l:""}),(0,c.jsx)(aL,{commitSha:a,previewBuildStatus:s})]})})});aU.displayName="CodeCardActions";let aF=e=>{var t,a;let{edit:s,handleToggleBookmark:l,handleOnClick:n,isActive:r,code:i,messageStopped:o,status:d,revertCard:u}=e;return(0,c.jsxs)("div",{className:"flex w-full items-start gap-1",children:[(null==s?void 0:s.id)&&(0,c.jsx)("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center",children:(0,c.jsx)(j.z,{variant:"ghost",size:"icon",className:"mt-3 flex h-8 w-8 items-center justify-center hover:bg-transparent",onClick:l,children:(0,c.jsx)(E.Z,{name:(null==s?void 0:s.bookmarked)?"bookmark_fill":"bookmark",className:(0,m.cn)("text-muted-foreground",(null==s?void 0:s.bookmarked)?"fill-yellow-500 text-yellow-500":"")})})}),(0,c.jsxs)("div",{className:"relative w-full",children:[(0,c.jsx)(aU,{editId:null!==(t=null==s?void 0:s.id)&&void 0!==t?t:void 0,commitSha:null!==(a=null==s?void 0:s.commit_sha)&&void 0!==a?a:void 0}),(0,c.jsxs)(j.z,{onClick:n,variant:"outline",className:(0,m.cn)("flex h-auto w-full max-w-56 cursor-pointer items-center gap-2 rounded-lg p-3 text-sm font-medium sm:max-w-xs","border border-muted-border bg-muted text-foreground","hover:border-border hover:bg-muted-hover","duration-125 transition-all ease-in-out",{"border-muted-active bg-muted-active":r},{"items-start":(null==i?void 0:i.done)||u}),children:[(0,c.jsx)(E.Z,{name:"code"}),u?(0,c.jsx)(aH,{isActive:r,code:i,hasEdit:!!s,commitMessage:null==s?void 0:s.commit_message,editNumber:null==s?void 0:s.number,status:d}):i&&((null==i?void 0:i.done)?(0,c.jsx)(aH,{isActive:r,code:i,hasEdit:!!s,commitMessage:null==s?void 0:s.commit_message,editNumber:null==s?void 0:s.number,status:d}):(0,c.jsx)(aW,{isActive:r,code:i,messageStopped:o})),(0,c.jsx)(E.Z,{name:"chevron_right"})]})]})]})},aB=(0,u.memo)(e=>{let{messageId:t,code:a,edit:s,messageStopped:l,persisted:n,status:r}=e,i=(0,y.Eh)(e=>e.setActiveMessageId),o=(0,y.Eh)(e=>e.setConsoleCodeContent),d=(0,y.Eh)(e=>e.setShowConsole),p=(0,y.Eh)(e=>e.consoleContentType),m=(0,y.Eh)(e=>e.activeMessageId),g=(0,y.Eh)(e=>e.setCodeViewType),f=(0,y.Eh)(e=>e.setActiveEdit),v=(0,y.Eh)(e=>e.project),x=m===t&&"code"===p,b=(0,y.Eh)(e=>e.exitConsole),{toggleBookmark:j}=al((null==v?void 0:v.id)||"");(0,u.useEffect)(()=>{x&&f(null!=s?s:void 0)},[x,s,f]);let w=(0,u.useCallback)(()=>{if(x)b();else{var e;o(a),d("code"),i(t),f(null!=s?s:void 0),g((null==s?void 0:null===(e=s.diff)||void 0===e?void 0:e.length)?y.es.DIFF:y.es.RAW)}},[x,b,i,o,d,g,f,s,t,a]),E=(0,u.useCallback)(e=>{e.stopPropagation(),(null==s?void 0:s.id)&&j(s.id,!!s.bookmarked)},[s,j]);return(0,c.jsx)(h.E.div,{className:"relative flex w-5/6 max-w-xs pb-4",initial:{opacity:n?1:0},animate:{opacity:1},transition:{ease:"easeOut",duration:1},children:(0,c.jsx)(aF,{edit:null!=s?s:null,handleToggleBookmark:E,handleOnClick:w,isActive:x,code:a,messageStopped:l,status:r,revertCard:!1})})});aB.displayName="CodeCardV2";let aW=(0,u.memo)(e=>{let{isActive:t,code:a,messageStopped:s}=e,[l,n]=(0,u.useState)(""),r=!s&&!a.done;(0,u.useEffect)(()=>{a.parts.length>0&&n(e=>aG(a)||e)},[a]);let i=r?l||"...":l;return(0,c.jsx)("div",{className:"min-h-[1.375rem] min-w-0 flex-1",children:(0,c.jsx)(Z.M,{mode:"popLayout",children:(0,c.jsx)(h.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("span",{className:(0,m.cn)("truncate text-muted-foreground",{"text-foreground":t}),children:i}),r&&(0,c.jsx)(aI.T,{text:"",className:"mt-0"})]})},i)})})});aW.displayName="EditingTitle";let aH=(0,u.memo)(e=>{let{isActive:t,code:a,hasEdit:s,commitMessage:l,editNumber:n,status:r}=e,{title:i,body:o}=(0,u.useMemo)(()=>{if(s)return{title:"".concat(null!=l?l:"no commit message"),body:"View code"};let e=(0,t7.JI)(a);return{title:"Edited ".concat(e," file").concat(1===e?"":"s"),body:"completed"===r?"Failed to save changes":"Saving changes..."}},[s,n,a,l,r]);return(0,c.jsxs)("div",{className:"flex w-full flex-col gap-1 overflow-hidden text-left",children:[(0,c.jsx)("span",{className:(0,m.cn)("truncate",{"text-foreground":t}),children:i}),(0,c.jsx)("span",{className:"truncate font-normal",children:o})]})});aH.displayName="FinishedEditingTitle";let aG=e=>{if(e.parts&&e.parts.length>0){let t=e.parts[e.parts.length-1];if("file_path"in t)return t.file_path}},aV=(e,t)=>{try{switch(e){case"read_file":return"Read ".concat(t.arg0);case"scrape_website":return"Scraped ".concat(t.arg0);case"url_screenshot":return"Screenshot of ".concat(t.arg0);case"supabase_read_query":return"Read from database";case"supabase_analytics_query":return"Retrieved Supabase logs";default:return e}}catch(t){return e}},aX=e=>{switch(e){case"read_file":return"notes";case"scrape_website":return"web";case"url_screenshot":return"preview";case"supabase_read_query":return"table";case"supabase_analytics_query":return"history";default:return"info"}},aq=e=>{let t,{name:a,data:s,done:l=!0}=e,[n,r]=(0,u.useState)(!1),i=(0,b.c)();try{t=JSON.parse(s)}catch(e){t=s}let o=(null==t?void 0:t.arg0)||JSON.stringify(t,null,2),d=aV(a,t),p=aX(a),m="read_file"===a,h=i&&!m;return(0,c.jsxs)("div",{className:"relative my-1 rounded-lg border border-border/40 bg-muted/10 p-2",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 ".concat(h?"cursor-pointer":""),onClick:()=>h&&r(!n),children:[(0,c.jsx)(E.Z,{name:p,size:"small",className:"text-muted-foreground/70"}),(0,c.jsx)("span",{className:"text-sm text-muted-foreground/90",children:d}),!l&&(0,c.jsx)(E.Z,{name:"progress_activity",size:"small",className:"ml-auto animate-spin text-muted-foreground"}),h&&(0,c.jsx)(E.Z,{name:n?"expand_circle_up":"expand_circle_down",size:"small",className:"ml-auto text-muted-foreground/70"})]}),n&&h&&(0,c.jsx)("div",{className:"mt-2 whitespace-pre-wrap pl-6 text-sm text-foreground/80",children:o})]})},aQ=e=>"parts"in e&&"done"in e,aY=e=>"lovSql"in e&&"done"in e,aJ=e=>"name"in e&&"data"in e&&"done"in e,a$=e=>{let{messageId:t,content:a,editId:s,stopped:l,sqlRunState:n,persisted:r,status:i}=e,{tab:o="chat"}=(0,d.useParams)(),p=(0,ea.ZP)(e=>e.getEdit(s)),m=(0,u.useMemo)(()=>a?(0,t7.hP)(a):null,[a]);return a?"history"===o?p?(0,c.jsx)(an,{edit:p,messageId:t,simplified:!0}):null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a0,{content:a,parsed:m,editId:s,messageId:t,messageStopped:!l,persisted:r,status:i}),(0,c.jsx)(aP,{messageId:t,lovActions:null==m?void 0:m.lovActions,sqlRunState:n,persisted:r})]}):null},a0=e=>{let{messageId:t,messageStopped:a,content:s,parsed:l,editId:n,persisted:r,status:i}=e,o=(0,ea.ZP)(e=>e.getEdit(n));return l?l.parts.map((e,s)=>{if(aJ(e))return(0,c.jsx)(aq,{name:e.name,data:e.data,done:e.done},s);if("done"in e){if(aQ(e))return(0,c.jsx)(aB,{code:e,messageId:t,messageStopped:a,edit:o,persisted:r,status:i},s);if(aY(e))return(0,c.jsx)(ao,{codeContent:e.lovSql},s)}if("content"in e)return(0,c.jsx)(ag,{displayCursor:!1,persisted:r,children:e.content},s);throw Error("Unknown part type")}):s.length>0?(0,c.jsx)(ag,{displayCursor:!1,persisted:r,children:s||""}):null},a1=e=>{var t;let{message:a}=e,{tab:s="chat"}=(0,d.useParams)();return(0,c.jsxs)("div",{className:(0,m.cn)("flex flex-col space-y-4 overflow-auto text-left text-base leading-[22px]"),style:{overflowWrap:"anywhere"},children:[(0,c.jsx)(a$,{content:a.content,messageId:a.id,editId:a.editId,stopped:!a.stopped,sqlRunState:a.sqlRunState,persisted:a.persisted,status:a.status}),"history"!==s&&(0,c.jsx)(c.Fragment,{children:a.errors&&(0,c.jsx)(t8.mL,{errors:null!==(t=a.errors)&&void 0!==t?t:null})})]})},a2=e=>{let{branchName:t}=e;return(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("span",{children:"Switched branch to"}),(0,c.jsx)("div",{className:"ml-2 flex items-center gap-2 rounded-full border bg-card p-1 px-2",children:(0,c.jsx)("p",{children:t})})]})};var a4=a(97822),a5=a(49968);let a6=e=>{let{messageId:t,langsmithUrl:a,editId:s}=e,l=(0,et.DZ)(),n=(0,b.c)(),r=(0,y.Eh)(e=>e.setActiveMessageId),i=(0,y.Eh)(e=>e.setShowConsole);return n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(w.VD,{}),(0,c.jsxs)(w.Xi,{className:"w-full gap-2",onClick:()=>{r(t),i("debug")},children:[(0,c.jsx)(E.Z,{name:"bug_report",size:"small"}),(0,c.jsx)("span",{children:"Debug"}),(0,c.jsx)(a4.s,{className:"ml-auto"})]}),a&&(0,c.jsx)(w.Xi,{className:"w-full gap-2",asChild:!0,children:(0,c.jsxs)("a",{href:a,target:"_blank",rel:"noreferrer",children:[(0,c.jsx)(E.Z,{name:"open_in_new",size:"small"}),(0,c.jsx)("span",{children:"See in Langsmith"}),(0,c.jsx)(a4.s,{className:"ml-auto"})]})}),(0,c.jsx)(w.Xi,{className:"w-full gap-2",asChild:!0,children:(0,c.jsxs)("a",{href:(0,a5.pr)(l,t),target:"_blank",rel:"noreferrer",children:[(0,c.jsx)(E.Z,{name:"open_in_new",size:"small"}),(0,c.jsx)("span",{children:"Firestore: Message"}),(0,c.jsx)(a4.s,{className:"ml-auto"})]})}),s&&(0,c.jsx)(w.Xi,{className:"w-full gap-2",asChild:!0,children:(0,c.jsxs)("a",{href:(0,a5.oo)(l,s),target:"_blank",rel:"noreferrer",children:[(0,c.jsx)(E.Z,{name:"open_in_new",size:"small"}),(0,c.jsx)("span",{children:"Firestore: Edit"}),(0,c.jsx)(a4.s,{className:"ml-auto"})]})})]}):null};var a3=a(6478);let a9=e=>{let{messageId:t}=e,a=(0,et.DZ)(),s=(0,a3.F)(),l=(0,u.forwardRef)((e,t)=>(0,c.jsxs)(w.Xi,{ref:t,...e,className:"flex w-full justify-between gap-4",children:[(0,c.jsx)("span",{children:"Copy message link"}),(0,c.jsx)(E.Z,{name:"link",size:"small",className:"ml-auto"})]}));l.displayName="TriggerComponent";let n=s({TriggerComponent:l,textToCopy:"".concat(window.location.origin,"/projects/").concat(a,"?messageId=").concat(t)});return(0,c.jsx)(V.pn,{children:(0,c.jsxs)(V.u,{children:[(0,c.jsx)(V.aJ,{asChild:!0,children:n}),(0,c.jsx)(V._v,{children:"Copy link to clipboard"})]})})},a8=aM(e=>{let{previewUrl:t,commitSha:a}=e;return(0,c.jsx)(w.Xi,{asChild:!0,disabled:!t||!a,children:(0,c.jsxs)("a",{className:"w-full",href:t,target:"_blank",rel:"noreferrer",children:["Preview",(0,c.jsx)(E.Z,{name:"open_in_new",className:"ml-auto",size:"small"})]})})}),a7=aK(e=>{let{onRevert:t,isDisabled:a}=e;return(0,c.jsxs)(w.Xi,{className:"w-full",onClick:t,disabled:a,children:["Restore",(0,c.jsx)(E.Z,{name:"restart_alt",className:"ml-auto",size:"small"})]})}),se=e=>{let{messageId:t,editId:a,langsmithUrl:s,className:l}=e,n=(0,ea.ZP)(e=>e.getEdit(a)),r=(0,et.vp)();return(0,c.jsxs)(w.h_,{children:[(0,c.jsx)(w.$F,{asChild:!0,className:l,children:(0,c.jsx)(j.z,{variant:"ghost",size:"icon-sm",children:(0,c.jsx)(E.Z,{name:"more_horiz",size:"small"})})}),(0,c.jsxs)(w.AW,{align:"end",children:[(0,c.jsx)(a9,{messageId:t}),(0,c.jsx)(a8,{commitSha:null==n?void 0:n.commit_sha}),(0,c.jsx)(a7,{editId:a,commitSha:null==n?void 0:n.commit_sha,projectId:null!=r?r:""}),(0,c.jsx)(a6,{messageId:t,langsmithUrl:s,editId:a})]})]})};var st=a(28538);let sa=e=>"userCommit"!==e.type&&"userMessage"!==e.type,ss=e=>{let{previousMessageId:t}=e,a=(0,ea.ZP)(e=>t?e.getMessage(t):void 0);return a&&!sa(a)?(0,c.jsx)(sn,{className:"mb-2"}):null},sl=e=>{let{message:t}=e,{tab:a="chat"}=(0,d.useParams)();return"history"===a?null:(0,c.jsxs)("div",{className:"mb-2 flex shrink-0 items-center gap-2",children:[(0,c.jsx)(sn,{className:"shrink-0"}),(0,c.jsx)("span",{className:"flex-shrink translate-y-[1px] overflow-hidden text-ellipsis text-nowrap text-xs text-muted-foreground opacity-0 transition-opacity duration-150 ease-out group-hover:opacity-100",children:(0,st.WU)(t.createdAt,"HH:mm 'on' MMM dd, yyyy")}),(0,c.jsx)(se,{className:"ml-auto",messageId:t.id,editId:t.editId,langsmithUrl:t.langsmithUrl})]})},sn=e=>{let{className:t}=e;return(0,c.jsxs)("div",{className:(0,m.cn)("flex items-center gap-2 pl-2",t),children:[(0,c.jsx)(av.default,{alt:"lovable logo",src:"/img/lovable-logo.svg",width:"20",height:"20"}),(0,c.jsx)("span",{className:"whitespace-nowrap text-sm font-medium",children:"Lovable"})]})};var sr=a(68687);let si=e=>{let{message:t,previousMessageId:a}=e,[s]=(0,tA.a)(),l=(0,sr.ye)("collaboration")||!1,n=(0,ea.ZP)(e=>e.getCollaborator(t.userId)),r=(0,ea.ZP)(e=>e.getMessage(a));return l&&n&&(!r||"userMessage"!==r.type||r.userId!==t.userId)&&n?(0,c.jsxs)("div",{className:"max-w-full self-end truncate text-sm text-xs font-medium text-muted-foreground",children:["From"," ",(0,c.jsx)(N.default,{className:"hover:underline",href:"/@".concat(n.username),children:(null==s?void 0:s.uid)===n.id?"You":n.display_name===n.id?n.email:n.display_name})]}):null},so=e=>{let{message:t,previousMessageId:a}=e;switch(t.type){case"userCommit":return null;case"userMessage":return(0,c.jsx)(si,{message:t,previousMessageId:a});case"branchSwitched":case"revertSuccess":case"revertSuccessv2":return(0,c.jsx)(ss,{message:t,previousMessageId:a});case"aiMessage":return(0,c.jsx)(sl,{message:t})}};var sc=a(96771);let sd=e=>{var t;let{shortCommitHash:a,newUI:s=!1}=e,l=(0,ea.ZP)(e=>e.getEditByShortCommitHash(a)),n=(0,y.Eh)(e=>e.setCodeViewType),r=(0,y.Eh)(e=>e.setActiveEdit),i=(0,y.Eh)(e=>e.setShowConsole),o=(0,y.Eh)(e=>e.project),{toggleBookmark:p}=al(null!==(t=null==o?void 0:o.id)&&void 0!==t?t:""),m=(0,y.Eh)(e=>e.consoleContentType),g=(0,y.Eh)(e=>e.activeMessageId)===(null==l?void 0:l.id)&&"code"===m,f=(0,y.Eh)(e=>e.exitConsole),v=(0,y.Eh)(e=>e.setActiveMessageId),x=(0,ea.ZP)(e=>e.setScrollToTarget),{tab:b="chat"}=(0,d.useParams)();(0,u.useEffect)(()=>{g&&r(null!=l?l:void 0)},[g,l,r]);let j=(0,u.useCallback)(()=>{l&&(g?(console.log("isActive",g),f()):(v(l.id),n(y.es.DIFF),r(l),i("code")))},[l,g,f,v,n,r,i]),w=(0,u.useCallback)(e=>{e.stopPropagation(),(null==l?void 0:l.id)&&p(l.id,!!l.bookmarked)},[l,p]);return l?s?"history"===b?(0,c.jsx)(an,{edit:l,simplified:!0}):(0,c.jsx)("div",{className:"flex flex-col gap-2 leading-[22px]",style:{overflowWrap:"anywhere"},children:(0,c.jsx)(h.E.div,{className:"relative mb-6 mt-3 flex w-5/6 max-w-sm",initial:{opacity:1},animate:{opacity:1},transition:{ease:"easeOut",duration:1},children:(0,c.jsx)(aF,{edit:null!=l?l:null,handleToggleBookmark:w,handleOnClick:j,isActive:g,code:void 0,messageStopped:!1,status:"completed",revertCard:!0})})}):(0,c.jsxs)("button",{className:"flex items-center",onClick:()=>{l&&(l.type===sc.I.type.DEVELOPER_UPDATE?x({target:"shortCommitHash",shortCommitHash:a}):x({target:"editId",editId:l.id}))},children:[(0,c.jsx)("span",{className:"mr-2 text-sm text-muted-foreground",children:"Restored"}),(0,c.jsx)("div",{className:"flex items-center gap-2 rounded-full border border-emerald-500/20 bg-emerald-500/10 px-2.5 py-1.5 transition-colors group-hover:border-emerald-500/30 group-hover:bg-emerald-500/15",children:(0,c.jsx)("span",{className:"text-sm text-emerald-500",children:l.commit_message})})]}):null},su=e=>{var t;let{shortCommitHash:a}=e,s=(0,ea.ZP)(e=>e.getEditByShortCommitHash(a)),l=(0,et.vp)(),{tab:n="chat"}=(0,d.useParams)();return s?"history"===n?(0,c.jsx)(an,{edit:s,simplified:!0}):(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg border bg-muted p-3",children:[(0,c.jsx)("div",{className:"flex w-full items-baseline gap-2",children:(0,c.jsx)("h4",{children:"External Commit"})}),(0,c.jsx)("p",{className:"whitespace-pre-line text-xs",style:{overflowWrap:"anywhere"},children:s.commit_message})]}),(0,c.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,c.jsx)(aZ,{editId:s.id,commitSha:s.commit_sha,projectId:null!=l?l:""}),(0,c.jsx)(aL,{commitSha:s.commit_sha,previewBuildStatus:null!==(t=s.previewBuildStatus)&&void 0!==t?t:void 0})]})]}):null};var sp=a(74928);function sm(e){let t=e.match(/([\s\S]+)```([\s\S]+)```\n+$/);return t?{error:t[2].trim(),text:t[1].trim()}:(W.P.error("no_error_message_found_in_input",{input:e}),{error:"",text:e})}let sh=e=>{let{content:t,open:a,onOpenChange:s,openText:l,closedText:n}=e;return(0,c.jsxs)(sp.zF,{open:a,onOpenChange:s,children:[(0,c.jsx)(sp.wy,{asChild:!0,children:(0,c.jsx)(j.z,{variant:"link",className:"mt-2 pl-0 font-semibold",children:a?l:n})}),(0,c.jsx)(sp.Fw,{className:"mt-4",children:(0,c.jsx)("pre",{className:"mt-2 rounded-md bg-secondary p-4 text-sm",children:(0,c.jsx)("code",{className:"block max-h-[300px] overflow-x-auto overflow-y-auto whitespace-pre-wrap",children:t})})})]})},sg=e=>{let{messageContent:t}=e,{error:a}=sm(t);return(0,c.jsx)(sf,{errorContent:a})},sf=e=>{let{errorContent:t}=e,[a,s]=(0,u.useState)(!1);return(0,c.jsx)(sh,{content:t,open:a,onOpenChange:s,openText:"Hide error",closedText:"Show error"})},sv=e=>{let{content:t}=e,[a,s]=(0,u.useState)(!1);return(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{children:"Write the code to create a new integration or update the existing integration with Supabase."}),(0,c.jsx)(sh,{content:t,open:a,onOpenChange:s,openText:"Hide detailed instructions",closedText:"Show detailed instructions"})]})},sx=e=>{let{content:t,selectedElements:a,containsError:s,tags:l}=e;return(0,c.jsxs)("div",{children:[(0,c.jsx)(sj,{selectedElements:a}),(0,c.jsx)(sw,{content:t,containsError:s}),(0,c.jsx)(sb,{content:t,tags:l})]})},sb=e=>{let{content:t,tags:a}=e;return a.includes("supabase-integration-update")?(0,c.jsx)(sv,{content:t}):null},sy=e=>{let{elementType:t}=e,a=O(t);return a?(0,c.jsx)(a,{fill:"white",className:"size-4"}):null},sj=e=>{let{selectedElements:t}=e;return 0===t.length?null:(0,c.jsx)(V.pn,{children:(0,c.jsx)("div",{className:"mb-2 flex flex-wrap gap-2",children:t.map((e,t)=>{var a,s;return(0,c.jsxs)(V.u,{children:[(0,c.jsx)(V.aJ,{asChild:!0,children:(0,c.jsxs)("div",{className:(0,m.cn)((0,j.d)({variant:"outline",size:"sm"}),"flex items-center gap-2 text-xs"),children:[(0,c.jsx)(sy,{elementType:e.elementType}),(0,c.jsx)("span",{children:e.elementType})]})}),(0,c.jsxs)(V._v,{side:"top",children:["Line ",e.lineNumber," in"," ",null===(s=e.filePath)||void 0===s?void 0:null===(a=s.split)||void 0===a?void 0:a.call(s,"/").pop()]})]},t)})})})},sw=e=>{let{content:t,containsError:a}=e,{text:s,error:l}=(0,u.useMemo)(()=>a?sm(t):{text:t,error:null},[t,a]);return(0,c.jsxs)(c.Fragment,{children:[s,l&&(0,c.jsx)(sg,{messageContent:t})]})};var sE=a(51817);let sN=async(e,t)=>{let a={dir_name:t.dir_name,file_name:t.file_name};return await e.post("/generate-file-download-url",a)},sk=e=>{let t=(0,tU.O)(),[a,s]=(0,u.useState)(void 0),l=(0,ea.ZP)(e=>e.imageUrlCache),n=(0,ea.ZP)(e=>e.cacheImageUrl),r="".concat(e.dir_name,"/").concat(e.file_name),i=(0,u.useRef)(!1);return(0,u.useEffect)(()=>{i.current||(i.current=!0,(async()=>{if(l[r]){s(l[r]);return}let{url:a}=await sN(t,e);s(a),n(r,a)})())},[t,e,r,l,n]),a},sC=e=>{var t;let{images:a,optimistImageUrls:s}=e,l=a.length+(null!==(t=null==s?void 0:s.length)&&void 0!==t?t:0)===1;return(0,c.jsxs)("div",{className:"mb-2 ml-auto flex max-w-[160px] flex-wrap justify-end gap-2",children:[null==s?void 0:s.map((e,t)=>(0,c.jsx)(sS,{imageUrl:e,singleImage:l},t)),a.map((e,t)=>(0,c.jsx)(s_,{image:e,singleImage:l},t))]})},s_=e=>{let{image:t,singleImage:a}=e,s=sk(t);return(0,c.jsx)(sS,{imageUrl:s,singleImage:a})},sS=e=>{let{imageUrl:t,singleImage:a}=e,s=(0,ea.ZP)(e=>e.setSelectedImageUrl),l=(0,u.useCallback)(()=>{t&&s(t)},[t,s]);return(0,c.jsx)(j.z,{variant:"ghost",className:(0,m.cn)("group relative inline-block p-0 hover:bg-transparent",a?"h-[90px] w-[160px]":"h-12 w-12"),type:"button",disabled:!t,onClick:l,children:t?(0,c.jsx)("img",{loading:"lazy",src:t,alt:"chat image",className:"h-full w-full rounded-lg border object-cover"}):(0,c.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg border bg-background/80",children:(0,c.jsx)(sE.Z,{className:"h-4 w-4 animate-spin"})})})},sT=e=>{let{message:t}=e;return(0,c.jsxs)("div",{className:"align-end flex flex-col",children:[(0,c.jsx)(sC,{images:t.images,optimistImageUrls:t.optimistImageUrls}),(0,c.jsx)("div",{className:(0,m.cn)("break-anywhere jus ml-auto max-w-[80%] overflow-auto whitespace-pre-wrap rounded-lg bg-secondary p-3 text-base leading-[22px]"),children:(0,c.jsx)(sx,{content:t.content,selectedElements:t.selectedElements,containsError:t.containsError,tags:t.tags})})]})},sA=e=>{let{message:t}=e,{tab:a="chat"}=(0,d.useParams)(),s=(0,ea.ZP)(e=>e.getEdit(t.editId));if("chat"===a){var l;return(null==s?void 0:null===(l=s.diff)||void 0===l?void 0:l.length)?(0,c.jsx)(aB,{code:{done:!0,parts:s.diff.map(e=>({file_path:e.file_path,done:!0,content:e.new_content}))},messageId:t.id,edit:s,messageStopped:!1,persisted:!1,status:"completed"}):(0,c.jsx)("div",{className:"relative w-5/6 max-w-xs",children:(0,c.jsx)(an,{edit:s,messageId:t.id,simplified:!0})})}return(0,c.jsx)(an,{edit:s,messageId:t.id,simplified:!0})},sP=(0,u.memo)(e=>{let{messageId:t,previousMessageId:a,isLinkedMessage:s}=e,l=(0,ea.ZP)(e=>e.getMessage(t)),{tab:n="chat"}=(0,d.useParams)(),r=(0,u.useMemo)(()=>{if(!l)return null;switch(l.type){case"userMessage":return(0,c.jsx)(sT,{message:l});case"userCommit":return(0,c.jsx)(su,{shortCommitHash:l.shortCommitHash});case"aiMessage":return(0,c.jsx)(a1,{message:l});case"branchSwitched":return(0,c.jsx)(a2,{branchName:l.branchName});case"revertSuccessv2":return(0,c.jsx)(sd,{shortCommitHash:l.shortCommitHash,newUI:!0});case"revertSuccess":return(0,c.jsx)(sd,{shortCommitHash:l.shortCommitHash});case"manualEdit":return(0,c.jsx)(sA,{message:l});default:return W.P.error("Unknown message role",{message:l}),null}},[l]);return l&&("history"!==n||["aiMessage","manualEdit","revertSuccessv2","userCommit"].includes(l.type))?(0,c.jsxs)("div",{className:(0,m.cn)("ChatMessageContainer","group flex flex-col pr-2",{"pb-4":"history"!==n}),"data-message-id":l.id,"data-message-edit-id":sI(l),"data-langsmith-url":sM(l),children:["history"!==n&&(0,c.jsx)(so,{message:l,previousMessageId:a}),(0,c.jsx)("div",{className:(0,m.cn)({"pl-2":"userMessage"!==l.type}),children:r})]}):null});sP.displayName="ChatItemV2";let sI=e=>{if("aiMessage"===e.type)return e.editId},sM=e=>{if("aiMessage"===e.type)return e.langsmithUrl},sL=e=>{let{lastMessageId:t,shouldStickToBottom:a,listRef:s,lastMessageIndex:l}=e,n=(0,ea.ZP)(e=>e.getMessage(t));return(0,u.useEffect)(()=>{if(!s.current||!a.current)return;let e=setTimeout(()=>{s.current.scrollToIndex(l,{align:"end",smooth:!0})},0);return()=>clearTimeout(e)},[n,a,s,l]),null},sD=(0,u.memo)(e=>{let{listRef:t,messageIdToScrollTo:a,tab:s}=e,l=(0,u.useRef)(!1),n=(0,ea.ZP)(e=>e.setScrollToTarget),r=(0,ea.ZP)(e=>e.scrollToTarget),i=(0,ea.ZP)(e=>e.getUserCommitMessageByShortCommitHash),o=(0,ea.ZP)(e=>e.getMessageByEditId),d=(0,ea.ZP)(e=>e.sortedMessageIds);return(0,u.useEffect)(()=>{l.current||(a?n({target:"messageId",messageId:a,initialScroll:!0}):"chat"===s&&n({target:"end",align:"end",initialScroll:!0}),l.current=!0)},[]),(0,u.useEffect)(()=>{if(r){let a=-1,s=r.align;switch(r.target){case"end":a=d.length-1;break;case"messageId":a=d.findIndex(e=>e===r.messageId),r.initialScroll&&-1===a&&(a=d.length-1,s="end");break;case"editId":{let e=o(r.editId);a=e?d.indexOf(e.id):-1;break}case"shortCommitHash":{let e=i(r.shortCommitHash);a=e?d.indexOf(e.id):-1}}if(-1!==a){var e;null===(e=t.current)||void 0===e||e.scrollToIndex(a,{align:s,smooth:r.smooth})}n(null)}},[r]),(0,c.jsx)("div",{})});sD.displayName="ScrollToPosition";let sR=e=>{let{show:t}=e;return(0,c.jsx)(h.E.div,{initial:{scale:0,opacity:0},animate:{scale:t?1:0,opacity:t?1:0},transition:{duration:.2,ease:"easeOut"},className:"ml-2 flex h-auto w-5 justify-center pt-1",children:(0,c.jsx)(sK,{})})},sz=e=>{let{children:t}=e;return(0,c.jsx)(h.E.div,{className:"group pointer-events-none absolute inset-x-0 bottom-0 -mt-8 flex min-h-8 items-center justify-start bg-gradient-to-b from-transparent to-background pr-2 text-sm text-card-foreground",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeOut"},children:t})},sO=e=>{let{scrolledToEnd:t}=e,a=(0,y.Eh)(e=>e.isSendChatMessageMutationPending),s=en(),l=(0,y.Eh)(e=>e.isSomeRevertMutationPending),n=a&&s||l,r=!t||n;return(0,c.jsx)(Z.M,{children:r&&(0,c.jsx)(sz,{children:(0,c.jsx)(sR,{show:n})})})},sK=e=>{let{size:t=12,...a}=e;return(0,c.jsxs)(h.E.svg,{width:t,height:t,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",variants:{beat:{scale:[1,1.2,1],transition:{duration:1.2,repeat:1/0,bounce:.5,times:[0,.15,.3]}}},animate:"beat",...a,children:[(0,c.jsx)("g",{clipPath:"url(#clip0_429_60)",children:(0,c.jsx)("circle",{cx:50,cy:50,r:50,fill:"#f4f4f5"})}),(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:"clip0_429_60",children:(0,c.jsx)("rect",{width:100,height:100,fill:"#f4f4f5"})})})," "]})};var sZ=a(16593);let sU=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{enabled:t,onResult:a,...s}=e,l=(0,tU.O)(),n=(0,et.DZ)();return(0,sZ.a)({...s,queryKey:["collaborators",n],queryFn:async()=>{try{let e=await l.get("/projects/".concat(n,"/collaborators"));return null==a||a(e),e}catch(t){e.onError&&e.onError(t),W.P.error("Failed to fetch collaborators",{error:t})}},enabled:t})},sF=()=>{let e=(0,ea.ZP)(e=>e.setCollaboratorsInitialized),t=(0,ea.ZP)(e=>e.collaboratorsInitialized),a=(0,sr.ZW)(),s=(0,sr.ye)("collaboration"),l=!a||s,n=(0,ea.ZP)(e=>e.setCollaborators);return sU({enabled:l,onError(t){W.P.error("Error loading collaborators",{error:t}),e(!0)},onResult(t){n(t),e(!0)}}),{isInitialized:!l||t}};var sB=a(78099);let sW=(e,t)=>{let a={};return e.forEach((e,s)=>{var l,n,r,i,o,c,d;let u=e.data(),p={id:u.id,commit_sha:null!==(l=u.commit_sha)&&void 0!==l?l:"unknown",commit_message:null!==(n=u.commit_message)&&void 0!==n?n:"unknown",number:s+t+1,created_at:u.created_at,reverted:null!==(r=u.reverted)&&void 0!==r&&r,type:u.type,diff:null!==(i=u.diff)&&void 0!==i?i:null,status:null!==(o=u.status)&&void 0!==o?o:null,previewBuildStatus:null!==(c=u.preview_build_status)&&void 0!==c?c:null,bookmarked:null!==(d=u.bookmarked)&&void 0!==d&&d};a[p.id]=p}),a},sH=()=>{let e=(0,ea.ZP)(e=>e.mergeEdits),[t,a]=(0,u.useState)(!1),[s,l]=(0,u.useState)(),n=(0,et.DZ)(),r=(0,u.useMemo)(()=>(0,aO.IO)((0,aO.hJ)(sB.db,"projects",n,"edits"),(0,aO.Xo)("bookmarked","desc"),(0,aO.Xo)("created_at","desc"),(0,aO.ar)("type","in",[sc.I.type.AI_UPDATE,sc.I.type.DEVELOPER_UPDATE,sc.I.type.REVERT])),[n]);return(0,u.useEffect)(()=>{(async()=>{try{let e=(await (0,aO.Yp)(r)).data().count;l(Math.max(0,e-1e3))}catch(e){W.P.error("Error fetching edit count",{error:e})}})()},[r]),(0,u.useEffect)(()=>{if(void 0===s)return;let t=(0,aO.cf)((0,aO.IO)(r,(0,aO.b9)(1e3)),t=>{e({edits:sW([...t.docs].reverse(),s)}),a(!0)},e=>{W.P.error("Error loading edits",{error:e})});return()=>t()},[s,r]),{isInitialized:t}};var sG=a(32935);let sV=()=>{let e=(0,ea.ZP)(e=>e.mergeMessages),t=(0,et.DZ)(),[a,s]=(0,u.useState)(!1),l=(0,u.useMemo)(()=>(0,aO.IO)((0,aO.hJ)(sB.db,"projects",t,"trajectory"),(0,aO.Xo)("created_at","desc"),(0,aO.b9)(1e3)),[t]);return(0,u.useEffect)(()=>{let t=(0,aO.cf)(l,t=>{let a=[...t.docs].reverse();e({messages:(0,sG.O)(a,{persisted:!0})}),s(!0)},e=>{W.P.error("Error loading messages",{error:e})});return()=>t()},[l]),{isInitialized:a}},sX=()=>{let{isInitialized:e}=sV(),{isInitialized:t}=sH(),{isInitialized:a}=sF();return{isInitialized:e&&t&&a}},sq=(0,u.memo)(e=>{var t,a,s,l;let{messageIds:n,messageIdToScrollTo:r}=e,i=(0,y.Eh)(e=>e.project),o=(0,ea.ZP)(e=>e.messages),d=(0,ea.ZP)(e=>e.getEditByShortCommitHash),p=(0,ea.ZP)(e=>e.getMessageByEditId),m=(0,ea.ZP)(e=>e.getEdit),h=(0,ea.ZP)(e=>e.edits),g=(0,u.useMemo)(()=>[...n].reverse(),[n]),f=(0,u.useMemo)(()=>{let e=[],t=[],a=[],s=[];return d(null==i?void 0:i.latest_commit_sha)?(g.forEach(l=>{let n=o[l];if("manualEdit"===n.type||"aiMessage"===n.type||"revertSuccessv2"===n.type||"userCommit"===n.type){if("userCommit"===n.type){let r=d(n.shortCommitHash);if(null==r?void 0:r.bookmarked){s.push(l);return}if(n.createdAt){let s=at.ou.fromJSDate(n.createdAt),r=at.ou.now().startOf("day"),i=s.startOf("day"),o=r.diff(i,"days").days;o<1?e.push(l):o<2?t.push(l):a.push(l)}}else{if(n.editId){let e=m(n.editId);if(null==e?void 0:e.bookmarked){s.push(l);return}}if(null==n?void 0:n.createdAt){let s=at.ou.fromJSDate(n.createdAt),r=at.ou.now().startOf("day"),i=s.startOf("day"),o=r.diff(i,"days").days;o<1?e.push(l):o<2?t.push(l):a.push(l)}}}}),{todaysMessageIds:null!=e?e:[],yesterdaysMessageIds:null!=t?t:[],previousMessageIds:null!=a?a:[],bookmarkedMessageIds:null!=s?s:[]}):null},[n,p,i,o,h]);return f?(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsxs)(t9.dM,{overscan:5,children:[(null==f?void 0:null===(t=f.bookmarkedMessageIds)||void 0===t?void 0:t.length)>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"ml-2 mt-1 text-base font-medium text-white",children:"Saved"}),null==f?void 0:f.bookmarkedMessageIds.map(e=>(0,c.jsx)(sP,{messageId:e,previousMessageId:g[0],isLinkedMessage:e===r},e))]}),(null==f?void 0:null===(a=f.todaysMessageIds)||void 0===a?void 0:a.length)>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"ml-2 mt-1 text-base font-medium text-white",children:"Today"}),null==f?void 0:f.todaysMessageIds.map(e=>(0,c.jsx)(sP,{messageId:e,previousMessageId:g[0],isLinkedMessage:e===r},e))]}),(null==f?void 0:null===(s=f.yesterdaysMessageIds)||void 0===s?void 0:s.length)>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"ml-2 mt-1 text-base font-medium text-white",children:"Yesterday"}),null==f?void 0:f.yesterdaysMessageIds.map(e=>(0,c.jsx)(sP,{messageId:e,previousMessageId:g[0],isLinkedMessage:e===r},e))]}),(null==f?void 0:null===(l=f.previousMessageIds)||void 0===l?void 0:l.length)>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"ml-2 mt-1 text-base font-medium text-white",children:"Previous"}),null==f?void 0:f.previousMessageIds.map(e=>(0,c.jsx)(sP,{messageId:e,previousMessageId:g[0],isLinkedMessage:e===r},e))]})]})}):null});sq.displayName="HistoryPanel";let sQ=(0,u.memo)(e=>{let{isDesignActive:t}=e,{isInitialized:a}=sX();return a?(0,c.jsx)(sY,{isDesignActive:t}):(0,c.jsx)("div",{className:"flex h-full flex-grow items-center justify-center gap-2 text-sm",children:(0,c.jsx)(E.Z,{className:"animate-spin",name:"progress_activity",size:"small"})})});sQ.displayName="ChatV2";let sY=(0,u.memo)(e=>{let{isDesignActive:t}=e,a=(0,d.useSearchParams)().get("messageId"),s=(0,ea.ZP)(e=>e.sortedMessageIds),l=(0,u.useRef)(null),n=(0,u.useRef)(!a),[r,i]=(0,u.useState)(!0),{tab:o="chat"}=(0,d.useParams)(),p=(0,u.useRef)(null),m=(0,u.useCallback)(e=>{e.deltaY<0&&(n.current=!1)},[]),h=(0,u.useCallback)(e=>{if(!l.current)return;let t=e.target.scrollTop,a=l.current.scrollSize-t-l.current.viewportSize;a<5?(n.current=!0,i(!0)):(a>300&&(n.current=!1),i(!1))},[]);return(0,u.useEffect)(()=>{if(!l.current||!t)return;let e=[];return[0,500,1e3,1500,2e3].forEach(t=>{let a=setTimeout(()=>{var e;null===(e=l.current)||void 0===e||e.scrollToIndex(s.length-1,{align:"end",smooth:!0})},t);e.push(a)}),()=>{e.forEach(clearTimeout)}},[t,s.length]),(0,c.jsxs)("div",{className:"flex-shrink-1 relative flex min-h-0 w-full",children:[(0,c.jsx)("div",{onWheel:m,onScroll:h,ref:p,className:"w-full overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted-foreground",children:"history"===o?(0,c.jsx)(sq,{messageIds:s,messageIdToScrollTo:a}):(0,c.jsx)(t9.dM,{ref:l,overscan:5,children:s.map((e,t)=>(0,c.jsx)(sP,{messageId:e,previousMessageId:s[t-1],isLinkedMessage:e===a},e))})}),(0,c.jsx)(sO,{scrolledToEnd:r}),(0,c.jsx)(sD,{listRef:l,messageIdToScrollTo:a,tab:o}),(0,c.jsx)(sL,{lastMessageId:s[s.length-1],shouldStickToBottom:n,listRef:l,lastMessageIndex:s.length-1})]})});sY.displayName="InnerChatV2";let sJ=()=>{var e;let t=(0,u.useRef)(null),{tab:a}=(0,d.useParams)();a||(a=r.Chat);let[s,l]=(0,u.useState)(!1),n=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"flex-grow"}),(0,c.jsx)(sQ,{isDesignActive:s}),(0,c.jsx)(t4,{chatPanelRef:t,isDesignActive:s,setIsDesignActive:l})]}),i=null!==(e=({[r.Chat]:n,[r.History]:n})[a])&&void 0!==e?e:n;return(0,c.jsxs)("div",{className:"flex h-full w-full flex-col pl-2",ref:t,children:[(0,c.jsx)(f,{}),i]})}},62809:function(e,t,a){"use strict";a.d(t,{C:function(){return n}});var s=a(69367),l=a(2265);function n(e){let[t,a]=(0,l.useState)(0),[n,r]=(0,l.useState)(0),[i,o]=(0,l.useState)(e);return i!==e&&(o(e),r(t)),(0,l.useEffect)(()=>{let t=e.split("").length-n,l=(0,s.j)(n,e.split("").length,{duration:Math.max(.1,t/200),bounce:0,onUpdate(e){a(Math.floor(e))}});return()=>l.stop()},[n,e]),e.split("").slice(0,t).join("")}},3097:function(e,t,a){"use strict";a.d(t,{U:function(){return c},b:function(){return o}});var s=a(78099),l=a(62449),n=a(5978),r=a(2265);let i=e=>{if(e.created_at&&!(e.created_at instanceof n.EK)){let{seconds:t,nanoseconds:a}=e.created_at;e.created_at=new n.EK(t,a)}return e},o=()=>{let e=(0,l.Eh)(e=>e.latestStreamedMessage);return e?i(e):null},c=e=>{let{projectId:t,messageId:a}=e,[l,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!t||!a)return;let e=(0,n.JU)(s.db,"projects",t,"trajectory",a);return(0,n.cf)(e,e=>{e.exists()?i(e.data()):i(null)})},[t,a]),l}},22529:function(e,t,a){"use strict";a.d(t,{x:function(){return c}});var s=a(57437),l=a(94508),n=a(13673),r=a(30166),i=a(74212);let o=(0,r.default)(()=>Promise.all([a.e(1609),a.e(1312),a.e(7050),a.e(2546)]).then(a.bind(a,74584)).then(e=>e.OutOfCreditsDialog),{loadableGenerated:{webpack:()=>[74584]},ssr:!1});function c(e){let{children:t,className:a}=e,r=(0,n.ZP)(e=>e.isOutOfCreditsDialogOpen),{AuthDialogComponent:c,SupabaseReauthDialogComponent:d,sendChatMessage:u}=(0,i.mp)();return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u()},className:(0,l.cn)("duration-125 focus-within:bg-card-hover group flex flex-col gap-2 rounded-xl border border-muted-border bg-muted p-2 transition-colors ease-in-out",a),children:[t,r&&(0,s.jsx)(o,{}),c,d]})}},11536:function(e,t,a){"use strict";a.d(t,{s:function(){return n}});var s=a(57437),l=a(94508);let n=e=>{let{children:t,className:a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex items-center gap-1",a),children:t})}},70122:function(e,t,a){"use strict";a.d(t,{T:function(){return i}});var s=a(57437),l=a(62449),n=a(2265),r=a(57346);let i=e=>{let{setSelectedImageUrl:t}=e,a=(0,l.Eh)(e=>e.images),r=(0,l.Eh)(e=>e.setImages),i=(0,n.useCallback)(e=>{r(t=>t.filter(t=>t.url!==e))},[r]);return 0===a.length?null:(0,s.jsx)("div",{className:"flex flex-nowrap gap-2 overflow-x-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]",children:a.map(e=>(0,s.jsx)(o,{setSelectedImageUrl:t,image:e,removeImage:i},e.url))})},o=e=>{let{image:t,removeImage:a,setSelectedImageUrl:l}=e,i=(0,n.useCallback)(()=>{l&&l(t.url)},[t.url,l]),o=l?"button":"div";return(0,s.jsxs)("div",{className:"group/attached-image relative flex flex-wrap gap-2",children:[(0,s.jsx)(o,{className:"h-12 w-12 p-0",type:"button",onClick:i,children:(0,s.jsx)("img",{src:t.url,alt:"Uploaded image preview",className:"h-full w-full rounded-md object-cover"})}),t.uploading&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-md bg-background",children:(0,s.jsx)(r.Z,{name:"progress_activity",className:"animate-spin"})}),(0,s.jsx)("button",{className:"absolute right-0 top-0 z-[10001] flex items-center justify-center rounded-full bg-primary text-xs text-primary-foreground opacity-0 shadow shadow-background/25 transition-opacity duration-150 ease-out group-hover/attached-image:opacity-100",onClick:()=>a(t.url),children:(0,s.jsx)(r.Z,{name:"close_small",size:"small"})})]},t.url)}},29162:function(e,t,a){"use strict";a.d(t,{O:function(){return r},x:function(){return i}});var s=a(57437),l=a(2265);let n=(0,l.createContext)(null),r=()=>{let e=(0,l.useContext)(n);if(!e)throw Error("useChatInputContext must be used within a ChatInputProvider");return e},i=e=>{let{children:t,onSendChatMessage:a,localStorageKey:r,hasActiveLock:i}=e,o=(0,l.useRef)(null),c=(0,l.useMemo)(()=>({sendChatMessage:a,chatInputFormRef:o,localStorageKey:r,hasActiveLock:i}),[a,o,r,i]);return(0,s.jsx)(n.Provider,{value:c,children:t})}},62475:function(e,t,a){"use strict";a.d(t,{t:function(){return h}});var s=a(57437),l=a(94508),n=a(57346),r=a(74212),i=a(14438),o=a(36710),c=a(62449),d=a(21770),u=a(3097),p=a(2265),m=a(5810);let h=e=>{let{className:t,iconSize:a="large",disabled:h=!1}=e,g=(0,m.vp)(),{sendingDisabled:f}=(0,r.mp)(),{showStopAction:v,mutation:x}=function(e){let{projectId:t}=e,a=(0,o.O)(),s=(0,u.b)(),[l,n]=(0,p.useState)(void 0),r=(0,c.Eh)(e=>e.setLatestStreamedMessage),m=(0,d.D)({mutationFn:async()=>{if(!s)throw Error("No currently streaming message found");if(!t)throw Error("No projectId found");if(!("content"in s))throw Error("Invalid message type");return r({...s,stopped:!0}),await a.post("/projects/".concat(t,"/chat/").concat(s.id,"/cancel"))},onSuccess:()=>{n(null==s?void 0:s.id),r(void 0)},onError:()=>{i.Am.error("Failed to stop message",{description:"Please try again"})}});return{showStopAction:!!s&&!s.stopped&&s.id!==l,mutation:m}}({projectId:null!=g?g:void 0}),b=(0,p.useCallback)(async()=>{await x.mutateAsync()},[x]);return g&&(v||x.isPending)?(0,s.jsx)("button",{type:"button",className:(0,l.cn)(t,"transition-opacity duration-150 disabled:cursor-not-allowed disabled:opacity-50"),disabled:x.isPending,onClick:b,children:(0,s.jsx)(n.Z,{name:"stop_circle",size:a})}):(0,s.jsx)("button",{id:"chatinput-send-message-button",type:"submit",className:(0,l.cn)(t,"transition-opacity duration-150 ease-out disabled:cursor-not-allowed disabled:opacity-50"),disabled:f||h,children:(0,s.jsx)(n.Z,{name:"arrow_circle_up",size:a})})}},4586:function(e,t,a){"use strict";a.d(t,{E:function(){return u}});var s=a(57437),l=a(94508),n=a(2265),r=a(76818),i=a(29162),o=a(44481),c=a(94311),d=a(43206);let u=e=>{let{autoSize:t,rows:a,className:u,autoFocus:p,placeholder:m,forceShowPlaceholder:h,disabled:g}=e,{chatInputFormRef:f,localStorageKey:v}=(0,i.O)(),{chatMessage:x,setChatMessage:b}=(0,c.b)({localStorageKey:v}),y=(0,n.useCallback)(e=>{b(e.target.value)},[b]);(0,n.useEffect)(()=>{t&&(null==f?void 0:f.current)&&(f.current.style.height="auto",f.current.style.height=f.current.scrollHeight+"px")},[t,x,f]),(0,o.y1)("t",e=>{e.preventDefault(),f.current&&f.current.focus()});let j=(0,d.Z)("md");return(0,n.useEffect)(()=>{(null==f?void 0:f.current)&&!j&&f.current.focus()},[x,f,j]),(0,s.jsx)(r.g,{id:"chatinput",autoFocus:p,ref:null!=f?f:void 0,disabled:g,value:h?"":x,onChange:y,className:(0,l.cn)("resize-none bg-inherit text-[16px] leading-snug placeholder-shown:text-ellipsis placeholder-shown:whitespace-nowrap md:text-base","focus-visible:ring-0 focus-visible:ring-offset-0","max-h-[200px] scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted-foreground","bg-transparent focus:bg-transparent",u),placeholder:m,rows:a,onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey){e.preventDefault();let t=e.currentTarget.closest("form");t&&t.requestSubmit(),e.currentTarget.blur()}}})}},58135:function(e,t,a){"use strict";a.d(t,{y:function(){return o}});var s=a(57437),l=a(94508),n=a(62449),r=a(74212);let i=e=>(0,r.L0)(e)?"Message is too long. Exceeded by ".concat(e.length-r.mh," character")+(e.length-r.mh==1?"":"s"):r.mh-e.length<1e3?"".concat(r.mh-e.length," character")+(r.mh-e.length==1?"":"s")+" left":"",o=()=>{let e=(0,n.Eh)(e=>e.chatMessage),t=i(e),a=(0,r.L0)(e);return t?(0,s.jsx)("div",{className:(0,l.cn)("mx-2 flex items-center text-sm text-muted-foreground",{"text-destructive":a}),children:t}):null}},74212:function(e,t,a){"use strict";a.d(t,{mh:function(){return j},L0:function(){return w},mp:function(){return E}});var s,l,n=a(57437),r=a(94311),i=a(21288);(s=l||(l={})).USER_UPLOAD="user_upload",s.IFRAME_SNAPSHOT="iframe_snapshot";var o=a(62449),c=a(2265),d=a(49360),u=a(29162),p=a(49340),m=a(99376),h=a(26110),g=a(62869);function f(e){let{open:t,onOpenChange:a}=e,s=(0,m.useRouter)();return(0,n.jsx)(h.Vq,{open:t,onOpenChange:a,children:(0,n.jsxs)(h.cZ,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(h.fK,{children:[(0,n.jsx)(h.$N,{children:"Sign in to continue"}),(0,n.jsx)(h.Be,{children:"Create an account or sign in to send messages"})]}),(0,n.jsxs)("div",{className:"mt-4 flex flex-col gap-4",children:[(0,n.jsx)(g.z,{onClick:()=>s.push("/login"),className:"w-full",variant:"outline",children:"Sign In"}),(0,n.jsx)(g.z,{onClick:()=>s.push("/signup"),className:"w-full",children:"Sign up for free"})]})]})})}var v=a(5810),x=a(78844);function b(e){let{open:t,onOpenChange:a}=e,s=(0,v.vp)(),{handleConnect:l}=(0,x.h)(s||"");return(0,n.jsx)(h.Vq,{open:t,onOpenChange:a,children:(0,n.jsxs)(h.cZ,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(h.fK,{children:[(0,n.jsx)(h.$N,{children:"We got an update for you!"}),(0,n.jsx)(h.Be,{children:"To make Supabase integration more robust, Lovable can now read your project logs. Please re-authenticate with Supabase to continue."})]}),(0,n.jsx)("div",{className:"mt-4 flex flex-col gap-4",children:(0,n.jsx)(g.z,{onClick:()=>{a(!1),l()},className:"w-full",children:"Re-authenticate with Supabase"})})]})})}var y=a(25134);let j=5e4,w=e=>e.length>j,E=()=>{let{userData:e}=(0,y.v)(),{sendChatMessage:t,localStorageKey:a,hasActiveLock:s}=(0,u.O)(),{clearChatMessage:m,restoreChatMessage:h}=(0,r.b)({localStorageKey:a}),[g]=(0,p.a)(),[v,x]=(0,c.useState)(!1),[j,E]=(0,c.useState)(!1),N=(0,o.Eh)(e=>e.images),k=(0,o.Eh)(e=>e.setImages),C=(0,o.Eh)(e=>e.chatMessage),_=(0,o.Eh)(e=>e.selectedElements),S=(0,o.Eh)(e=>e.setSelectedElements),[T,A]=(0,c.useState)(!1),P=(0,o.Eh)(e=>e.chatMode),I=(0,o.Eh)(e=>e.setChatMode),M=(0,o.Eh)(e=>e.shouldBlockActions()),L=(0,o.Eh)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.supabase_project_config}),D=(0,c.useMemo)(()=>N.some(e=>e.uploading),[N]),R=(0,c.useMemo)(()=>M||s||T,[M,s,T]),z=(0,c.useMemo)(()=>R||0===C.length||D||w(C),[R,C,D]),O=(0,c.useCallback)(async()=>{var a;if(z)return;if(P===o.jE.CHAT_ONLY&&C.toLowerCase().includes("lov-action")&&I(o.jE.DEFAULT),!g){x(!0);return}let s=null==L?void 0:L.supabase_organization_id,n=null==e?void 0:null===(a=e.supabase)||void 0===a?void 0:a.find(e=>e.supabase_org_id===s);if(L&&n&&!n.has_analytics_scope){E(!0);return}let r={images:N,selectedElements:_},c={id:"msg-".concat((0,d.Z)()),message:C,images:N.map(e=>({image_id:e.id,type:l.USER_UPLOAD})),selected_elements:_,optimisticImageContentFiles:N.map(e=>e.file),chat_only:P===o.jE.CHAT_ONLY,agent_mode_enabled:P===o.jE.AGENT};try{await t({body:c,options:{clear:()=>{m(),k([]),S([])},restore:()=>{k(r.images),h(),S(r.selectedElements)}}})}catch(e){i.P.warn("Error when sending chat message",{error:e})}},[t,C,N,m,h,k,_,S,P,I,g,x,E,L,null==e?void 0:e.supabase,z]);return{sendChatMessage:(0,c.useCallback)(async()=>{if(!T){A(!0);try{await O()}catch(e){i.P.warn("Error when sending chat message",{error:e})}finally{A(!1)}}},[O,T]),sendingDisabled:z,isLocked:R,AuthDialogComponent:(0,n.jsx)(f,{open:v,onOpenChange:x}),SupabaseReauthDialogComponent:(0,n.jsx)(b,{open:j,onOpenChange:E})}}},74928:function(e,t,a){"use strict";a.d(t,{Fw:function(){return r},wy:function(){return n},zF:function(){return l}});var s=a(55951);let l=s.fC,n=s.wy,r=s.Fw},9259:function(e,t,a){"use strict";a.d(t,{R:function(){return i}});var s=a(57437),l=a(2265),n=a(94508),r=a(95186);let i=l.forwardRef((e,t)=>{let{value:a,onChange:i,min:o=0,max:c=100,step:d=1,className:u,scrubSensitivity:p=.5,direction:m="horizontal",icon:h,leftIcon:g,disabled:f=!1,...v}=e,[x,b]=l.useState(a),[y,j]=l.useState(!1),w=l.useRef(!1),E=l.useRef(0),N=l.useRef(0),k=l.useRef(a),C=l.useMemo(()=>{if(!Number.isFinite(d))return 0;let e=d.toString().split(".")[1];return e?e.length:0},[d]);function _(e){return parseFloat(Math.max(o,Math.min(Math.round(e/d)*d,c)).toFixed(C))}function S(e){f||0!==e.button||(j(!0),w.current=!0,E.current=e.clientX,N.current=e.clientY,k.current=x,document.addEventListener("pointermove",T),document.addEventListener("pointerup",A))}function T(e){if(!w.current)return;let t=e.clientX-E.current,a=-e.clientY+N.current,s=k.current+("horizontal"===m?t:a)*d*p;b(s=_(s)),i(s)}function A(){j(!1),w.current=!1,document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",A)}return l.useEffect(()=>{b(a)},[a]),(0,s.jsxs)("div",{className:(0,n.cn)("group relative w-fit",u,{"opacity-50":f}),children:[g&&(0,s.jsx)("div",{className:(0,n.cn)("absolute inset-y-0 left-0 flex select-none items-center px-2 text-muted-foreground","horizontal"===m?"cursor-ew-resize":"cursor-ns-resize"),onPointerDown:S,children:g}),(0,s.jsx)(r.I,{ref:t,type:"number",className:(0,n.cn)("pr-0 [appearance:textfield] active:cursor-none disabled:opacity-100 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none","horizontal"===m?"hover:cursor-ew-resize":"hover:cursor-ns-resize",g&&"pl-8"),disabled:f,step:d,value:x,onChange:function(e){let t=e.target.value;if(""===t){b(o),i(o);return}let a=parseFloat(t);if(isNaN(a)){b(o),i(o);return}let s=_(a);b(s),i(s)},onPointerDown:S,...v}),!!y&&(0,s.jsx)("div",{className:(0,n.cn)("fixed inset-0","horizontal"===m?"cursor-ew-resize":"cursor-ns-resize")})]})});i.displayName="NumericScrubber"},48349:function(e,t,a){"use strict";a.d(t,{B:function(){return E}});var s=a(57437),l=a(29162);let n={JPEG:{mimeType:"image/jpeg",extensions:[".jpg",".jpeg"],displayName:"JPG"},PNG:{mimeType:"image/png",extensions:[".png"],displayName:"PNG"},WEBP:{mimeType:"image/webp",extensions:[".webp"],displayName:"WEBP"}},r=()=>Object.values(n).reduce((e,t)=>({...e,[t.mimeType]:t.extensions}),{}),i=e=>Object.values(n).some(t=>t.mimeType===e),o=()=>{let e=Object.values(n).map(e=>e.displayName),t=e.pop();return"".concat(e.join(", "),", or ").concat(t)},c=()=>20971520,d=e=>i(e.type),u=e=>{var t;let a=null===(t=e.clipboardData)||void 0===t?void 0:t.items;return a?Array.from(a).filter(e=>"file"===e.kind).map(e=>e.getAsFile()).filter(Boolean).filter(d):[]};var p=a(94508),m=a(2265),h=a(54887),g=a(57346);let f=e=>{let{getRootProps:t,portalTargetRef:a,isDragReject:l}=e,[n,r]=(0,m.useState)(!1),i=(0,m.useRef)(0),c=(0,m.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),d=(0,m.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),i.current--,i.current>0||r(!1)},[]),u=(0,m.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),i.current+=1,null!==e.dataTransfer&&e.dataTransfer.types.includes("Files")&&r(!0)},[]),f=(0,m.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),r(!1),null!==e.dataTransfer&&e.dataTransfer.types.includes("Files")&&(i.current=0)},[]),v=(null==a?void 0:a.current)||window.document.body;(0,m.useEffect)(()=>{if(v)return v.addEventListener("dragenter",u),v.addEventListener("dragleave",d),v.addEventListener("dragover",c),v.addEventListener("drop",f),function(){v.removeEventListener("dragenter",u),v.removeEventListener("dragleave",d),v.removeEventListener("dragover",c),v.removeEventListener("drop",f)}},[v,u,d,c,f]),(0,m.useEffect)(()=>{if(v)return n&&(v.style.overflow="hidden"),()=>{v.style.overflow="auto"}},[n,v]);let[x,b]=(0,m.useState)(!1);return((0,m.useEffect)(()=>{b(!0)},[]),v)?(0,s.jsx)(s.Fragment,{children:x&&(0,h.createPortal)((0,s.jsx)("div",{...t(),className:(0,p.cn)("inset-0 z-30 flex items-center justify-center bg-black/80 transition-opacity duration-75",(null==a?void 0:a.current)?"absolute pl-3":"fixed",n?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"),children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 rounded-lg bg-muted p-5",style:{backgroundImage:"url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23333' stroke-width='2' stroke-dasharray='10%2c 10' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e\")"},children:[(0,s.jsx)(g.Z,{name:"add_photo_alternate",className:"h-8 w-8"}),(0,s.jsx)("h1",{className:"text-center text-primary",children:l?"Invalid file type":"Upload images"}),(0,s.jsx)("p",{className:"text-center text-sm",children:l?"Some files will not be accepted":"Drop ".concat(o()," files here")})]})}),v)}):null};var v=a(36710),x=a(26034),b=a(62449),y=a(1346),j=a(14438),w=a(49360);let E=e=>{let t=(0,v.O)(),{chatInputFormRef:a}=(0,l.O)(),n=(0,b.Eh)(e=>e.setImages),i=(0,m.useCallback)(async e=>{let a=e.map(async e=>{let a=await (0,x.c)(t,e.id,e.file);return{file:e.file,url:a,id:e.id}}),s=await Promise.allSettled(a),l=s.filter(e=>"rejected"===e.status);l.length>0&&j.Am.error("Image upload failed",{description:"Failed to upload ".concat(l.length," file").concat(l.length>1?"s":"",".")}),n(t=>{let a=new Set(s.filter(e=>"fulfilled"===e.status).map(e=>e.value.id)),l=new Set(e.map(e=>e.id).filter(e=>!a.has(e)));return t.filter(e=>!l.has(e.id)).map(e=>({...e,uploading:!1}))})},[n,j.Am,t]),o=(0,m.useCallback)(e=>{let t=e.map(e=>({file:e,url:URL.createObjectURL(e),uploading:!0,id:(0,w.Z)()}));n(e=>[...e,...t]),i(t)},[i,n]),{getInputProps:d,open:p,getRootProps:h,isDragReject:g}=(0,y.uI)({onDrop:o,onDropAccepted:()=>{var e;null==a||null===(e=a.current)||void 0===e||e.focus()},noClick:!0,noKeyboard:!0,maxSize:c(),accept:r(),onDropRejected:e=>{for(let t of e)if(t.errors.length>0){let e="file-too-large"===t.errors[0].code?"File is too large. Max size is 20MB":t.errors[0].message,a="file-too-large"===t.errors[0].code?"File too large":t.errors[0].code;j.Am.error(a,{description:e})}}});return(0,m.useEffect)(()=>{let e=e=>{let t=u(e);if(t.length>0){var s;o(t),null==a||null===(s=a.current)||void 0===s||s.focus()}};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[o,a]),{dropzoneElement:(0,s.jsx)(f,{getRootProps:h,portalTargetRef:e,isDragReject:g}),openFileUpload:p,getInputProps:d}}}}]);